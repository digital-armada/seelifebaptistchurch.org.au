ðŸ“‹ PROJECT STRUCTURE OVERVIEW
==============================

Project: See Life Baptist Church
Export Date: Thu Oct  9 12:48:47 AEDT 2025
Project Root: /Users/stevenkhoshaba/digital_armada/Projects/see-life-baptist

ðŸ“‹ Adding configuration files...

==================================================================
FILE: package.json
==================================================================

{
  "name": "see-life-baptist",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev --turbopack",
    "build": "next build --turbopack",
    "start": "next start",
    "lint": "eslint",
    "check": "tsc --noEmit",
    "db:seed": "tsx prisma/seed.ts",
    "postinstall": "prisma generate"
  },
  "dependencies": {
    "@dnd-kit/core": "^6.3.1",
    "@dnd-kit/sortable": "^10.0.0",
    "@dnd-kit/utilities": "^3.2.2",
    "@getbrevo/brevo": "^3.0.1",
    "@headlessui/react": "^2.2.9",
    "@heroicons/react": "^2.2.0",
    "@hookform/resolvers": "^5.2.2",
    "@radix-ui/react-avatar": "^1.1.10",
    "@radix-ui/react-collapsible": "^1.1.12",
    "@radix-ui/react-dialog": "^1.1.15",
    "@radix-ui/react-dropdown-menu": "^2.1.16",
    "@radix-ui/react-separator": "^1.1.7",
    "@radix-ui/react-slot": "^1.2.3",
    "@radix-ui/react-tooltip": "^1.2.8",
    "@tanstack/react-query": "^5.90.2",
    "@tanstack/react-query-devtools": "^5.90.2",
    "@tanstack/react-table": "^8.21.3",
    "bcrypt": "^6.0.0",
    "better-auth": "^1.3.23",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "lucide-react": "^0.544.0",
    "next": "15.5.4",
    "react": "19.1.0",
    "react-dom": "19.1.0",
    "react-hook-form": "^7.63.0",
    "sonner": "^2.0.7",
    "tailwind-merge": "^3.3.1",
    "zod": "^4.1.11"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^3",
    "@prisma/client": "^6.16.2",
    "@tailwindcss/postcss": "^4",
    "@types/bcrypt": "^6.0.0",
    "@types/node": "^20",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "eslint": "^9",
    "eslint-config-next": "15.5.4",
    "prisma": "^6.16.2",
    "shadcn": "^3.3.1",
    "tailwindcss": "^4",
    "tsx": "^4.20.6",
    "tw-animate-css": "^1.4.0",
    "typescript": "^5"
  }
}

==================================================================
FILE: tsconfig.json
==================================================================

{
  "compilerOptions": {
    "target": "ES2017",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}


==================================================================
FILE: next.config.ts
==================================================================

import type { NextConfig } from 'next';

const nextConfig: NextConfig = {
    eslint: {
        // Disable ESLint errors during build
        ignoreDuringBuilds: true,
    },
    typescript: {
        // Disable TypeScript errors during build
        ignoreBuildErrors: true,
    },
};

export default nextConfig;


==================================================================
FILE: postcss.config.mjs
==================================================================

const config = {
  plugins: ["@tailwindcss/postcss"],
};

export default config;


==================================================================
FILE: eslint.config.mjs
==================================================================

import { dirname } from 'path';
import { fileURLToPath } from 'url';
import { FlatCompat } from '@eslint/eslintrc';

const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);

const compat = new FlatCompat({
    baseDirectory: __dirname,
});

const eslintConfig = [
    ...compat.extends('next/core-web-vitals', 'next/typescript'),
    {
        ignores: [
            'node_modules/**',
            '.next/**',
            'out/**',
            'build/**',
            'next-env.d.ts',
            'src/generated/**',
        ],
        rules: {
            // Disable specific rules that are causing build failures
            'react/no-unescaped-entities': 'off', // Allow unescaped quotes/apostrophes in JSX
            '@typescript-eslint/no-unused-vars': 'warn', // Change unused vars to warnings instead of errors
            '@typescript-eslint/no-explicit-any': 'off', // Allow 'any' types
            '@typescript-eslint/no-unused-expressions': 'off', // Allow unused expressions
            '@next/next/no-img-element': 'off', // Allow <img> tags
            'jsx-a11y/alt-text': 'off', // Allow missing alt text
            '@next/next/no-html-link-for-pages': 'off', // Allow <a> tags for page navigation
        },
    },
];

export default eslintConfig;


==================================================================
FILE: components.json
==================================================================

{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "new-york",
  "rsc": false,
  "tsx": true,
  "tailwind": {
    "config": "",
    "css": "src/shared/styles/globals.css",
    "baseColor": "neutral",
    "cssVariables": true,
    "prefix": ""
  },
  "iconLibrary": "lucide",
  "aliases": {
    "components": "@/src/components",
    "utils": "@/lib/utils",
    "ui": "@/src/components/ui",
    "lib": "@/lib",
    "hooks": "@/hooks"
  },
  "registries": {}
}

==================================================================
FILE: README.md
==================================================================

This is a [Next.js](https://nextjs.org) project bootstrapped with [`create-next-app`](https://nextjs.org/docs/app/api-reference/cli/create-next-app).

## Getting Started

First, run the development server:

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
# or
bun dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

You can start editing the page by modifying `app/page.tsx`. The page auto-updates as you edit the file.

This project uses [`next/font`](https://nextjs.org/docs/app/building-your-application/optimizing/fonts) to automatically optimize and load [Geist](https://vercel.com/font), a new font family for Vercel.

## Learn More

To learn more about Next.js, take a look at the following resources:

- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.
- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.

You can check out [the Next.js GitHub repository](https://github.com/vercel/next.js) - your feedback and contributions are welcome!

## Deploy on Vercel

The easiest way to deploy your Next.js app is to use the [Vercel Platform](https://vercel.com/new?utm_medium=default-template&filter=next.js&utm_source=create-next-app&utm_campaign=create-next-app-readme) from the creators of Next.js.

Check out our [Next.js deployment documentation](https://nextjs.org/docs/app/building-your-application/deploying) for more details.


==================================================================
FILE: prisma/schema.prisma
==================================================================

generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id            String    @id @default(cuid())
  name          String?
  email         String    @unique
  emailVerified Boolean   @default(false)
  image         String?
  role          String    @default("ADMIN")
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  accounts      Account[]
  sessions      Session[]

  @@map("user")
}

model Session {
  id        String   @id
  expiresAt DateTime
  token     String   @unique
  createdAt DateTime
  updatedAt DateTime
  ipAddress String?
  userAgent String?
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId], map: "session_userId_fkey")
  @@map("session")
}

model Account {
  id                    String    @id
  accountId             String
  providerId            String
  userId                String
  accessToken           String?
  refreshToken          String?
  idToken               String?
  accessTokenExpiresAt  DateTime?
  refreshTokenExpiresAt DateTime?
  scope                 String?
  password              String?
  createdAt             DateTime
  updatedAt             DateTime
  user                  User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId], map: "account_userId_fkey")
  @@map("account")
}

model Verification {
  id         String    @id
  identifier String
  value      String
  expiresAt  DateTime
  createdAt  DateTime?
  updatedAt  DateTime?

  @@map("verification")
}

model Statement {
  id              String      @id @default(cuid())
  topic           String
  content         String      @db.Text
  bibleReferences String?
  displayOrder    Int
  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt
  parentId        String?
  parent          Statement?  @relation("StatementSubStatements", fields: [parentId], references: [id], onDelete: Cascade)
  subStatements   Statement[] @relation("StatementSubStatements")

  @@index([parentId], map: "Statement_parentId_fkey")
}

model Services {
  id          String    @id @default(cuid())
  name        String
  description String?   @db.Text
  day         DayOfWeek
  time        String
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

}

model FAQ {
  id        String   @id
  question  String
  answer    String   @db.Text
  createdAt DateTime @default(now())
  updatedAt DateTime

}

enum DayOfWeek {
  SUNDAY
  MONDAY
  TUESDAY
  WEDNESDAY
  THURSDAY
  FRIDAY
  SATURDAY
}



ðŸ“‹ Adding source code files...

==================================================================
FILE: ./middleware.ts
==================================================================

import { NextRequest, NextResponse } from 'next/server';

export function middleware(request: NextRequest) {
    // For now, just check if accessing dashboard
    if (request.nextUrl.pathname.startsWith('/dashboard')) {
        // Redirect to login if not authenticated - will be checked client-side
        // Since edge runtime issues with Prisma, we'll handle auth in components
        return NextResponse.next();
    }

    return NextResponse.next();
}

export const config = {
    matcher: ['/dashboard/:path*'],
};


==================================================================
FILE: ./app/dashboard/service-times/new/page.tsx
==================================================================

'use client';

import { ServiceTimesForm } from '@/src/features/service-times/components/ServiceTimesForm';
import { useRouter } from 'next/navigation';

export default function NewServiceTimePage() {
    const router = useRouter();

    const handleSuccess = () => {
        router.push('/dashboard/service-times');
    };

    return (
        <div className='container mx-auto py-6'>
            <div className='flex justify-between items-center mb-6'>
                <h1 className='text-3xl font-bold'>Create New Service Time</h1>
            </div>
            <div className='max-w-md'>
                <ServiceTimesForm onSuccess={handleSuccess} />
            </div>
        </div>
    );
}


==================================================================
FILE: ./app/dashboard/service-times/[id]/edit/loading.tsx
==================================================================

import { Skeleton } from '@/src/components/ui/skeleton';

export default function Loading() {
    // This UI will be shown automatically via Suspense while the page fetches data.
    return (
        <div className='container mx-auto py-6'>
            <div className='mb-6'>
                <h1 className='text-3xl font-bold'>Edit Service Time</h1>
                <p className='text-gray-600 mt-2'>
                    Update the details of this service time.
                </p>
            </div>
            <div className='max-w-md space-y-4'>
                <Skeleton className='h-10 w-1/3' />
                <Skeleton className='h-10 w-full' />
                <Skeleton className='h-10 w-full' />
                <Skeleton className='h-10 w-full' />
            </div>
        </div>
    );
}


==================================================================
FILE: ./app/dashboard/service-times/[id]/edit/page.tsx
==================================================================

import { notFound } from 'next/navigation';
import { getService } from '@/src/features/service-times/actions';
import { ServiceTimesForm } from '@/src/features/service-times/components/ServiceTimesForm';

export default async function EditServicePage({
    params,
}: {
    params: Promise<{ id: string }>;
}) {
    const { id } = await params;
    const result = await getService(id);

    if (!result.success) {
        notFound();
    }

    const service = result.data;

    return (
        <div className='container mx-auto py-6'>
            <div className='mb-6'>
                <h1 className='text-3xl font-bold'>Edit Service Time</h1>
                <p className='text-gray-600 mt-2'>
                    Update the details of this service time.
                </p>
            </div>
            <div className='bg-white shadow rounded-lg p-6'>
                <ServiceTimesForm service={service} />
            </div>
        </div>
    );
}


==================================================================
FILE: ./app/dashboard/service-times/page.tsx
==================================================================

import { ServiceTimesTable } from '@/src/features/service-times/components/ServiceTimesTable';

export default function ServiceTimesPage() {
    return (
        <div className='container mx-auto py-6'>
            <div className='flex justify-between items-center mb-6'>
                <h1 className='text-3xl font-bold'>Service Times Management</h1>
            </div>
            <div className='space-y-6'>
                <ServiceTimesTable />
            </div>
        </div>
    );
}


==================================================================
FILE: ./app/dashboard/faq/new/page.tsx
==================================================================

'use client';

import { FAQForm } from '@/src/features/faq/components/FAQForm';
import { useRouter } from 'next/navigation';

export default function NewFAQPage() {
    const router = useRouter();

    const handleSuccess = () => {
        router.push('/dashboard/faq');
    };

    return (
        <div className='container mx-auto py-6'>
            <div className='flex justify-between items-center mb-6'>
                <h1 className='text-3xl font-bold'>Create New FAQ</h1>
            </div>
            <div className='max-w-2xl'>
                <FAQForm onSuccess={handleSuccess} />
            </div>
        </div>
    );
}


==================================================================
FILE: ./app/dashboard/faq/[id]/edit/page.tsx
==================================================================

import { notFound } from 'next/navigation';
import { getFAQ } from '@/src/features/faq/actions';
import { FAQForm } from '@/src/features/faq/components/FAQForm';

export default async function EditFAQPage({
    params,
}: {
    params: Promise<{ id: string }>;
}) {
    const { id } = await params;
    const result = await getFAQ(id);

    if (!result.success) {
        notFound();
    }

    const faq = result.data;

    return (
        <div className='container mx-auto py-6'>
            <div className='mb-6'>
                <h1 className='text-3xl font-bold'>Edit FAQ</h1>
                <p className='text-gray-600 mt-2'>
                    Update the details of this FAQ.
                </p>
            </div>
            <div className='bg-white shadow rounded-lg p-6'>
                <FAQForm faq={faq} />
            </div>
        </div>
    );
}


==================================================================
FILE: ./app/dashboard/faq/page.tsx
==================================================================

import { FAQTable } from '@/src/features/faq/components/FAQTable';

export default function FAQPage() {
    return (
        <div className='container mx-auto py-6'>
            <div className='flex justify-between items-center mb-6'>
                <h1 className='text-3xl font-bold'>FAQ Management</h1>
            </div>
            <div className='space-y-6'>
                <FAQTable />
            </div>
        </div>
    );
}


==================================================================
FILE: ./app/dashboard/statement-of-faith/new/page.tsx
==================================================================

'use client';

import { StatementOfFaithForm } from '@/src/features/statement/components/StatementOfFaithForm';

export default function NewStatementPage() {
    return (
        <div className='w-full px-6 py-6'>
            <div className='mb-6'>
                <h1 className='text-3xl font-bold'>
                    Create New Statement of Faith
                </h1>
                <p className='text-gray-600 mt-2'>
                    Add a new statement of faith to your church's doctrine.
                </p>
            </div>
            <div className='bg-white shadow rounded-lg p-6 w-full'>
                <StatementOfFaithForm />
            </div>
        </div>
    );
}


==================================================================
FILE: ./app/dashboard/statement-of-faith/[id]/edit/page.tsx
==================================================================

import { notFound } from 'next/navigation';
import { getStatement } from '@/src/features/statement/actions';
import { StatementOfFaithForm } from '@/src/features/statement/components/StatementOfFaithForm';
import { Statement } from '@/src/features/statement/schemas';

// This is now a Server Component
export default async function EditStatementPage({
    params,
}: {
    params: { id: string };
}) {
    const { id } = params;
    const result = await getStatement(id);

    // Handle the case where the statement is not found on the server.
    if (!result.success || !result.data) {
        notFound();
    }

    const statement: Statement = result.data;

    return (
        <div className='w-full px-6 py-6'>
            <div className='mb-6'>
                <h1 className='text-3xl font-bold'>Edit Statement of Faith</h1>
                <p className='text-gray-600 mt-2'>
                    Update the details of this statement of faith.
                </p>
            </div>
            {/* The form receives the server-fetched data as a prop */}
            <div className='bg-white shadow rounded-lg p-6 w-full'>
                <StatementOfFaithForm statement={statement} />
            </div>
        </div>
    );
}


==================================================================
FILE: ./app/dashboard/statement-of-faith/[id]/page.tsx
==================================================================

'use client'; // This page has client-side routing buttons, so 'use client' is appropriate for now.
// A more advanced refactor could move the data fetching to a parent Server Component.

import { useRouter, useParams } from 'next/navigation';
import { useStatement } from '@/src/features/statement/queries';
import { NestedEditor } from '@/src/features/statement/components/NestedEditor';
import { Button } from '@/src/components/ui/button';
import { Skeleton } from '@/src/components/ui/skeleton';

export default function ViewStatementPage() {
    const router = useRouter();
    const params = useParams();
    const id = params.id as string;

    const { data: statement, isLoading, error } = useStatement(id);

    if (isLoading) {
        return (
            <div className='container mx-auto py-6'>
                <div className='space-y-4'>
                    <Skeleton className='h-12 w-1/2' />
                    <Skeleton className='h-6 w-3/4' />
                    <div className='p-6 bg-white shadow rounded-lg'>
                        <Skeleton className='h-48 w-full' />
                    </div>
                </div>
            </div>
        );
    }

    if (error) {
        return (
            <div className='container mx-auto py-6'>
                <div className='text-center text-red-600'>
                    Error loading statement: {error.message}
                </div>
            </div>
        );
    }

    if (!statement) {
        return (
            <div className='container mx-auto py-6'>
                <div className='text-center'>Statement not found</div>
            </div>
        );
    }

    return (
        <div className='container mx-auto py-6'>
            <div className='mb-6'>
                <div className='flex items-center justify-between'>
                    <div>
                        <h1 className='text-3xl font-bold'>
                            {statement.topic}
                        </h1>
                        {statement.content && (
                            <p className='text-gray-600 mt-2'>
                                {statement.content}
                            </p>
                        )}
                        <p className='text-sm text-gray-500 mt-1'>
                            Created:{' '}
                            {isNaN(new Date(statement.createdAt).getTime())
                                ? 'N/A'
                                : new Date(
                                      statement.createdAt
                                  ).toLocaleDateString()}{' '}
                            | Updated:{' '}
                            {isNaN(new Date(statement.updatedAt).getTime())
                                ? 'N/A'
                                : new Date(
                                      statement.updatedAt
                                  ).toLocaleDateString()}
                        </p>
                    </div>
                    <div className='flex space-x-3'>
                        <Button
                            variant='outline'
                            onClick={() =>
                                router.push(
                                    `/dashboard/statement-of-faith/${id}/edit`
                                )
                            }>
                            Edit Statement
                        </Button>
                        <Button
                            variant='outline'
                            onClick={() =>
                                router.push('/dashboard/statement-of-faith')
                            }>
                            Back to List
                        </Button>
                    </div>
                </div>
            </div>

            <div className='bg-white shadow rounded-lg p-6'>
                <NestedEditor statement={statement} />
            </div>
        </div>
    );
}


==================================================================
FILE: ./app/dashboard/statement-of-faith/page.tsx
==================================================================

'use client';

import { Dashboard } from '@/src/features/statement/components/Dashboard';
import { useStatements } from '@/src/features/statement/queries';

export default function StatementOfFaithPage() {
    const { data: statements } = useStatements();

    return (
        <div className='w-full px-6 py-10'>
            <Dashboard statements={statements || []} />
        </div>
    );
}


==================================================================
FILE: ./app/dashboard/layout.tsx
==================================================================

'use client';

import { useEffect, useState } from 'react';
import { useRouter } from 'next/navigation';
import { authClient } from '@/src/components/auth-provider';
import { AppSidebar } from '@/src/components/app-sidebar';
import {
    SidebarInset,
    SidebarProvider,
    SidebarTrigger,
} from '@/src/components/ui/sidebar';

export default function DashboardLayout({
    children,
}: {
    children: React.ReactNode;
}) {
    const router = useRouter();
    const [isLoading, setIsLoading] = useState(true);

    useEffect(() => {
        const checkAuth = async () => {
            const session = await authClient.getSession();
            if (!session.data || (session.data.user as any).role !== 'ADMIN') {
                router.push('/login');
            } else {
                setIsLoading(false);
            }
        };
        checkAuth();
    }, [router]);

    if (isLoading) {
        return <div>Loading...</div>;
    }

    return (
        <SidebarProvider>
            <AppSidebar />
            <SidebarInset>
                <header className='flex h-16 shrink-0 items-center gap-2 px-4'>
                    <SidebarTrigger />
                    <h1 className='text-3xl font-bold'>Dashboard</h1>
                </header>
                <div className=' px-4 sm:px-6 lg:px-8 py-8'>{children}</div>
            </SidebarInset>
        </SidebarProvider>
    );
}


==================================================================
FILE: ./app/dashboard/users/page.tsx
==================================================================

import { UsersTable } from '@/src/features/users/components/UsersTable';
import { CreateUserForm } from '@/src/features/users/components/CreateUserForm';

export default function UsersPage() {
    return (
        <div className='container mx-auto py-6'>
            <div className='flex justify-between items-center mb-6'>
                <h1 className='text-3xl font-bold'>Users Management</h1>
            </div>
            <div className='space-y-6'>
                <UsersTable />
            </div>
        </div>
    );
}


==================================================================
FILE: ./app/dashboard/page.tsx
==================================================================

'use client';

import { UserList } from '@/src/features/users/components/UserList';
import { CreateUserForm } from '@/src/features/users/components/CreateUserForm';
import { StatementOfFaithTable } from '@/src/features/statement/components/StatementOfFaithTable';

export default function DashboardPage() {
    return <StatementOfFaithTable />;
}


==================================================================
FILE: ./app/register/page.tsx
==================================================================

'use client';

import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { z } from 'zod';
import { useRegisterUser } from '@/src/features/users/queries';
import {
    createUserSchema,
    CreateUserFormValues,
} from '@/src/features/users/model/user.schema';
import { Button } from '@/src/components/ui/button';
import { Input } from '@/src/components/ui/input';
import { useRouter } from 'next/navigation';
import { useEffect, useState } from 'react';

const registerSchema = createUserSchema;

type RegisterFormValues = z.infer<typeof registerSchema>;

export default function RegisterPage() {
    const router = useRouter();
    // const [canRegister, setCanRegister] = useState<boolean | null>(null);
    const {
        register,
        handleSubmit,
        formState: { errors, isSubmitting },
    } = useForm<RegisterFormValues>({
        resolver: zodResolver(registerSchema),
    });

    const registerUserMutation = useRegisterUser();

    // useEffect(() => {
    //     // Check if registration is allowed (no users exist)
    //     const checkRegistration = async () => {
    //         try {
    //             const response = await fetch('/api/check-registration');
    //             const data = await response.json();
    //             setCanRegister(data.allowed);
    //             if (!data.allowed) {
    //                 router.push('/login');
    //             }
    //         } catch (error) {
    //             console.error('Failed to check registration status:', error);
    //             setCanRegister(false);
    //             router.push('/login');
    //         }
    //     };
    //     checkRegistration();
    // }, [router]);

    const onSubmit = (data: RegisterFormValues) => {
        registerUserMutation.mutate(data, {
            onSuccess: () => {
                router.push('/login');
            },
            onError: error => {
                console.error('Registration failed:', error);
                alert('Registration failed. Please try again.');
            },
        });
    };

    //     if (canRegister === null) {
    //         return <div>Loading...</div>;
    //     }
    //
    //     if (!canRegister) {
    //         return (
    //             <div>
    //                 Registration is not allowed. An admin user already exists.
    //             </div>
    //         );
    //     }

    return (
        <div className='min-h-screen flex items-center justify-center bg-gray-50'>
            <div className='max-w-md w-full space-y-8 p-8 bg-white rounded-lg shadow-md'>
                <div>
                    <h2 className='text-center text-3xl font-extrabold text-gray-900'>
                        Create Admin Account
                    </h2>
                    <p className='mt-2 text-center text-sm text-gray-600'>
                        This is a one-time registration for the admin user.
                    </p>
                </div>
                <form
                    className='mt-8 space-y-6'
                    onSubmit={handleSubmit(onSubmit)}>
                    <div>
                        <label
                            htmlFor='name'
                            className='block text-sm font-medium text-gray-700'>
                            Name
                        </label>
                        <Input
                            id='name'
                            type='text'
                            {...register('name')}
                            className='mt-1'
                            placeholder='Enter your name'
                        />
                        {errors.name && (
                            <p className='mt-1 text-sm text-red-600'>
                                {errors.name.message}
                            </p>
                        )}
                    </div>
                    <div>
                        <label
                            htmlFor='email'
                            className='block text-sm font-medium text-gray-700'>
                            Email
                        </label>
                        <Input
                            id='email'
                            type='email'
                            {...register('email')}
                            className='mt-1'
                            placeholder='Enter your email'
                        />
                        {errors.email && (
                            <p className='mt-1 text-sm text-red-600'>
                                {errors.email.message}
                            </p>
                        )}
                    </div>
                    <div>
                        <label
                            htmlFor='password'
                            className='block text-sm font-medium text-gray-700'>
                            Password
                        </label>
                        <Input
                            id='password'
                            type='password'
                            {...register('password')}
                            className='mt-1'
                            placeholder='Enter your password'
                        />
                        {errors.password && (
                            <p className='mt-1 text-sm text-red-600'>
                                {errors.password.message}
                            </p>
                        )}
                    </div>
                    <div>
                        <label
                            htmlFor='confirmPassword'
                            className='block text-sm font-medium text-gray-700'>
                            Confirm Password
                        </label>
                        <Input
                            id='confirmPassword'
                            type='password'
                            {...register('confirmPassword')}
                            className='mt-1'
                            placeholder='Confirm your password'
                        />
                        {errors.confirmPassword && (
                            <p className='mt-1 text-sm text-red-600'>
                                {errors.confirmPassword.message}
                            </p>
                        )}
                    </div>
                    <div>
                        <Button
                            type='submit'
                            disabled={isSubmitting}
                            className='w-full'>
                            {isSubmitting
                                ? 'Creating Account...'
                                : 'Create Admin Account'}
                        </Button>
                    </div>
                    {registerUserMutation.isError && (
                        <p className='text-sm text-red-600 text-center'>
                            {registerUserMutation.error.message}
                        </p>
                    )}
                </form>
            </div>
        </div>
    );
}


==================================================================
FILE: ./app/layout.tsx
==================================================================

import type { Metadata } from 'next';
import { Geist, Geist_Mono } from 'next/font/google';

import '../src/styles/custom-shape-divider.css';
import '../src/styles/globals.css';

import Providers from '@/src/lib/providers';
import { Toaster } from 'sonner';

const geistSans = Geist({
    variable: '--font-geist-sans',
    subsets: ['latin'],
});

const geistMono = Geist_Mono({
    variable: '--font-geist-mono',
    subsets: ['latin'],
});

export const metadata: Metadata = {
    title: 'Create Next App',
    description: 'Generated by create next app',
};

export default function RootLayout({
    children,
}: Readonly<{
    children: React.ReactNode;
}>) {
    return (
        <html lang='en'>
            <body
                className={`${geistSans.variable} ${geistMono.variable} antialiased`}>
                <Providers>{children}</Providers>
                <Toaster />
            </body>
        </html>
    );
}


==================================================================
FILE: ./app/api/contact/route.ts
==================================================================

import { NextRequest, NextResponse } from 'next/server';
import * as brevo from '@getbrevo/brevo';

export async function POST(request: NextRequest) {
    try {
        const { name, email, phone, message } = await request.json();

        if (!process.env.BREVO_API_KEY) {
            throw new Error('BREVO_API_KEY is not configured');
        }

        // Initialize Brevo API
        const apiInstance = new brevo.TransactionalEmailsApi();
        apiInstance.setApiKey(brevo.TransactionalEmailsApiApiKeys.apiKey, process.env.BREVO_API_KEY);

        // Prepare email content
        const textContent = `New Contact Form Submission

Name: ${name}
Email: ${email}
Phone: ${phone || 'Not provided'}

Message:
${message}`;

        const htmlContent = `
        <h2>New Contact Form Submission</h2>
        <p><strong>Name:</strong> ${name}</p>
        <p><strong>Email:</strong> ${email}</p>
        <p><strong>Phone:</strong> ${phone || 'Not provided'}</p>
        <p><strong>Message:</strong></p>
        <p>${message.replace(/\n/g, '<br>')}</p>
        `;

        const sendSmtpEmail = new brevo.SendSmtpEmail();
        sendSmtpEmail.to = [{ email: 'info@seelifebaptistchurch.org.au' }];
        sendSmtpEmail.sender = { email: 'noreply@seelifebaptistchurch.org.au', name: 'See Life Baptist Church Website' };
        sendSmtpEmail.replyTo = { email: email, name: name };
        sendSmtpEmail.subject = `Contact Form: ${name}`;
        sendSmtpEmail.textContent = textContent;
        sendSmtpEmail.htmlContent = htmlContent;

        console.log('Sending email with Brevo...');
        const result = await apiInstance.sendTransacEmail(sendSmtpEmail);
        console.log('Brevo response:', result);

        return NextResponse.json({ success: true }, { status: 200 });
    } catch (error) {
        console.error('Brevo error details:', error);
        return NextResponse.json(
            { error: 'Failed to send message', details: error instanceof Error ? error.message : 'Unknown error' },
            { status: 500 }
        );
    }
}


==================================================================
FILE: ./app/api/auth/[...all]/route.ts
==================================================================

import { auth } from '@/src/lib/auth';
import { toNextJsHandler } from 'better-auth/next-js';

export const { POST, GET } = toNextJsHandler(auth);


==================================================================
FILE: ./app/api/check-registration/route.ts
==================================================================

import { NextResponse } from 'next/server';
import { prisma } from '@/src/lib/prisma';

export async function GET() {
    try {
        const userCount = await prisma.user.count();
        return NextResponse.json({ allowed: userCount === 0 });
    } catch (error) {
        console.error('Failed to check user count:', error);
        return NextResponse.json({ allowed: false }, { status: 500 });
    }
}


==================================================================
FILE: ./app/login/page.tsx
==================================================================

'use client';

import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { z } from 'zod';
import { authClient } from '@/src/components/auth-provider';
import { useRouter } from 'next/navigation';
import { useEffect } from 'react';
import { Button } from '@/src/components/ui/button';
import { Input } from '@/src/components/ui/input';

const loginSchema = z.object({
    email: z.email('Please enter a valid email address'),
    password: z.string().min(1, 'Password is required'),
});

type LoginFormValues = z.infer<typeof loginSchema>;

export default function LoginPage() {
    const router = useRouter();
    const {
        register,
        handleSubmit,
        formState: { errors, isSubmitting },
    } = useForm<LoginFormValues>({
        resolver: zodResolver(loginSchema),
    });

    useEffect(() => {
        const checkSession = async () => {
            const session = await authClient.getSession();
            if (session.data) {
                router.push('/dashboard');
            }
        };
        checkSession();
    }, [router]);

    const onSubmit = async (data: LoginFormValues) => {
        try {
            await authClient.signIn.email({
                email: data.email,
                password: data.password,
            });
            router.push('/dashboard');
        } catch (error) {
            console.error('Login failed:', error);
            alert('Login failed. Please check your credentials.');
        }
    };

    return (
        <div className='min-h-screen flex items-center justify-center bg-gray-50'>
            <div className='max-w-md w-full space-y-8 p-8 bg-white rounded-lg shadow-md'>
                <div>
                    <h2 className='text-center text-3xl font-extrabold text-gray-900'>
                        Sign in to your account
                    </h2>
                </div>
                <form
                    className='mt-8 space-y-6'
                    onSubmit={handleSubmit(onSubmit)}>
                    <div>
                        <label
                            htmlFor='email'
                            className='block text-sm font-medium text-gray-700'>
                            Email address
                        </label>
                        <Input
                            id='email'
                            type='email'
                            {...register('email')}
                            className='mt-1'
                            placeholder='Enter your email'
                        />
                        {errors.email && (
                            <p className='mt-1 text-sm text-red-600'>
                                {errors.email.message}
                            </p>
                        )}
                    </div>
                    <div>
                        <label
                            htmlFor='password'
                            className='block text-sm font-medium text-gray-700'>
                            Password
                        </label>
                        <Input
                            id='password'
                            type='password'
                            {...register('password')}
                            className='mt-1'
                            placeholder='Enter your password'
                        />
                        {errors.password && (
                            <p className='mt-1 text-sm text-red-600'>
                                {errors.password.message}
                            </p>
                        )}
                    </div>
                    <div>
                        <Button
                            type='submit'
                            disabled={isSubmitting}
                            className='w-full'>
                            {isSubmitting ? 'Signing in...' : 'Sign in'}
                        </Button>
                    </div>
                </form>
            </div>
        </div>
    );
}


==================================================================
FILE: ./app/(client)/real-church/page.tsx
==================================================================

import PageHeader from '@/src/components/PageHeader';

export default function RealChurchPage() {
    return (
        <div className='min-h-screen bg-gray-50'>
            <PageHeader title='Real Church' sub='' />

            <div className='py-12'>
                <div className='container mx-auto px-4'>
                    <div className='max-w-4xl mx-auto text-base text-gray-700 leading-relaxed mb-12'>
                        <p className='mb-6'>
                            Malls are trendy. Churches should feel timeless.
                            With the forceful current of constant change
                            sweeping over every part of our lives, people have
                            the need to connect with something enduring and
                            firm. We believe Christ designed the church to
                            fulfill that need by representing an eternal kingdom
                            and ageless truth with no need to imitate the
                            culture. We want you to know that we are a real
                            church that still feels like church. It won't feel
                            like a rock concert, comedy club, or motivational
                            seminar. It's not old-fashioned, as in 50 years ago.
                            It's timeless, as in 2000 years ago. See Life
                            Baptist Church. "Real" Church! Please accept our
                            invitation to join us this Sunday.
                        </p>
                    </div>

                    <div className='grid md:grid-cols-2 gap-8 max-w-6xl mx-auto'>
                        <div className='bg-white p-6 rounded-lg shadow-sm'>
                            <h2 className='text-2xl font-bold text-gray-900 mb-3'>
                                Real Preaching
                            </h2>
                            <p className='text-gray-700 leading-relaxed'>
                                Real, dynamic, passionate preaching straight
                                from the Bible still brings more lasting change
                                than comedy routines, drama, or motivational
                                talks. Come discover the benefit of real Bible
                                preaching.
                            </p>
                        </div>

                        <div className='bg-white p-6 rounded-lg shadow-sm'>
                            <h2 className='text-2xl font-bold text-gray-900 mb-3'>
                                Real Families
                            </h2>
                            <p className='text-gray-700 leading-relaxed'>
                                Our culture's experiments with the family have
                                left Australian homes in a mess. We still teach
                                the biblical roles as the best answer and as our
                                only hope for real, stable, fulfilled homes.
                            </p>
                        </div>

                        <div className='bg-white p-6 rounded-lg shadow-sm'>
                            <h2 className='text-2xl font-bold text-gray-900 mb-3'>
                                Real Music
                            </h2>
                            <p className='text-gray-700 leading-relaxed'>
                                Most church music amounts to dumbing down the
                                lyrics and cranking up the volume to build
                                interest. The hymns we sing still generate a
                                real attitude towards God that is anything but
                                lifeless and boring.
                            </p>
                        </div>

                        <div className='bg-white p-6 rounded-lg shadow-sm'>
                            <h2 className='text-2xl font-bold text-gray-900 mb-3'>
                                Real Reverence
                            </h2>
                            <p className='text-gray-700 leading-relaxed'>
                                Casual is all the rage in Australian
                                institutions, but God deserves better. While you
                                won't find a judgmental spirit here, you will
                                find a real church family that still believes
                                reverence is right for the presence of God.
                            </p>
                        </div>

                        <div className='bg-white p-6 rounded-lg shadow-sm'>
                            <h2 className='text-2xl font-bold text-gray-900 mb-3'>
                                Real Exciting
                            </h2>
                            <p className='text-gray-700 leading-relaxed'>
                                Experience the genuine excitement that comes
                                from authentic worship, biblical teaching, and
                                fellowship with believers who are passionate
                                about their faith.
                            </p>
                        </div>

                        <div className='bg-white p-6 rounded-lg shadow-sm'>
                            <h2 className='text-2xl font-bold text-gray-900 mb-3'>
                                Real Men
                            </h2>
                            <p className='text-gray-700 leading-relaxed'>
                                The rumor that masculine men hate church isn't
                                entirely true. Come discover an environment
                                where plenty of real men still believe God
                                expects them to step up and provide strong,
                                loving leadership in the church and in their
                                families.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    );
}


==================================================================
FILE: ./app/(client)/contact/page.tsx
==================================================================

'use client';

import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import {
    contactFormSchema,
    ContactFormValues,
} from '@/src/features/contact/model/contact.schema';
import { useSendContactMessage } from '@/src/features/contact/queries';

import { Button } from '@/src/components/ui/button';
import { Input } from '@/src/components/ui/input';
import { Textarea } from '@/src/components/ui/textarea';
import PageHeader from '@/src/components/PageHeader';

export default function ContactPage() {
    const {
        register,
        handleSubmit,
        reset,
        formState: { errors, isSubmitting },
    } = useForm<ContactFormValues>({
        resolver: zodResolver(contactFormSchema),
    });

    const sendMessageMutation = useSendContactMessage();

    const onSubmit = (data: ContactFormValues) => {
        ``;
        sendMessageMutation.mutate(data, {
            onSuccess: () => {
                reset();
            },
            onError: error => {
                console.error('Submission failed:', error);
            },
        });
    };

    const isPending = isSubmitting || sendMessageMutation.isPending;

    return (
        <div className='min-h-screen bg-gray-50'>
            <PageHeader title='Contact Us' sub='' />

            <div className='py-16'>
                <div className='container mx-auto px-4 max-w-2xl'>
                    {sendMessageMutation.isSuccess && (
                        <div className='mb-6 p-4 bg-green-100 border border-green-400 text-green-700 rounded'>
                            Thank you for your message! We'll get back to you
                            soon.
                        </div>
                    )}

                    {sendMessageMutation.isError && (
                        <div className='mb-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded'>
                            {sendMessageMutation.error.message ||
                                'Sorry, there was an error sending your message. Please try again.'}
                        </div>
                    )}

                    <form
                        onSubmit={handleSubmit(onSubmit)}
                        className='space-y-6'>
                        <div>
                            <label
                                htmlFor='name'
                                className='block text-sm font-medium text-gray-700 mb-2'>
                                Name
                            </label>
                            <Input
                                id='name'
                                {...register('name')}
                                className='w-full'
                                placeholder='Your full name'
                                aria-invalid={!!errors.name}
                            />
                            {errors.name && (
                                <p className='text-sm text-red-600 mt-1'>
                                    {errors.name.message}
                                </p>
                            )}
                        </div>

                        <div>
                            <label
                                htmlFor='email'
                                className='block text-sm font-medium text-gray-700 mb-2'>
                                Email
                            </label>
                            <Input
                                id='email'
                                type='email'
                                {...register('email')}
                                className='w-full'
                                placeholder='your.email@example.com'
                                aria-invalid={!!errors.email}
                            />
                            {errors.email && (
                                <p className='text-sm text-red-600 mt-1'>
                                    {errors.email.message}
                                </p>
                            )}
                        </div>

                        <div>
                            <label
                                htmlFor='phone'
                                className='block text-sm font-medium text-gray-700 mb-2'>
                                Phone number (Optional)
                            </label>
                            <Input
                                id='phone'
                                type='tel'
                                {...register('phone')}
                                className='w-full'
                                placeholder='Your phone number'
                            />
                        </div>

                        <div>
                            <label
                                htmlFor='message'
                                className='block text-sm font-medium text-gray-700 mb-2'>
                                Message
                            </label>
                            <Textarea
                                id='message'
                                {...register('message')}
                                rows={6}
                                className='w-full'
                                placeholder='Your message...'
                                aria-invalid={!!errors.message}
                            />
                            {errors.message && (
                                <p className='text-sm text-red-600 mt-1'>
                                    {errors.message.message}
                                </p>
                            )}
                        </div>

                        <div className='flex justify-center'>
                            <Button
                                type='submit'
                                disabled={isPending}
                                className='px-8 py-2 bg-cerulean-700 hover:bg-cerulean-600 text-white rounded-md font-medium'>
                                {isPending ? 'Sending...' : 'Send Message'}
                            </Button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    );
}


==================================================================
FILE: ./app/(client)/our-position/page.tsx
==================================================================

import { Metadata } from 'next';
import PageHeader from '@/src/components/PageHeader';

export const metadata: Metadata = {
    title: 'Our Position | See Life Baptist Church',
    description:
        "Learn about See Life Baptist Church's doctrinal positions as an independent, fundamental, Bible-believing church with traditional worship and Biblical ordinances.",
};

export default function OurPositionPage() {
    return (
        <div className='min-h-screen bg-gray-50'>
            <PageHeader title='Our Position' sub='' />
            {/* Main Content */}
            <div className='container mx-auto px-4 py-12'>
                <div className='max-w-6xl mx-auto'>
                    {/* Position Cards Grid */}
                    <div className='grid md:grid-cols-2 gap-8 mb-12'>
                        {/* Independent */}
                        <div className=' p-8'>
                            <h3 className='text-2xl font-bold text-cerulean-700 mb-4'>
                                Independent
                            </h3>
                            <p className='text-gray-700 leading-relaxed'>
                                See Life, is an independent Baptist Church
                                meaning we are not a member of any union or
                                fellowship. This does not mean that we are
                                isolated or consider ourselves better than other
                                Baptist Churches. We are merely one "local
                                branch" of the body of Christ and we share
                                fellowship with other churches of like faith and
                                practice.
                            </p>
                        </div>

                        {/* Fundamental */}
                        <div className=' p-8'>
                            <h3 className='text-2xl font-bold text-cerulean-700 mb-4'>
                                Fundamental
                            </h3>
                            <p className='text-gray-700 leading-relaxed'>
                                Believe the entire Bible literally, which will
                                cause you to love people and live like Jesus
                                Christ lived.
                            </p>
                        </div>

                        {/* Bible-Believing */}
                        <div className=' p-8'>
                            <h3 className='text-2xl font-bold text-cerulean-700 mb-4'>
                                Bible-Believing
                            </h3>
                            <p className='text-gray-700 leading-relaxed'>
                                The King James Bible is the inspired,
                                infallible, inerrant preserved Word of God for
                                the English speaking people and the bible we use
                                at See Life Baptist Church.
                            </p>
                        </div>

                        {/* Non-Charismatic */}
                        <div className=' p-8'>
                            <h3 className='text-2xl font-bold text-cerulean-700 mb-4'>
                                Non-Charismatic
                            </h3>
                            <p className='text-gray-700 leading-relaxed'>
                                We do not believe in nor practice the modern
                                signs and wonders teachings.
                            </p>
                        </div>

                        {/* Music */}
                        <div className=' p-8'>
                            <h3 className='text-2xl font-bold text-cerulean-700 mb-4'>
                                Music
                            </h3>
                            <p className='text-gray-700 leading-relaxed'>
                                Our Worship Music is the act of loving and
                                praising God! Through the heart warming,
                                conservative music and the clear, Bible teaching
                                and preaching in our services, your heart will
                                be inspired to love and to respond to God. Each
                                week, people are strengthened, encouraged, and
                                drawn closer to Him through these special times
                                together. Each service is carefully planned and
                                prayed over so that God may work in your life.
                            </p>
                        </div>

                        {/* Two Ordinances */}
                        <div className=' p-8'>
                            <h3 className='text-2xl font-bold text-cerulean-700 mb-4'>
                                Two Ordinances
                            </h3>
                            <p className='text-gray-700 leading-relaxed mb-4'>
                                We practice two ordinances at See Life Baptist
                                Church:
                            </p>
                            <ul className='text-gray-700 space-y-2 mb-4'>
                                <li>â€¢ Believers Baptism</li>
                                <li>â€¢ Communion (Lords Supper)</li>
                            </ul>
                            <p className='text-gray-700 leading-relaxed'>
                                These are ordinances â€“ not sacraments. They have
                                no part in salvation and only serve as pictures
                                of what Christ did for us.
                                <br />
                                <em className='text-sm'>
                                    1 Corinthians 11:2, 23-28
                                </em>
                            </p>
                        </div>
                    </div>

                    {/* Security of the Believer - Full Width */}
                    <div className=' p-8 mb-12'>
                        <h3 className='text-2xl font-bold text-cerulean-700 mb-4'>
                            Security of the Believer
                        </h3>
                        <p className='text-gray-700 leading-relaxed'>
                            All who receive Christ as Saviour, by faith are born
                            again and are eternally secure in Christ. Kept by
                            the power of God{' '}
                            <em className='text-sm'>1 Peter 1:5</em>
                        </p>
                    </div>

                    {/* Historical Baptist Doctrines */}
                    <div className=' p-8 mb-12'>
                        <div className='text-center mb-8'>
                            <h3 className='text-2xl font-bold text-cerulean-700 mb-2'>
                                We Stand on the Historical Baptist Doctrines
                                Since the Early Church
                            </h3>
                        </div>

                        <div className='grid gap-6'>
                            {/* Bible is the Final Authority */}
                            <div className='flex items-start space-x-4 p-4 '>
                                <div className='bg-cerulean-600 text-white rounded-lg w-12 h-12 flex items-center justify-center font-bold text-lg flex-shrink-0 mt-1'>
                                    B
                                </div>
                                <div>
                                    <h4 className='font-bold text-gray-900 mb-1'>
                                        Bible is the Final Authority
                                    </h4>
                                    <p className='text-gray-600 text-sm'>
                                        <em>2 Timothy 3:15-17</em>
                                    </p>
                                </div>
                            </div>

                            {/* Autonomy of the Local Church */}
                            <div className='flex items-start space-x-4 p-4 '>
                                <div className='bg-cerulean-600 text-white rounded-lg w-12 h-12 flex items-center justify-center font-bold text-lg flex-shrink-0 mt-1'>
                                    A
                                </div>
                                <div>
                                    <h4 className='font-bold text-gray-900 mb-1'>
                                        Autonomy of the Local Church
                                    </h4>
                                    <p className='text-gray-600 text-sm'>
                                        <em>2 Corinthians 8:1-5, 19, 23</em>
                                    </p>
                                </div>
                            </div>

                            {/* Priesthood of the Believer */}
                            <div className='flex items-start space-x-4 p-4 '>
                                <div className='bg-cerulean-600 text-white rounded-lg w-12 h-12 flex items-center justify-center font-bold text-lg flex-shrink-0 mt-1'>
                                    P
                                </div>
                                <div>
                                    <h4 className='font-bold text-gray-900 mb-1'>
                                        Priesthood of the Believer
                                    </h4>
                                    <p className='text-gray-600 text-sm'>
                                        <em>1 Peter 2:5, 9</em>
                                    </p>
                                </div>
                            </div>

                            {/* Two Offices */}
                            <div className='flex items-start space-x-4 p-4 '>
                                <div className='bg-cerulean-600 text-white rounded-lg w-12 h-12 flex items-center justify-center font-bold text-lg flex-shrink-0 mt-1'>
                                    T
                                </div>
                                <div>
                                    <h4 className='font-bold text-gray-900 mb-1'>
                                        Two Offices
                                    </h4>
                                    <p className='text-gray-600 text-sm'>
                                        Pastor and Deacon â€“{' '}
                                        <em>1 Timothy 3:1-13</em>
                                    </p>
                                </div>
                            </div>

                            {/* Individual Soul Liberty */}
                            <div className='flex items-start space-x-4 p-4 '>
                                <div className='bg-cerulean-600 text-white rounded-lg w-12 h-12 flex items-center justify-center font-bold text-lg flex-shrink-0 mt-1'>
                                    I
                                </div>
                                <div>
                                    <h4 className='font-bold text-gray-900 mb-1'>
                                        Individual Soul Liberty
                                    </h4>
                                    <p className='text-gray-600 text-sm'>
                                        <em>Romans 14:5, 12-14</em>
                                    </p>
                                </div>
                            </div>

                            {/* Separation of Church and State */}
                            <div className='flex items-start space-x-4 p-4 '>
                                <div className='bg-cerulean-600 text-white rounded-lg w-12 h-12 flex items-center justify-center font-bold text-lg flex-shrink-0 mt-1'>
                                    S
                                </div>
                                <div>
                                    <h4 className='font-bold text-gray-900 mb-1'>
                                        Separation of Church and State
                                    </h4>
                                    <p className='text-gray-600 text-sm'>
                                        <em>Romans 13:1, 2</em>
                                    </p>
                                </div>
                            </div>

                            {/* Two Ordinances */}
                            <div className='flex items-start space-x-4 p-4 '>
                                <div className='bg-cerulean-600 text-white rounded-lg w-12 h-12 flex items-center justify-center font-bold text-lg flex-shrink-0 mt-1'>
                                    T
                                </div>
                                <div>
                                    <h4 className='font-bold text-gray-900 mb-1'>
                                        Two Ordinances
                                    </h4>
                                    <p className='text-gray-600 text-sm'>
                                        <em>
                                            1 Corinthians 11:2, 20-34; Matthew
                                            28:19-20
                                        </em>
                                    </p>
                                </div>
                            </div>

                            {/* Security of the Believer */}
                            <div className='flex items-start space-x-4 p-4 '>
                                <div className='bg-cerulean-600 text-white rounded-lg w-12 h-12 flex items-center justify-center font-bold text-lg flex-shrink-0 mt-1'>
                                    S
                                </div>
                                <div>
                                    <h4 className='font-bold text-gray-900 mb-1'>
                                        Security of the Believer
                                    </h4>
                                    <p className='text-gray-600 text-sm'>
                                        <em>2 Timothy 1:12</em>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    );
}


==================================================================
FILE: ./app/(client)/the-pastor/page.tsx
==================================================================

import PageHeader from '@/src/components/PageHeader';
import Image from 'next/image';
import { Metadata } from 'next';

export const metadata: Metadata = {
    title: 'The Pastor | See Life Baptist Church',
    description:
        'Meet Pastor Darren Christie of See Life Baptist Church. Learn about his testimony, ministry experience, and heart for serving the Yeppoon community.',
};

export default function ThePastorPage() {
    return (
        <div className='min-h-screen bg-gray-50'>
            <PageHeader
                title='The Pastor'
                sub='Meet Pastor Darren Christie and learn about his heart for ministry and the Yeppoon community.'
            />

            <div className='container mx-auto px-4 py-12'>
                <div className='max-w-5xl mx-auto'>
                    <div className=' p-8'>
                        {/* Pastor Image - Centered at top */}
                        <div className='flex justify-center mb-8'>
                            <div className='w-40 h-40 rounded-full overflow-hidden shadow-lg'>
                                <Image
                                    src='/avatar.png'
                                    alt='Pastor Darren Christie'
                                    width={160}
                                    height={160}
                                    className='w-full h-full object-cover'
                                    priority
                                />
                            </div>
                        </div>

                        {/* Pastor Content */}
                        <div className='text-center'>
                            <h2 className='text-3xl font-bold text-cerulean-600 mb-6'>
                                Pastor Darren Christie
                            </h2>

                            <div className='prose prose-lg max-w-none text-gray-700'>
                                <p className='mb-6'>
                                    {`Hi, I'm Darren Christie, Pastor of See Life
                                        Baptist Church. My wife Tracy and I have been
                                        here at See Life since January 2021. God has led
                                        us here and given us a heart for the community
                                        of Yeppoon.`}
                                </p>

                                <p className='mb-6'>
                                    {`I have an evangelistic heart and love sharing
                                        the gospel. I'm a simple man, with a simple, but
                                        powerful mission. God has given us gifts and
                                        talents and we need to use them and nurture
                                        others to use theirs for God's glory. A city on
                                        a hill is not hid, our mission is to reflect
                                        Jesus to the community and equip others to live
                                        out the abundant life that God has called them
                                        to live.`}
                                </p>

                                <h3 className='text-2xl font-semibold text-cerulean-600 mb-4'>
                                    My Story
                                </h3>
                                <p className='mb-6'>
                                    {`I was born in Melbourne, and it was there that I
                                        was invited to an AWANA kids club when I was
                                        around 8 years of age and was saved. My life was
                                        a bit dysfunctional, as shortly thereafter my
                                        father passed away and my mother really
                                        struggled; God has taught me so much and given
                                        me so much compassion for others as I know what
                                        it's like to be in the wilderness.`}
                                </p>

                                <p className='mb-6'>
                                    {`I recommitted my life to the Lord and to
                                        ministry in 2004, when I sold my (then) business
                                        and commenced my journey to Know the God of the
                                        Bible intimately and study His Word. This
                                        journey led me to Australian Baptist College
                                        where I completed a Licentiate in Theology.`}
                                </p>

                                <h3 className='text-2xl font-semibold text-cerulean-600 mb-4'>
                                    Ministry Experience
                                </h3>
                                <p className='mb-6'>
                                    {`I would call us a ministry family. If the church
                                        doors were open, we were there. Some of the
                                        ministries I have been involved in is outreach,
                                        Evangelism, Inerrant Preaching, Youth Leader,
                                        Young Adult's Ministry Leader, Sunday School
                                        Teacher, Church Deacon, Kids Club Director,
                                        Prison Chaplaincy, Religious Instruction in the
                                        school system and much more.`}
                                </p>

                                <h3 className='text-2xl font-semibold text-cerulean-600 mb-4'>
                                    Family
                                </h3>
                                <p className='mb-6'>
                                    {`I married Tracy, my childhood sweetheart and
                                        have been happily married for over 30 years. God
                                        has blessed us with 3 wonderful children, and it
                                        has been a privilege and a challenge to raise
                                        them, they are now all independent adults with
                                        families of their own.`}
                                </p>

                                <p className='mb-6'>
                                    {`I'd love to get to know you and your story too
                                        and look forward to spending time with you.`}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    );
}


==================================================================
FILE: ./app/(client)/support/page.tsx
==================================================================

'use client';
import { useState } from 'react';
import Container from '@/src/components/container';
import { Button } from '@/src/components/ui/button';
import PageHeader from '@/src/components/PageHeader';
import { Building2, Check, Church, Copy, Info, User } from 'lucide-react';

export default function SupportPage() {
    const [copiedField, setCopiedField] = useState<string | null>(null);

    const copyToClipboard = (text: string, field: string) => {
        navigator.clipboard.writeText(text);
        setCopiedField(field);
        setTimeout(() => setCopiedField(null), 2000);
    };

    return (
        <div className='min-h-screen bg-background'>
            {/* Hero Section */}

            <PageHeader
                title='Support Our Ministry'
                sub={`Your generous support helps us continue our mission to
                        share God's love and serve our community. Thank you for
                        your partnership in ministry.`}
            />
            {/* Support Options */}
            <div className='py-16 px-4'>
                <div className='max-w-2xl mx-auto space-y-6'>
                    {/* Ministry Offering Card */}
                    <div className='bg-card border border-border rounded-lg p-8 shadow-sm'>
                        <div className='flex items-start gap-4 mb-6'>
                            <div className='p-3 bg-primary/10 rounded-lg'>
                                <Church className='w-6 h-6 text-primary' />
                            </div>
                            <div className='flex-1'>
                                <h2 className='text-2xl font-semibold text-foreground mb-2'>
                                    Ministry Offering
                                </h2>
                                <p className='text-muted-foreground'>
                                    Supporting the ongoing work and mission of
                                    See Life Baptist Church
                                </p>
                            </div>
                        </div>

                        <div className='space-y-3'>
                            <div className='flex items-center gap-2 text-sm text-muted-foreground'>
                                <Building2 className='w-4 h-4' />
                                <span>National Australia Bank</span>
                            </div>

                            <div className='bg-muted rounded-lg p-4 space-y-3'>
                                <div className='flex items-center justify-between'>
                                    <div>
                                        <div className='text-xs text-muted-foreground mb-1'>
                                            BSB
                                        </div>
                                        <div className='font-mono text-lg text-foreground'>
                                            084 992
                                        </div>
                                    </div>
                                    <Button
                                        variant='ghost'
                                        size='sm'
                                        onClick={() =>
                                            copyToClipboard(
                                                '084992',
                                                'ministry-bsb'
                                            )
                                        }>
                                        {copiedField === 'ministry-bsb' ? (
                                            <Check className='w-4 h-4 text-green-600' />
                                        ) : (
                                            <Copy className='w-4 h-4' />
                                        )}
                                    </Button>
                                </div>

                                <div className='flex items-center justify-between'>
                                    <div>
                                        <div className='text-xs text-muted-foreground mb-1'>
                                            Account Number
                                        </div>
                                        <div className='font-mono text-lg text-foreground'>
                                            936 172 686
                                        </div>
                                    </div>
                                    <Button
                                        variant='ghost'
                                        size='sm'
                                        onClick={() =>
                                            copyToClipboard(
                                                '936172686',
                                                'ministry-account'
                                            )
                                        }>
                                        {copiedField === 'ministry-account' ? (
                                            <Check className='w-4 h-4 text-green-600' />
                                        ) : (
                                            <Copy className='w-4 h-4' />
                                        )}
                                    </Button>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Pastoral Offering Card */}
                    <div className='bg-card border border-border rounded-lg p-8 shadow-sm'>
                        <div className='flex items-start gap-4 mb-6'>
                            <div className='p-3 bg-primary/10 rounded-lg'>
                                <User className='w-6 h-6 text-primary' />
                            </div>
                            <div className='flex-1'>
                                <h2 className='text-2xl font-semibold text-foreground mb-2'>
                                    Pastoral Offering
                                </h2>
                                <p className='text-muted-foreground'>
                                    Directly supporting our pastoral team and
                                    their ministry work
                                </p>
                            </div>
                        </div>

                        <div className='space-y-3'>
                            <div className='flex items-center gap-2 text-sm text-muted-foreground'>
                                <Building2 className='w-4 h-4' />
                                <span>National Australia Bank</span>
                            </div>

                            <div className='bg-muted rounded-lg p-4 space-y-3'>
                                <div className='flex items-center justify-between'>
                                    <div>
                                        <div className='text-xs text-muted-foreground mb-1'>
                                            BSB
                                        </div>
                                        <div className='font-mono text-lg text-foreground'>
                                            084-034
                                        </div>
                                    </div>
                                    <Button
                                        variant='ghost'
                                        size='sm'
                                        onClick={() =>
                                            copyToClipboard(
                                                '084034',
                                                'pastoral-bsb'
                                            )
                                        }>
                                        {copiedField === 'pastoral-bsb' ? (
                                            <Check className='w-4 h-4 text-green-600' />
                                        ) : (
                                            <Copy className='w-4 h-4' />
                                        )}
                                    </Button>
                                </div>

                                <div className='flex items-center justify-between'>
                                    <div>
                                        <div className='text-xs text-muted-foreground mb-1'>
                                            Account Number
                                        </div>
                                        <div className='font-mono text-lg text-foreground'>
                                            90 868 0771
                                        </div>
                                    </div>
                                    <Button
                                        variant='ghost'
                                        size='sm'
                                        onClick={() =>
                                            copyToClipboard(
                                                '908680771',
                                                'pastoral-account'
                                            )
                                        }>
                                        {copiedField === 'pastoral-account' ? (
                                            <Check className='w-4 h-4 text-green-600' />
                                        ) : (
                                            <Copy className='w-4 h-4' />
                                        )}
                                    </Button>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Additional Information */}
                    <div className='bg-accent/50 border border-border rounded-lg p-6'>
                        <div className='flex gap-3'>
                            <Info className='w-5 h-5 text-accent-foreground flex-shrink-0 mt-0.5' />
                            <div>
                                <h3 className='text-lg font-semibold text-accent-foreground mb-2'>
                                    Thank You for Your Support
                                </h3>
                                <p className='text-accent-foreground/80 text-sm'>
                                    All donations are tax-deductible and
                                    receipts will be provided. For any questions
                                    about giving or to discuss other ways to
                                    support our ministry, please don't hesitate
                                    to contact us.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    );
}


==================================================================
FILE: ./app/(client)/layout.tsx
==================================================================

import Footer from '@/src/components/layouts/footer';
import Header from '@/src/components/layouts/header';
import PageDivTop from '@/src/components/pageDivTop';
import Visit from '@/src/components/home/Visit';
export default function layout({ children }: { children: React.ReactNode }) {
    return (
        <>
            <Header />
            <PageDivTop />
            <main className='min-h-[70vh]'>{children}</main>
            <Visit />
            <Footer />
        </>
    );
}


==================================================================
FILE: ./app/(client)/what-we-believe/page.tsx
==================================================================

'use client';
import React, { useState, useEffect } from 'react';
import { Sidebar } from '@/src/features/statement/components/Sidebar';
import { Content } from '@/src/features/statement/components/Content';
import { useStatements } from '@/src/features/statement/queries';
import { Statement } from '@/src/features/statement/types';
import PageHeader from '@/src/components/PageHeader';

export default function StatementOfFaithPage() {
    const { data: statements, isLoading, error } = useStatements();
    const [selectedTopic, setSelectedTopic] = useState<Statement | null>(null);
    const [isSidebarOpen, setIsSidebarOpen] = useState(false);

    useEffect(() => {
        // This effect correctly sets the initial topic to the first top-level statement.
        if (!selectedTopic && statements && statements.length > 0) {
            setSelectedTopic(statements[0]);
        }
    }, [statements, selectedTopic]);

    const handleSelectTopic = (topicId: string) => {
        // CHANGED: Simplified the logic. No need to flatten the array anymore.
        // We can find the selected topic directly from the top-level statements array.
        const topic = (statements || []).find(s => s.id === topicId);
        setSelectedTopic(topic || null);
        setIsSidebarOpen(false); // Close dropdown on mobile after selection
    };

    if (isLoading)
        return (
            <div className='flex items-center justify-center min-h-screen'>
                <div>Loading...</div>
            </div>
        );
    if (error)
        return (
            <div className='flex items-center justify-center min-h-screen'>
                <div>Error: {error.message}</div>
            </div>
        );

    return (
        <div className='bg-mystic-50 py-8 min-h-screen'>
            <PageHeader
                title='Statement of Faith'
                sub={`Sound doctrine is essential for a life which pleases the Lord Jesus Christ. We believe the Statement of Faith or Doctrinal Statement which follows is an accurate statement of essential Christian doctrines. This Statement of Faith neither exhausts the doctrines of the Bible nor supersedes it in authority for faith and practice, for â€œAll scripture is given by inspiration of God, and is profitable for doctrineâ€¦â€ 2 Timothy 3:16. The Bible remains our final authority.`}
            />
            <div className='container mx-auto px-4 mt-16'>
                <div className='flex flex-col md:flex-row md:space-x-8'>
                    {/* Mobile Dropdown */}
                    <div className='md:hidden mb-6'>
                        <button
                            onClick={() => setIsSidebarOpen(!isSidebarOpen)}
                            className='w-full flex items-center justify-between p-3 bg-white border border-mystic-300 rounded-lg text-left'>
                            <span className='font-medium text-dark-700'>
                                {selectedTopic?.topic || 'Select a topic'}
                            </span>
                            <svg
                                className={`w-5 h-5 text-dark-500 transition-transform duration-200 ${
                                    isSidebarOpen ? 'rotate-180' : ''
                                }`}
                                fill='none'
                                stroke='currentColor'
                                viewBox='0 0 24 24'>
                                <path
                                    strokeLinecap='round'
                                    strokeLinejoin='round'
                                    strokeWidth={2}
                                    d='M19 9l-7 7-7-7'
                                />
                            </svg>
                        </button>
                        {isSidebarOpen && (
                            <div className='mt-2 bg-white border border-mystic-300 rounded-lg shadow-lg max-h-60 overflow-y-auto'>
                                {statements?.map(statement => (
                                    <button
                                        key={statement.id}
                                        onClick={() =>
                                            handleSelectTopic(statement.id)
                                        }
                                        className={`w-full text-left px-4 py-3 hover:bg-mystic-50 transition-colors ${
                                            selectedTopic?.id === statement.id
                                                ? 'bg-cerulean-50 text-cerulean-800 font-medium'
                                                : 'text-dark-700'
                                        }`}>
                                        {statement.topic}
                                    </button>
                                ))}
                            </div>
                        )}
                    </div>

                    {/* Desktop Sidebar */}
                    <aside className='hidden md:block md:w-2/5 lg:w-1/5 mb-6 md:mb-0'>
                        <Sidebar
                            statements={statements || []}
                            selectedTopicId={selectedTopic?.id || ''}
                            onSelectTopic={handleSelectTopic}
                            onClose={() => {}}
                        />
                    </aside>

                    <main className='md:w-3/5 lg:w-4/5'>
                        {selectedTopic ? (
                            <Content statement={selectedTopic} />
                        ) : (
                            <div className='flex items-center justify-center py-16'>
                                <p className='text-dark-500 text-lg'>
                                    Please select a topic to view.
                                </p>
                            </div>
                        )}
                    </main>
                </div>
            </div>
        </div>
    );
}


==================================================================
FILE: ./app/(client)/page.tsx
==================================================================

import HomePage from '@/src/components/home';

export default function Home() {
    return <HomePage />;
}


==================================================================
FILE: ./app/(client)/our-purpose/page.tsx
==================================================================

import PageHeader from '@/src/components/PageHeader';
import { Metadata } from 'next';

export const metadata: Metadata = {
    title: 'Our Purpose | See Life Baptist Church',
    description:
        "Learn about See Life Baptist Church's purpose in fulfilling the Great Commission through worship, evangelism, discipleship, and community outreach.",
};

export default function OurPurposePage() {
    return (
        <div className='min-h-screen bg-gray-50'>
            <PageHeader
                title='Our Purpose'
                sub="See Life Baptist Church is going forth preaching a great message (the Gospel), fulfilling the great commission, and living the great commandment for God's glory."
            />

            <div className='container mx-auto px-4 py-12'>
                <div className='max-w-4xl mx-auto'>
                    <div className='text-center mb-12'>
                        <h2 className='text-3xl font-bold text-gray-900 mb-4'>
                            The Great Commission
                        </h2>
                    </div>

                    <div className='rounded-lg p-8 mb-8'>
                        <div className='prose prose-lg max-w-none text-gray-700'>
                            <p className='mb-8'>
                                See Life Baptist Church is going forth preaching
                                a great message (the Gospel), fulfilling the
                                great commission, and living the great
                                commandment for God's glory.
                            </p>

                            <div className='mb-8'>
                                <blockquote className='text-base italic text-gray-600 mb-4 border-l-4 border-cerulean pl-4'>
                                    "Go ye therefore, and teach all nations,
                                    baptizing them in the name of the Father,
                                    and of the Son, and of the Holy Ghost:
                                    Teaching them to observe all things
                                    whatsoever I have commanded you: and, lo, I
                                    am with you alway, even unto the end of the
                                    world. Amen."
                                    <cite className='text-sm not-italic text-gray-500 block mt-2'>
                                        Matthew 28:19-20
                                    </cite>
                                </blockquote>

                                <blockquote className='text-base italic text-gray-600 border-l-4 border-cerulean pl-4'>
                                    "Master, which is the great commandment in
                                    the law? Jesus said unto him, Thou shalt
                                    love the Lord thy God with all thy heart,
                                    and with all thy soul, and with all thy
                                    mind. This is the first and great
                                    commandment. And the second is like unto it,
                                    Thou shalt love thy neighbour as thyself. On
                                    these two commandments hang all the law and
                                    the prophets."
                                    <cite className='text-sm not-italic text-gray-500 block mt-2'>
                                        Matthew 22:36-40
                                    </cite>
                                </blockquote>
                            </div>

                            <div className='space-y-6'>
                                <div className='border-l-4 border-cerulean-600 pl-6'>
                                    <h4 className=' text-gray-900 mb-2'>
                                        <strong className='font-bold'>
                                            Exalt
                                        </strong>{' '}
                                        the Lord Jesus Christ through
                                        worshipping Jesus Christ as God
                                    </h4>
                                    <p className='text-gray-600 text-sm'>
                                        <em>Colossians 1:18-19</em>
                                    </p>
                                </div>

                                <div className='border-l-4 border-cerulean-600 pl-6'>
                                    <h4 className=' text-gray-900 mb-2'>
                                        <strong className='font-bold'>
                                            Energize
                                        </strong>{' '}
                                        people to love God with all their hearts
                                        through preaching God's Word and
                                        Christ-honouring music
                                    </h4>
                                    <p className='text-gray-600 text-sm'>
                                        <em>Matthew 22:38</em>
                                    </p>
                                </div>

                                <div className='border-l-4 border-cerulean-600 pl-6'>
                                    <h4 className=' text-gray-900 mb-2'>
                                        <strong className='font-bold'>
                                            Embrace
                                        </strong>{' '}
                                        them into our church family through
                                        membership and fellowship
                                    </h4>
                                    <p className='text-gray-600 text-sm'>
                                        <em>Acts 2:41</em>
                                    </p>
                                </div>

                                <div className='border-l-4 border-cerulean-600 pl-6'>
                                    <h4 className=' text-gray-900 mb-2'>
                                        <strong className='font-bold'>
                                            Educate
                                        </strong>{' '}
                                        them in Bible doctrines and Christian
                                        living through Sunday schools and
                                        discipleship
                                    </h4>
                                    <p className='text-gray-600 text-sm'>
                                        <em>2 Timothy 2:15</em>
                                    </p>
                                </div>

                                <div className='border-l-4 border-cerulean-600 pl-6'>
                                    <h4 className=' text-gray-900 mb-2'>
                                        <strong className='font-bold'>
                                            Encourage
                                        </strong>{' '}
                                        them to be involved in ministry through
                                        various ministry opportunities
                                    </h4>
                                    <p className='text-gray-600 text-sm'>
                                        <em>Psalm 100:2</em>
                                    </p>
                                </div>

                                <div className='border-l-4 border-cerulean-600 pl-6'>
                                    <h4 className=' text-gray-900 mb-2'>
                                        <strong className='font-bold'>
                                            Evangelize
                                        </strong>{' '}
                                        Yeppoon and surrounding areas with the
                                        Gospel of Jesus Christ through
                                        evangelistic opportunities
                                    </h4>
                                    <p className='text-gray-600 text-sm'>
                                        <em>Psalms 126:5-6</em>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    );
}


==================================================================
FILE: ./next-env.d.ts
==================================================================

/// <reference types="next" />
/// <reference types="next/image-types/global" />
/// <reference path="./.next/types/routes.d.ts" />

// NOTE: This file should not be edited
// see https://nextjs.org/docs/app/api-reference/config/typescript for more information.


==================================================================
FILE: ./README.md
==================================================================

This is a [Next.js](https://nextjs.org) project bootstrapped with [`create-next-app`](https://nextjs.org/docs/app/api-reference/cli/create-next-app).

## Getting Started

First, run the development server:

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
# or
bun dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

You can start editing the page by modifying `app/page.tsx`. The page auto-updates as you edit the file.

This project uses [`next/font`](https://nextjs.org/docs/app/building-your-application/optimizing/fonts) to automatically optimize and load [Geist](https://vercel.com/font), a new font family for Vercel.

## Learn More

To learn more about Next.js, take a look at the following resources:

- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.
- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.

You can check out [the Next.js GitHub repository](https://github.com/vercel/next.js) - your feedback and contributions are welcome!

## Deploy on Vercel

The easiest way to deploy your Next.js app is to use the [Vercel Platform](https://vercel.com/new?utm_medium=default-template&filter=next.js&utm_source=create-next-app&utm_campaign=create-next-app-readme) from the creators of Next.js.

Check out our [Next.js deployment documentation](https://nextjs.org/docs/app/building-your-application/deploying) for more details.


==================================================================
FILE: ./package.json
==================================================================

{
  "name": "see-life-baptist",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev --turbopack",
    "build": "next build --turbopack",
    "start": "next start",
    "lint": "eslint",
    "check": "tsc --noEmit",
    "db:seed": "tsx prisma/seed.ts",
    "postinstall": "prisma generate"
  },
  "dependencies": {
    "@dnd-kit/core": "^6.3.1",
    "@dnd-kit/sortable": "^10.0.0",
    "@dnd-kit/utilities": "^3.2.2",
    "@getbrevo/brevo": "^3.0.1",
    "@headlessui/react": "^2.2.9",
    "@heroicons/react": "^2.2.0",
    "@hookform/resolvers": "^5.2.2",
    "@radix-ui/react-avatar": "^1.1.10",
    "@radix-ui/react-collapsible": "^1.1.12",
    "@radix-ui/react-dialog": "^1.1.15",
    "@radix-ui/react-dropdown-menu": "^2.1.16",
    "@radix-ui/react-separator": "^1.1.7",
    "@radix-ui/react-slot": "^1.2.3",
    "@radix-ui/react-tooltip": "^1.2.8",
    "@tanstack/react-query": "^5.90.2",
    "@tanstack/react-query-devtools": "^5.90.2",
    "@tanstack/react-table": "^8.21.3",
    "bcrypt": "^6.0.0",
    "better-auth": "^1.3.23",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "lucide-react": "^0.544.0",
    "next": "15.5.4",
    "react": "19.1.0",
    "react-dom": "19.1.0",
    "react-hook-form": "^7.63.0",
    "sonner": "^2.0.7",
    "tailwind-merge": "^3.3.1",
    "zod": "^4.1.11"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^3",
    "@prisma/client": "^6.16.2",
    "@tailwindcss/postcss": "^4",
    "@types/bcrypt": "^6.0.0",
    "@types/node": "^20",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "eslint": "^9",
    "eslint-config-next": "15.5.4",
    "prisma": "^6.16.2",
    "shadcn": "^3.3.1",
    "tailwindcss": "^4",
    "tsx": "^4.20.6",
    "tw-animate-css": "^1.4.0",
    "typescript": "^5"
  }
}

==================================================================
FILE: ./components.json
==================================================================

{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "new-york",
  "rsc": false,
  "tsx": true,
  "tailwind": {
    "config": "",
    "css": "src/shared/styles/globals.css",
    "baseColor": "neutral",
    "cssVariables": true,
    "prefix": ""
  },
  "iconLibrary": "lucide",
  "aliases": {
    "components": "@/src/components",
    "utils": "@/lib/utils",
    "ui": "@/src/components/ui",
    "lib": "@/lib",
    "hooks": "@/hooks"
  },
  "registries": {}
}

==================================================================
FILE: ./tsconfig.json
==================================================================

{
  "compilerOptions": {
    "target": "ES2017",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}


==================================================================
FILE: ./next.config.ts
==================================================================

import type { NextConfig } from 'next';

const nextConfig: NextConfig = {
    eslint: {
        // Disable ESLint errors during build
        ignoreDuringBuilds: true,
    },
    typescript: {
        // Disable TypeScript errors during build
        ignoreBuildErrors: true,
    },
};

export default nextConfig;


==================================================================
FILE: ./src/config/menuConstants.tsx
==================================================================

const navigation = [
    {
        name: 'About',
        subItems: [
            { name: 'What We Believe', href: '/what-we-believe' },
            { name: 'Our Purpose', href: '/our-purpose' },
            { name: 'Our Position', href: '/our-position' },
            { name: 'The Pastor', href: '/the-pastor' },
            { name: 'Real Church', href: '/real-church' },
        ],
    },
    { name: 'Support', href: '/support' },
    { name: 'Contact Us', href: '/contact' },
];

export default navigation;


==================================================================
FILE: ./src/features/contact/queries.ts
==================================================================

'use client';

import { useMutation } from '@tanstack/react-query';
import { sendContactMessageAction } from './actions';

export function useSendContactMessage() {
    return useMutation({
        mutationFn: sendContactMessageAction,
    });
}


==================================================================
FILE: ./src/features/contact/actions.ts
==================================================================

'use server';

import { z } from 'zod';
import { contactFormSchema } from './model/contact.schema';
import * as brevo from '@getbrevo/brevo';

async function sendEmail(payload: {
    to: string;
    from: string;
    subject: string;
    html: string;
    reply_to: string;
}) {
    if (!process.env.BREVO_API_KEY) {
        throw new Error('BREVO_API_KEY is not configured');
    }

    // Initialize Brevo API
    const apiInstance = new brevo.TransactionalEmailsApi();
    apiInstance.setApiKey(
        brevo.TransactionalEmailsApiApiKeys.apiKey,
        process.env.BREVO_API_KEY
    );

    const sendSmtpEmail = new brevo.SendSmtpEmail();
    sendSmtpEmail.to = [{ email: payload.to }];
    sendSmtpEmail.sender = {
        email: payload.from,
        name: 'See Life Baptist Church Website',
    };
    sendSmtpEmail.replyTo = { email: payload.reply_to };
    sendSmtpEmail.subject = payload.subject;
    sendSmtpEmail.htmlContent = payload.html;
    sendSmtpEmail.textContent = payload.html
        .replace(/<[^>]*>/g, '')
        .replace(/&nbsp;/g, ' ');

    await apiInstance.sendTransacEmail(sendSmtpEmail);
    return { success: true };
}

export async function sendContactMessageAction(
    input: z.infer<typeof contactFormSchema>
) {
    const validation = contactFormSchema.safeParse(input);

    if (!validation.success) {
        return {
            success: false,
            error: 'Invalid input. Please check the form.',
        };
    }

    const { name, email, phone, message } = validation.data;

    const emailHtml = `
        <h1>New Contact Form Submission</h1>
        <p><strong>Name:</strong> ${name}</p>
        <p><strong>Email:</strong> ${email}</p>
        <p><strong>Phone:</strong> ${phone || 'Not provided'}</p>
        <hr>
        <p><strong>Message:</strong></p>
        <p>${message.replace(/\n/g, '<br>')}</p>
    `;

    try {
        await sendEmail({
            to:
                process.env.CONTACT_FORM_RECIPIENT ||
                'info@seelifebaptistchurch.org.au',
            from: 'noreply@seelifebaptistchurch.org.au',
            reply_to: email,
            subject: `New Message from ${name} via Contact Form`,
            html: emailHtml,
        });

        return { success: true };
    } catch (error) {
        console.error('Failed to send contact email:', error);
        return {
            success: false,
            error: 'Sorry, we could not send your message at this time.',
        };
    }
}


==================================================================
FILE: ./src/features/contact/model/contact.schema.ts
==================================================================

import { z } from 'zod';

export const contactFormSchema = z.object({
    name: z.string().min(2, { message: 'Name must be at least 2 characters.' }),
    email: z.string().email({ message: 'Please enter a valid email address.' }),
    phone: z.string().optional(),
    message: z
        .string()
        .min(10, { message: 'Message must be at least 10 characters.' }),
});

export type ContactFormValues = z.infer<typeof contactFormSchema>;


==================================================================
FILE: ./src/features/service-times/queries.ts
==================================================================

'use client';
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';
import { queryKeys } from '../../lib/queryKeys';
import {
    getServices,
    getService,
    createService,
    updateService,
    deleteService,
} from './actions';

export function useServices() {
    return useQuery({
        queryKey: queryKeys.serviceTimes.lists(),
        queryFn: async () => {
            const result = await getServices();
            if (!result.success) throw new Error(result.error);
            return result.data || [];
        },
    });
}

export function useService(id: string) {
    return useQuery({
        queryKey: queryKeys.serviceTimes.detail(id),
        queryFn: async () => {
            const result = await getService(id);
            if (!result.success) throw new Error(result.error);
            return result.data;
        },
        enabled: !!id,
    });
}

export function useCreateService() {
    const queryClient = useQueryClient();

    return useMutation({
        mutationFn: createService,
        onSuccess: () => {
            queryClient.invalidateQueries({
                queryKey: queryKeys.serviceTimes.all,
            });
        },
    });
}

export function useUpdateService() {
    const queryClient = useQueryClient();

    return useMutation({
        mutationFn: ({
            id,
            data,
        }: {
            id: string;
            data: { name?: string; description?: string | null; day?: string; time?: string };
        }) => updateService(id, data),
        onSuccess: () => {
            queryClient.invalidateQueries({
                queryKey: queryKeys.serviceTimes.all,
            });
        },
    });
}

export function useDeleteService() {
    const queryClient = useQueryClient();

    return useMutation({
        mutationFn: deleteService,
        onSuccess: () => {
            queryClient.invalidateQueries({
                queryKey: queryKeys.serviceTimes.all,
            });
        },
    });
}


==================================================================
FILE: ./src/features/service-times/types.ts
==================================================================

export type DayOfWeek =
    | 'SUNDAY'
    | 'MONDAY'
    | 'TUESDAY'
    | 'WEDNESDAY'
    | 'THURSDAY'
    | 'FRIDAY'
    | 'SATURDAY';

export interface ServiceTime {
    id: string;
    name: string;
    description: string | null;
    day: DayOfWeek;
    time: string;
    createdAt: Date;
    updatedAt: Date;
}

export interface CreateServiceTimeInput {
    name: string;
    description?: string;
    day: DayOfWeek;
    time: string;
}

export interface UpdateServiceTimeInput {
    name?: string;
    description?: string;
    day?: DayOfWeek;
    time?: string;
}
export interface UpdateServiceTimeInput {
    name?: string;
    description?: string;
    time?: string;
}


==================================================================
FILE: ./src/features/service-times/components/ServiceTimes.tsx
==================================================================

export default function ServiceTimes() {
    return <div>Service Times Component</div>;
}


==================================================================
FILE: ./src/features/service-times/components/ServiceTimesForm.tsx
==================================================================

'use client';

import { useForm, SubmitHandler } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import {
    serviceTimesSchema,
    type ServiceTimeSchemaType,
} from '../model/service-times.schema';
import { useCreateService, useUpdateService } from '../queries';
import { Button } from '@/src/components/ui/button';
import { Input } from '@/src/components/ui/input';
import { Textarea } from '@/src/components/ui/textarea';
import { ServiceTime, DayOfWeek } from '../types';

interface ServiceTimesFormProps {
    service?: ServiceTime | null;
    onSuccess?: () => void;
}

const toDateTimeLocal = (date: Date): string => {
    try {
        const ten = (i: number) => (i < 10 ? '0' : '') + i;
        const YYYY = date.getFullYear();
        const MM = ten(date.getMonth() + 1);
        const DD = ten(date.getDate());
        const HH = ten(date.getHours());
        const mm = ten(date.getMinutes());
        return `${YYYY}-${MM}-${DD}T${HH}:${mm}`;
    } catch (e) {
        return ''; // Gracefully handle invalid dates
    }
};

export function ServiceTimesForm({
    service,
    onSuccess,
}: ServiceTimesFormProps) {
    const createService = useCreateService();
    const updateService = useUpdateService();

    const {
        register,
        handleSubmit,
        formState: { errors },
    } = useForm({
        resolver: zodResolver(serviceTimesSchema),
        // This is correct: use nullish coalescing to provide empty strings for null DB values.
        defaultValues: {
            name: service?.name ?? '',
            description: service?.description ?? '',
            day: service?.day ?? 'SUNDAY',
            time: service?.time ?? '',
        },
    });

    // FIX: Explicitly type the handler with SubmitHandler for full compatibility
    const onSubmit: SubmitHandler<ServiceTimeSchemaType> = async data => {
        // FIX: Create a payload where the empty string for `description` is
        // converted back to `undefined` for the database.
        const payload = {
            ...data,
            description: data.description === '' ? undefined : data.description,
        };

        try {
            if (service) {
                // `payload` now perfectly matches the `updateService` expectation
                await updateService.mutateAsync({
                    id: service.id,
                    data: payload,
                });
            } else {
                // `payload` also perfectly matches the `createService` expectation
                await createService.mutateAsync(payload);
            }
            onSuccess?.();
        } catch (error) {
            console.error('Error saving service:', error);
        }
    };

    const isPending = createService.isPending || updateService.isPending;

    return (
        <form onSubmit={handleSubmit(onSubmit)} className='space-y-4'>
            <div>
                <label htmlFor='name'>Service Name</label>
                <Input
                    id='name'
                    {...register('name')}
                    placeholder='e.g., Sunday Morning Worship'
                />
                {errors.name && (
                    <p className='text-sm text-red-600 mt-1'>
                        {errors.name.message}
                    </p>
                )}
            </div>
            <div>
                <label htmlFor='description'>Description (Optional)</label>
                <Textarea
                    id='description'
                    {...register('description')}
                    placeholder='e.g., A time of worship, prayer, and preaching.'
                />
                {errors.description && (
                    <p className='text-sm text-red-600 mt-1'>
                        {errors.description.message}
                    </p>
                )}
            </div>
            <div>
                <label htmlFor='day'>Day of the Week</label>
                <select
                    id='day'
                    {...register('day')}
                    className='w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'>
                    <option value='SUNDAY'>Sunday</option>
                    <option value='MONDAY'>Monday</option>
                    <option value='TUESDAY'>Tuesday</option>
                    <option value='WEDNESDAY'>Wednesday</option>
                    <option value='THURSDAY'>Thursday</option>
                    <option value='FRIDAY'>Friday</option>
                    <option value='SATURDAY'>Saturday</option>
                </select>
                {errors.day && (
                    <p className='text-sm text-red-600 mt-1'>
                        {errors.day.message}
                    </p>
                )}
            </div>
            <div>
                <label htmlFor='time'>Service Time</label>
                <Input
                    id='time'
                    type='text'
                    placeholder='e.g., Sunday 10:00 AM'
                    {...register('time')}
                />
                {errors.time && (
                    <p className='text-sm text-red-600 mt-1'>
                        {String(errors.time.message)}
                    </p>
                )}
            </div>
            <Button type='submit' disabled={isPending}>
                {isPending
                    ? 'Saving...'
                    : service
                    ? 'Update Service'
                    : 'Create Service'}
            </Button>
        </form>
    );
}


==================================================================
FILE: ./src/features/service-times/components/ServiceTimesTable.tsx
==================================================================

'use client';

import {
    useReactTable,
    getCoreRowModel,
    getSortedRowModel,
    getFilteredRowModel,
    getPaginationRowModel,
    flexRender,
    type ColumnDef,
    type SortingState,
    type ColumnFiltersState,
} from '@tanstack/react-table';
import { useState } from 'react';
import { useRouter } from 'next/navigation';
import { useServices, useDeleteService } from '../queries';
import { ServiceTime } from '../types';
import { Button } from '@/src/components/ui/button';
import { Input } from '@/src/components/ui/input';

export function ServiceTimesTable() {
    const router = useRouter();
    const { data: services, isLoading, error } = useServices();
    const deleteService = useDeleteService();
    const [sorting, setSorting] = useState<SortingState>([]);
    const [columnFilters, setColumnFilters] = useState<ColumnFiltersState>([]);

    const columns: ColumnDef<ServiceTime>[] = [
        {
            accessorKey: 'name',
            header: 'Name',
            cell: ({ row }) => row.getValue('name'),
        },
        {
            accessorKey: 'description',
            header: 'Description',
            cell: ({ row }) => row.getValue('description') || 'N/A',
        },

        {
            accessorKey: 'time',
            header: 'Time',
            cell: ({ row }) => row.getValue('time'),
        },

        {
            id: 'actions',
            header: 'Actions',
            cell: ({ row }) => (
                <div className='flex space-x-2'>
                    <Button
                        variant='outline'
                        size='sm'
                        onClick={() =>
                            router.push(
                                `/dashboard/service-times/${row.original.id}/edit`
                            )
                        }>
                        Edit
                    </Button>
                    <Button
                        variant='destructive'
                        size='sm'
                        onClick={() => deleteService.mutate(row.original.id)}
                        disabled={deleteService.isPending}>
                        Delete
                    </Button>
                </div>
            ),
        },
    ];

    const table = useReactTable({
        data: services || [],
        columns,
        getCoreRowModel: getCoreRowModel(),
        getSortedRowModel: getSortedRowModel(),
        getFilteredRowModel: getFilteredRowModel(),
        getPaginationRowModel: getPaginationRowModel(),
        onSortingChange: setSorting,
        onColumnFiltersChange: setColumnFilters,
        state: {
            sorting,
            columnFilters,
        },
    });

    if (isLoading) return <div>Loading...</div>;
    if (error) return <div>Error: {error.message}</div>;

    return (
        <div className='space-y-4'>
            <div className='flex items-center justify-between'>
                <Input
                    placeholder='Filter services...'
                    value={
                        (table.getColumn('name')?.getFilterValue() as string) ??
                        ''
                    }
                    onChange={event =>
                        table
                            .getColumn('name')
                            ?.setFilterValue(event.target.value)
                    }
                    className='max-w-sm'
                />
                <Button
                    onClick={() => router.push('/dashboard/service-times/new')}>
                    Add Service Time
                </Button>
            </div>
            <div className='rounded-md border'>
                <table className='w-full'>
                    <thead>
                        {table.getHeaderGroups().map(headerGroup => (
                            <tr key={headerGroup.id}>
                                {headerGroup.headers.map(header => (
                                    <th
                                        key={header.id}
                                        className='border-b px-4 py-2 text-left'>
                                        {header.isPlaceholder
                                            ? null
                                            : flexRender(
                                                  header.column.columnDef
                                                      .header,
                                                  header.getContext()
                                              )}
                                    </th>
                                ))}
                            </tr>
                        ))}
                    </thead>
                    <tbody>
                        {table.getRowModel().rows?.length ? (
                            table.getRowModel().rows.map(row => (
                                <tr
                                    key={row.id}
                                    data-state={
                                        row.getIsSelected() && 'selected'
                                    }
                                    className='border-b'>
                                    {row.getVisibleCells().map(cell => (
                                        <td key={cell.id} className='px-4 py-2'>
                                            {flexRender(
                                                cell.column.columnDef.cell,
                                                cell.getContext()
                                            )}
                                        </td>
                                    ))}
                                </tr>
                            ))
                        ) : (
                            <tr>
                                <td
                                    colSpan={columns.length}
                                    className='h-24 text-center'>
                                    No results.
                                </td>
                            </tr>
                        )}
                    </tbody>
                </table>
            </div>
            <div className='flex items-center justify-end space-x-2 py-4'>
                <Button
                    variant='outline'
                    size='sm'
                    onClick={() => table.previousPage()}
                    disabled={!table.getCanPreviousPage()}>
                    Previous
                </Button>
                <Button
                    variant='outline'
                    size='sm'
                    onClick={() => table.nextPage()}
                    disabled={!table.getCanNextPage()}>
                    Next
                </Button>
            </div>
        </div>
    );
}


==================================================================
FILE: ./src/features/service-times/actions.ts
==================================================================

'use server';

import { revalidateTag } from 'next/cache';
import { PrismaClient } from '../../generated/prisma';
import { prisma } from '@/src/lib/prisma';

export async function getServices() {
    try {
        const services = await prisma.services.findMany({
            select: {
                id: true,
                name: true,
                description: true,
                day: true,
                time: true,
                createdAt: true,
                updatedAt: true,
            },
            orderBy: {
                time: 'asc',
            },
        });
        return { success: true, data: services };
    } catch (error) {
        return { success: false, error: 'Failed to fetch services' };
    }
}

export async function getService(id: string) {
    try {
        const service = await prisma.services.findUnique({
            where: { id },
            select: {
                id: true,
                name: true,
                description: true,
                day: true,
                time: true,
                createdAt: true,
                updatedAt: true,
            },
        });
        if (!service) {
            return { success: false, error: 'Service not found' };
        }
        return { success: true, data: service };
    } catch (error) {
        return { success: false, error: 'Failed to fetch service' };
    }
}

export async function createService(data: {
    name: string;
    description?: string;
    day: string;
    time: string;
}) {
    try {
        const service = await prisma.services.create({
            data: {
                name: data.name,
                description: data.description,
                day: data.day as any,
                time: data.time,
            },
            select: {
                id: true,
                name: true,
                description: true,
                day: true,
                time: true,
                createdAt: true,
                updatedAt: true,
            },
        });

        revalidateTag('service-times');
        return { success: true, data: service };
    } catch (error) {
        return { success: false, error: 'Failed to create service' };
    }
}

export async function updateService(
    id: string,
    data: {
        name?: string;
        description?: string | null;
        day?: string;
        time?: string;
    }
) {
    try {
        const service = await prisma.services.update({
            where: { id },
            data: {
                ...data,
                day: data.day as any,
            },
            select: {
                id: true,
                name: true,
                description: true,
                day: true,
                time: true,
                createdAt: true,
                updatedAt: true,
            },
        });

        revalidateTag('service-times');
        return { success: true, data: service };
    } catch (error) {
        return { success: false, error: 'Failed to update service' };
    }
}

export async function deleteService(id: string) {
    try {
        await prisma.services.delete({
            where: { id },
        });

        revalidateTag('service-times');
        return { success: true };
    } catch (error) {
        return { success: false, error: 'Failed to delete service' };
    }
}


==================================================================
FILE: ./src/features/service-times/model/service-times.schema.tsx
==================================================================

import { z } from 'zod';

const dayOfWeekEnum = z.enum(['SUNDAY', 'MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY']);

export const serviceTimesSchema = z.object({
    id: z.cuid().optional(),
    name: z.string().min(1, 'Service name is required'),
    // FIX: Use .optional() to produce `string | undefined`, which aligns with Prisma's update types
    // and form handling. We'll still send `null` to the DB if the field is empty.
    description: z.string().optional(),
    day: dayOfWeekEnum,
    time: z.string().min(1, 'Service time is required'),
});

export type ServiceTimeSchemaType = z.infer<typeof serviceTimesSchema>;


==================================================================
FILE: ./src/features/auth/actions.ts
==================================================================

'use server';

import { auth } from '@/src/lib/auth';
import { createUserSchema } from '@/src/features/users/model/user.schema';
import { prisma } from '@/src/lib/prisma';
import { z } from 'zod';
import { Prisma } from '@/src/generated/prisma';

export async function registerUserAction(
    input: z.infer<typeof createUserSchema>
) {
    console.log(
        '[SERVER ACTION] registerUserAction invoked at:',
        new Date().toISOString()
    );
    console.log('[SERVER ACTION] Input received:', {
        name: input.name,
        email: input.email,
    });

    const validation = createUserSchema.safeParse(input);
    if (!validation.success) {
        const errorMessage =
            validation.error.issues[0]?.message || 'Invalid input data.';
        console.error('[SERVER ACTION] Validation failed:', errorMessage);
        return { success: false, error: errorMessage };
    }

    const { name, email, password } = validation.data;

    try {
        const userCount = await prisma.user.count();
        console.log(`[SERVER ACTION] Found ${userCount} existing user(s).`);

        if (userCount > 0) {
            const errorMessage =
                'Registration is not allowed. An admin user already exists.';
            console.warn('[SERVER ACTION] Aborting:', errorMessage);
            return { success: false, error: errorMessage };
        }

        console.log(
            '[SERVER ACTION] Attempting to sign up user with better-auth...'
        );
        const user = await auth.api.signUpEmail({
            body: { email, password, name },
        });
        console.log(
            '[SERVER ACTION] better-auth signup successful. User ID:',
            user.user.id
        );

        console.log(
            `[SERVER ACTION] Updating user ${user.user.id} to ADMIN role...`
        );
        await prisma.user.update({
            where: { id: user.user.id },
            data: { role: 'ADMIN' },
        });
        console.log('[SERVER ACTION] Role update successful.');

        return {
            success: true,
            data: { id: user.user.id, email: user.user.email },
        };
    } catch (error) {
        console.error(
            '[SERVER ACTION] An error occurred in the try-catch block:',
            JSON.stringify(error, null, 2)
        );

        if (error instanceof Prisma.PrismaClientKnownRequestError) {
            if (error.code === 'P2002') {
                return {
                    success: false,
                    error: 'An account with this email already exists.',
                };
            }
        }

        if (error instanceof Error) {
            const apiError = error as any;
            if (
                apiError.status === 'UNPROCESSABLE_ENTITY' &&
                apiError.body?.message
            ) {
                return { success: false, error: apiError.body.message };
            }
            return { success: false, error: error.message };
        }

        return {
            success: false,
            error: 'An unknown error occurred during registration.',
        };
    }
}


==================================================================
FILE: ./src/features/faq/queries.ts
==================================================================

'use client';
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';
import { queryKeys } from '../../lib/queryKeys';
import { getFAQs, getFAQ, createFAQ, updateFAQ, deleteFAQ } from './actions';

export function useFAQs() {
    return useQuery({
        queryKey: queryKeys.faqs.lists(),
        queryFn: async () => {
            const result = await getFAQs();
            if (!result.success) throw new Error(result.error);
            return result.data || [];
        },
    });
}

export function useFAQ(id: string) {
    return useQuery({
        queryKey: queryKeys.faqs.detail(id),
        queryFn: async () => {
            const result = await getFAQ(id);
            if (!result.success) throw new Error(result.error);
            return result.data;
        },
        enabled: !!id,
    });
}

export function useCreateFAQ() {
    const queryClient = useQueryClient();

    return useMutation({
        mutationFn: createFAQ,
        onSuccess: () => {
            queryClient.invalidateQueries({
                queryKey: queryKeys.faqs.all,
            });
        },
    });
}

export function useUpdateFAQ() {
    const queryClient = useQueryClient();

    return useMutation({
        mutationFn: ({
            id,
            data,
        }: {
            id: string;
            data: { question?: string; answer?: string };
        }) => updateFAQ(id, data),
        onSuccess: () => {
            queryClient.invalidateQueries({
                queryKey: queryKeys.faqs.all,
            });
        },
    });
}

export function useDeleteFAQ() {
    const queryClient = useQueryClient();

    return useMutation({
        mutationFn: deleteFAQ,
        onSuccess: () => {
            queryClient.invalidateQueries({
                queryKey: queryKeys.faqs.all,
            });
        },
    });
}


==================================================================
FILE: ./src/features/faq/types.ts
==================================================================

export interface FAQ {
    id: string;
    question: string;
    answer: string;
    createdAt: Date;
    updatedAt: Date;
}

export interface CreateFAQInput {
    question: string;
    answer: string;
}

export interface UpdateFAQInput {
    question?: string;
    answer?: string;
}


==================================================================
FILE: ./src/features/faq/components/FAQTable.tsx
==================================================================

'use client';

import {
    useReactTable,
    getCoreRowModel,
    getSortedRowModel,
    getFilteredRowModel,
    getPaginationRowModel,
    flexRender,
    type ColumnDef,
    type SortingState,
    type ColumnFiltersState,
} from '@tanstack/react-table';
import { useState } from 'react';
import { useRouter } from 'next/navigation';
import { useFAQs, useDeleteFAQ } from '../queries';
import { FAQ } from '../types';
import { Button } from '@/src/components/ui/button';
import { Input } from '@/src/components/ui/input';

export function FAQTable() {
    const router = useRouter();
    const { data: faqs, isLoading, error } = useFAQs();
    const deleteFAQ = useDeleteFAQ();
    const [sorting, setSorting] = useState<SortingState>([]);
    const [columnFilters, setColumnFilters] = useState<ColumnFiltersState>([]);

    const columns: ColumnDef<FAQ>[] = [
        {
            accessorKey: 'question',
            header: 'Question',
            cell: ({ row }) => (
                <div
                    className='max-w-md truncate'
                    title={row.getValue('question')}>
                    {row.getValue('question')}
                </div>
            ),
        },
        {
            accessorKey: 'answer',
            header: 'Answer',
            cell: ({ row }) => (
                <div
                    className='max-w-md truncate'
                    title={row.getValue('answer')}>
                    {row.getValue('answer')}
                </div>
            ),
        },
        {
            accessorKey: 'createdAt',
            header: 'Created',
            cell: ({ row }) => {
                const date = new Date(row.getValue('createdAt'));
                return isNaN(date.getTime())
                    ? 'N/A'
                    : date.toLocaleDateString();
            },
        },
        {
            id: 'actions',
            header: 'Actions',
            cell: ({ row }) => (
                <div className='flex space-x-2'>
                    <Button
                        variant='outline'
                        size='sm'
                        onClick={() =>
                            router.push(
                                `/dashboard/faq/${row.original.id}/edit`
                            )
                        }>
                        Edit
                    </Button>
                    <Button
                        variant='destructive'
                        size='sm'
                        onClick={() => deleteFAQ.mutate(row.original.id)}
                        disabled={deleteFAQ.isPending}>
                        Delete
                    </Button>
                </div>
            ),
        },
    ];

    const table = useReactTable({
        data: faqs || [],
        columns,
        getCoreRowModel: getCoreRowModel(),
        getSortedRowModel: getSortedRowModel(),
        getFilteredRowModel: getFilteredRowModel(),
        getPaginationRowModel: getPaginationRowModel(),
        onSortingChange: setSorting,
        onColumnFiltersChange: setColumnFilters,
        state: {
            sorting,
            columnFilters,
        },
    });

    if (isLoading) return <div>Loading...</div>;
    if (error) return <div>Error: {error.message}</div>;

    return (
        <div className='space-y-4'>
            <div className='flex items-center justify-between'>
                <Input
                    placeholder='Filter FAQs...'
                    value={
                        (table
                            .getColumn('question')
                            ?.getFilterValue() as string) ?? ''
                    }
                    onChange={event =>
                        table
                            .getColumn('question')
                            ?.setFilterValue(event.target.value)
                    }
                    className='max-w-sm'
                />
                <Button onClick={() => router.push('/dashboard/faq/new')}>
                    Add FAQ
                </Button>
            </div>
            <div className='rounded-md border'>
                <table className='w-full'>
                    <thead>
                        {table.getHeaderGroups().map(headerGroup => (
                            <tr key={headerGroup.id}>
                                {headerGroup.headers.map(header => (
                                    <th
                                        key={header.id}
                                        className='border-b px-4 py-2 text-left'>
                                        {header.isPlaceholder
                                            ? null
                                            : flexRender(
                                                  header.column.columnDef
                                                      .header,
                                                  header.getContext()
                                              )}
                                    </th>
                                ))}
                            </tr>
                        ))}
                    </thead>
                    <tbody>
                        {table.getRowModel().rows?.length ? (
                            table.getRowModel().rows.map(row => (
                                <tr
                                    key={row.id}
                                    data-state={
                                        row.getIsSelected() && 'selected'
                                    }
                                    className='border-b'>
                                    {row.getVisibleCells().map(cell => (
                                        <td key={cell.id} className='px-4 py-2'>
                                            {flexRender(
                                                cell.column.columnDef.cell,
                                                cell.getContext()
                                            )}
                                        </td>
                                    ))}
                                </tr>
                            ))
                        ) : (
                            <tr>
                                <td
                                    colSpan={columns.length}
                                    className='h-24 text-center'>
                                    No results.
                                </td>
                            </tr>
                        )}
                    </tbody>
                </table>
            </div>
            <div className='flex items-center justify-end space-x-2 py-4'>
                <Button
                    variant='outline'
                    size='sm'
                    onClick={() => table.previousPage()}
                    disabled={!table.getCanPreviousPage()}>
                    Previous
                </Button>
                <Button
                    variant='outline'
                    size='sm'
                    onClick={() => table.nextPage()}
                    disabled={!table.getCanNextPage()}>
                    Next
                </Button>
            </div>
        </div>
    );
}


==================================================================
FILE: ./src/features/faq/components/FAQForm.tsx
==================================================================

'use client';

import { useForm, SubmitHandler } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { faqSchema, type FAQSchemaType } from '../model/faq.schema';
import { useCreateFAQ, useUpdateFAQ } from '../queries';
import { Button } from '@/src/components/ui/button';
import { Input } from '@/src/components/ui/input';
import { Textarea } from '@/src/components/ui/textarea';
import { FAQ } from '../types';

interface FAQFormProps {
    faq?: FAQ | null;
    onSuccess?: () => void;
}

export function FAQForm({ faq, onSuccess }: FAQFormProps) {
    const createFAQ = useCreateFAQ();
    const updateFAQ = useUpdateFAQ();

    const {
        register,
        handleSubmit,
        formState: { errors },
    } = useForm({
        resolver: zodResolver(faqSchema),
        defaultValues: {
            question: faq?.question ?? '',
            answer: faq?.answer ?? '',
        },
    });

    const onSubmit: SubmitHandler<FAQSchemaType> = async data => {
        try {
            if (faq) {
                await updateFAQ.mutateAsync({
                    id: faq.id,
                    data,
                });
            } else {
                await createFAQ.mutateAsync(data);
            }
            onSuccess?.();
        } catch (error) {
            console.error('Error saving FAQ:', error);
        }
    };

    const isPending = createFAQ.isPending || updateFAQ.isPending;

    return (
        <form onSubmit={handleSubmit(onSubmit)} className='space-y-4'>
            <div>
                <label htmlFor='question'>Question</label>
                <Input
                    id='question'
                    {...register('question')}
                    placeholder='e.g., What is the church service time?'
                />
                {errors.question && (
                    <p className='text-sm text-red-600 mt-1'>
                        {errors.question.message}
                    </p>
                )}
            </div>
            <div>
                <label htmlFor='answer'>Answer</label>
                <Textarea
                    id='answer'
                    {...register('answer')}
                    placeholder='Provide a detailed answer to the question.'
                    rows={6}
                />
                {errors.answer && (
                    <p className='text-sm text-red-600 mt-1'>
                        {errors.answer.message}
                    </p>
                )}
            </div>
            <Button type='submit' disabled={isPending}>
                {isPending ? 'Saving...' : faq ? 'Update FAQ' : 'Create FAQ'}
            </Button>
        </form>
    );
}


==================================================================
FILE: ./src/features/faq/actions.ts
==================================================================

'use server';

import { revalidateTag } from 'next/cache';
import { PrismaClient } from '../../generated/prisma';
import { prisma } from '@/src/lib/prisma';

export async function getFAQs() {
    try {
        const faqs = await prisma.fAQ.findMany({
            select: {
                id: true,
                question: true,
                answer: true,
                createdAt: true,
                updatedAt: true,
            },
            orderBy: {
                createdAt: 'desc',
            },
        });
        return { success: true, data: faqs };
    } catch (error) {
        return { success: false, error: 'Failed to fetch FAQs' };
    }
}

export async function getFAQ(id: string) {
    try {
        const faq = await prisma.fAQ.findUnique({
            where: { id },
            select: {
                id: true,
                question: true,
                answer: true,
                createdAt: true,
                updatedAt: true,
            },
        });
        if (!faq) {
            return { success: false, error: 'FAQ not found' };
        }
        return { success: true, data: faq };
    } catch (error) {
        return { success: false, error: 'Failed to fetch FAQ' };
    }
}

export async function createFAQ(data: { question: string; answer: string }) {
    try {
        console.log('Creating FAQ with data:', data);
        const faq = await prisma.fAQ.create({
            data: {
                id: crypto.randomUUID(),
                question: data.question,
                answer: data.answer,
                updatedAt: new Date(),
            },
            select: {
                id: true,
                question: true,
                answer: true,
                createdAt: true,
                updatedAt: true,
            },
        });
        console.log('FAQ created successfully:', faq);

        revalidateTag('faqs');
        return { success: true, data: faq };
    } catch (error) {
        console.error('Error creating FAQ:', error);
        return { success: false, error: 'Failed to create FAQ' };
    }
}

export async function updateFAQ(
    id: string,
    data: {
        question?: string;
        answer?: string;
    }
) {
    try {
        const faq = await prisma.fAQ.update({
            where: { id },
            data: {
                ...data,
                updatedAt: new Date(),
            },
            select: {
                id: true,
                question: true,
                answer: true,
                createdAt: true,
                updatedAt: true,
            },
        });

        revalidateTag('faqs');
        return { success: true, data: faq };
    } catch (error) {
        return { success: false, error: 'Failed to update FAQ' };
    }
}

export async function deleteFAQ(id: string) {
    try {
        await prisma.fAQ.delete({
            where: { id },
        });

        revalidateTag('faqs');
        return { success: true };
    } catch (error) {
        return { success: false, error: 'Failed to delete FAQ' };
    }
}


==================================================================
FILE: ./src/features/faq/model/faq.schema.ts
==================================================================

import { z } from 'zod';

export const faqSchema = z.object({
    id: z.cuid().optional(),
    question: z.string().min(1, 'Question is required'),
    answer: z.string().min(1, 'Answer is required'),
});

export type FAQSchemaType = z.infer<typeof faqSchema>;


==================================================================
FILE: ./src/features/statement/queries.ts
==================================================================

'use client';
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';
import { queryKeys } from '../../lib/queryKeys';
import * as statementActions from './actions';
import { StatementFormData } from './schemas';
import { Statement } from '@/src/generated/prisma'; // Import the correct Statement type
import { toast } from 'sonner';
// This ApiClient pattern is good, but for server actions, it's clearer to import them directly.
// Let's adapt to call the actions directly in the hooks.

export function useStatements() {
    return useQuery({
        queryKey: queryKeys.statements.lists(),
        queryFn: async () => {
            const result = await statementActions.getStatements();
            if (!result.success) throw new Error(result.error);
            return result.data;
        },
    });
}

export function useStatement(id: string) {
    return useQuery({
        queryKey: queryKeys.statements.detail(id),
        queryFn: async () => {
            const result = await statementActions.getStatement(id);
            if (!result.success) throw new Error(result.error);
            return result.data;
        },
        enabled: !!id,
    });
}

export function useCreateOrUpdateStatement() {
    const queryClient = useQueryClient();

    return useMutation({
        mutationFn: (data: StatementFormData) =>
            statementActions.createOrUpdateStatement(data),
        onSuccess: (_data, _variables, _context) => {
            // Invalidate all queries related to statements to ensure data is fresh everywhere
            return queryClient.invalidateQueries({
                queryKey: queryKeys.statements.all,
            });
        },
        onError: error => {
            console.error('Mutation failed:', error);
            // Optionally show a toast notification here
        },
    });
}

export function useDeleteStatement() {
    const queryClient = useQueryClient();
    return useMutation({
        mutationFn: (id: string) => statementActions.deleteStatement(id),
        onSuccess: () => {
            return queryClient.invalidateQueries({
                queryKey: queryKeys.statements.all,
            });
        },
    });
}

export function useUpdateStatementOrder() {
    const queryClient = useQueryClient();
    const queryKey = queryKeys.statements.lists();

    return useMutation({
        mutationFn: statementActions.updateStatementOrder,
        // When the mutation is called, we optimistically update the UI.
        onMutate: async newOrder => {
            // Cancel any outgoing refetches so they don't overwrite our optimistic update.
            await queryClient.cancelQueries({ queryKey });

            // Snapshot the previous value.
            const previousStatements =
                queryClient.getQueryData<Statement[]>(queryKey);

            // Optimistically update to the new value.
            // Here, we trust the `newOrder` array reflects the visual change.
            if (previousStatements) {
                const updatedStatements = previousStatements
                    .map(stmt => {
                        const newOrderItem = newOrder.find(
                            item => item.id === stmt.id
                        );
                        return newOrderItem
                            ? {
                                  ...stmt,
                                  displayOrder: newOrderItem.displayOrder,
                              }
                            : stmt;
                    })
                    .sort((a, b) => a.displayOrder - b.displayOrder);

                queryClient.setQueryData(queryKey, updatedStatements);
            }

            // Return a context object with the snapshotted value.
            return { previousStatements };
        },
        // If the mutation fails, use the context returned from onMutate to roll back.
        onError: (_err, _newOrder, context) => {
            if (context?.previousStatements) {
                queryClient.setQueryData(queryKey, context.previousStatements);
            }
            toast.error('Failed to update statement order');
        },
        // Always refetch after the mutation is settled (success or error).
        onSettled: () => {
            queryClient.invalidateQueries({ queryKey });
        },
        onSuccess: () => {
            toast.success('Statement order updated successfully');
        },
    });
}


==================================================================
FILE: ./src/features/statement/schemas.ts
==================================================================

import { z } from 'zod';
import type { Statement as PrismaStatement } from '@/src/generated/prisma';

// Define a placeholder interface. This is a standard pattern for helping TypeScript
// understand the shape of a recursive object before the Zod schema is defined.
interface RecursiveStatement {
    id?: string;
    topic: string;
    content: string;
    bibleReferences?: string;
    displayOrder: number;
    subStatements: RecursiveStatement[];
}

// Create the recursive schema, explicitly telling TypeScript it will conform to our interface.
// This guides the type inference process correctly.
export const statementFormDataSchema: z.ZodType<RecursiveStatement> = z.lazy(() =>
    z.object({
        id: z.string().cuid().optional(),
        topic: z.string().min(1, 'Topic is required'),
        content: z.string().min(1, 'Content is required'),
        bibleReferences: z.string().optional(),
        displayOrder: z.number().min(0, 'Display order must be 0 or greater'),
        // The recursion uses the schema itself.
        subStatements: z.array(statementFormDataSchema),
    })
);

// Now, infer the final, fully-typed `StatementFormData` from the corrected schema.
// This is the type we will use in our form components.
export type StatementFormData = z.infer<typeof statementFormDataSchema>;

// This type definition for the server-fetched data remains unchanged.
export type Statement = PrismaStatement & {
    subStatements: Statement[];
};


==================================================================
FILE: ./src/features/statement/types.ts
==================================================================

export interface Statement {
    id: string;
    topic: string;
    content: string;
    bibleReferences: string | null;
    displayOrder: number;
    createdAt: Date;
    updatedAt: Date;
    subStatements: Statement[];
}


==================================================================
FILE: ./src/features/statement/components/NestedEditor.tsx
==================================================================

import { Statement } from '../schemas';

interface NestedEditorProps {
    statement: Statement;
}

// A recursive component to render a statement and its children
const StatementNode = ({ statement }: { statement: Statement }) => {
    return (
        <div className='ml-6 pl-4 border-l-2 border-gray-200'>
            <h4 className='font-semibold text-lg'>{statement.topic}</h4>
            <p className='text-gray-700 mt-1'>{statement.content}</p>
            {statement.bibleReferences && (
                <p className='text-sm text-gray-500 mt-1 italic'>
                    {statement.bibleReferences}
                </p>
            )}
            {statement.subStatements && statement.subStatements.length > 0 && (
                <div className='mt-4 space-y-4'>
                    {statement.subStatements.map(sub => (
                        <StatementNode key={sub.id} statement={sub} />
                    ))}
                </div>
            )}
        </div>
    );
};

export const NestedEditor = ({ statement }: NestedEditorProps) => {
    return (
        <div className='space-y-4'>
            {/* Render the root node */}
            <div>
                <h3 className='font-bold text-xl'>{statement.topic}</h3>
                <p className='text-gray-800 mt-2'>{statement.content}</p>
                {statement.bibleReferences && (
                    <p className='text-sm text-gray-600 mt-2 italic'>
                        {statement.bibleReferences}
                    </p>
                )}
            </div>

            {/* Render children if they exist */}
            {statement.subStatements && statement.subStatements.length > 0 && (
                <div className='mt-6 space-y-4'>
                    {statement.subStatements.map(subStatement => (
                        <StatementNode
                            key={subStatement.id}
                            statement={subStatement}
                        />
                    ))}
                </div>
            )}
        </div>
    );
};


==================================================================
FILE: ./src/features/statement/components/ScripturePill.tsx
==================================================================

import React from 'react';

interface ScripturePillProps {
    reference: string;
}

export const ScripturePill: React.FC<ScripturePillProps> = ({ reference }) => {
    return (
        <span className='inline-block bg-cerulean-500 text-white text-xs font-medium px-3 py-1.5 rounded-full cursor-pointer hover:bg-cerulean-600 transition-colors duration-200 shadow-sm hover:shadow-md transform hover:-translate-y-0.5'>
            {reference}
        </span>
    );
};


==================================================================
FILE: ./src/features/statement/components/Dashboard.tsx
==================================================================

import React, { useState } from 'react';
import { Statement } from '../types';
import { StatementFormData } from '../schemas';
import { Modal } from './Modal';
import { StatementForm } from './StatementForm';
import { useCreateOrUpdateStatement, useDeleteStatement } from '../queries';
import { Button } from '@/src/components/ui/button';
import { toast } from 'sonner';

type FormState =
    | { mode: 'addTopic' }
    | { mode: 'editTopic'; topic: Statement }
    | { mode: 'addSection'; topicId: string }
    | { mode: 'editSection'; topicId: string; section: Statement };

// REFACTORED: `onRefresh` prop is removed.
interface DashboardProps {
    statements: Statement[];
}

// Helper to convert Prisma model to form data, ensuring a clean recursive structure.
const statementToFormData = (st: Statement): StatementFormData => ({
    id: st.id,
    topic: st.topic,
    content: st.content,
    bibleReferences: st.bibleReferences || '',
    displayOrder: st.displayOrder,
    subStatements: (st.subStatements || []).map(statementToFormData),
});

export const Dashboard: React.FC<DashboardProps> = ({ statements }) => {
    const [formState, setFormState] = useState<FormState | null>(null);

    const closeForm = () => setFormState(null);

    const createOrUpdateMutation = useCreateOrUpdateStatement();
    const deleteMutation = useDeleteStatement();

    const handleMutationSuccess = (message: string) => {
        toast.success(message);
        closeForm();
        // Invalidation is handled automatically by the mutation hook.
    };

    const handleMutationError = (error: Error, defaultMessage: string) => {
        console.error(defaultMessage, error);
        toast.error(error.message || defaultMessage);
    };

    // REFACTORED: Logic is simplified to only build the payload and call the mutation.
    const handleSaveTopic = async (dataFromForm: {
        id?: string;
        topic: string;
        content: string;
        references: string;
    }) => {
        const existingTopic =
            formState?.mode === 'editTopic' ? formState.topic : null;

        const payload: StatementFormData = {
            id: dataFromForm.id,
            topic: dataFromForm.topic,
            content: dataFromForm.content,
            bibleReferences: dataFromForm.references,
            displayOrder: existingTopic?.displayOrder ?? statements.length,
            // Preserve existing sub-statements when editing a topic
            subStatements:
                existingTopic?.subStatements?.map(statementToFormData) ?? [],
        };

        createOrUpdateMutation.mutate(payload, {
            onSuccess: () => handleMutationSuccess('Root statement saved.'),
            onError: e => handleMutationError(e, 'Failed to save statement.'),
        });
    };

    // REFACTORED: No more manual array splicing. We build the new state and let the server handle it.
    const handleSaveSection = async (
        topicId: string,
        sectionDataFromForm: {
            id?: string;
            topic: string;
            content: string;
            references: string;
        }
    ) => {
        const parentStatement = statements.find(s => s.id === topicId);
        if (!parentStatement) {
            return toast.error('Parent statement not found.');
        }

        // Deep copy the parent to avoid direct prop mutation (anti-pattern).
        const parentAsFormData = statementToFormData(parentStatement);

        const newSectionData = {
            id: sectionDataFromForm.id,
            topic: sectionDataFromForm.topic,
            content: sectionDataFromForm.content,
            bibleReferences: sectionDataFromForm.references,
            displayOrder: 0, // Server action will handle re-ordering.
            subStatements: [],
        };

        if (sectionDataFromForm.id) {
            // Editing: find and replace
            const index = parentAsFormData.subStatements.findIndex(
                s => s.id === sectionDataFromForm.id
            );
            if (index !== -1) {
                parentAsFormData.subStatements[index] = {
                    ...parentAsFormData.subStatements[index], // preserve deeper nesting if any
                    ...newSectionData,
                };
            }
        } else {
            // Adding: push to array
            newSectionData.displayOrder = parentAsFormData.subStatements.length;
            parentAsFormData.subStatements.push(newSectionData);
        }

        createOrUpdateMutation.mutate(parentAsFormData, {
            onSuccess: () => handleMutationSuccess('Sub-statement saved.'),
            onError: e =>
                handleMutationError(e, 'Failed to save sub-statement.'),
        });
    };

    // REFACTORED: The logic for deleting a topic is now much simpler.
    const handleDeleteTopic = async (topicId: string) => {
        if (
            window.confirm(
                'Are you sure you want to delete this topic and all its sections?'
            )
        ) {
            deleteMutation.mutate(topicId, {
                onSuccess: () =>
                    handleMutationSuccess('Topic deleted successfully.'),
                onError: e => handleMutationError(e, 'Failed to delete topic.'),
            });
        }
    };

    // REFACTORED: Deleting a section now also uses the robust update action.
    const handleDeleteSection = async (topicId: string, sectionId: string) => {
        if (window.confirm('Are you sure you want to delete this section?')) {
            const parentStatement = statements.find(s => s.id === topicId);
            if (!parentStatement) {
                return toast.error('Parent statement not found.');
            }

            const parentAsFormData = statementToFormData(parentStatement);
            parentAsFormData.subStatements =
                parentAsFormData.subStatements.filter(s => s.id !== sectionId);

            createOrUpdateMutation.mutate(parentAsFormData, {
                onSuccess: () =>
                    handleMutationSuccess('Sub-statement deleted.'),
                onError: e =>
                    handleMutationError(e, 'Failed to delete sub-statement.'),
            });
        }
    };

    return (
        <div className='space-y-8 w-full'>
            <div className='flex justify-between items-center'>
                {/* <h1 className='text-3xl font-bold text-dark-900'>Dashboard</h1> */}
                <Button
                    onClick={() => setFormState({ mode: 'addTopic' })}
                    className='bg-cerulean-500 hover:bg-cerulean-600'>
                    Add Statement
                </Button>
            </div>

            <div className='space-y-6'>
                {statements.map(topic => (
                    <div
                        key={topic.id}
                        className='bg-white p-6 rounded-xl shadow-md border border-mystic-200'>
                        <div className='flex justify-between items-start mb-4'>
                            <div className='pr-4'>
                                <h2 className='text-2xl font-semibold text-dark-800'>
                                    {topic.topic}
                                </h2>
                                {topic.content && (
                                    <p className='text-sm text-dark-600 mt-2 line-clamp-2'>
                                        {topic.content}
                                    </p>
                                )}
                            </div>
                            <div className='flex items-center space-x-2 shrink-0'>
                                <Button
                                    variant='outline'
                                    size='sm'
                                    onClick={() =>
                                        setFormState({
                                            mode: 'editTopic',
                                            topic,
                                        })
                                    }>
                                    Edit
                                </Button>
                                <Button
                                    variant='destructive'
                                    size='sm'
                                    onClick={() => handleDeleteTopic(topic.id)}>
                                    Delete
                                </Button>
                            </div>
                        </div>

                        <div className='space-y-4 pl-4 border-l-2 border-mystic-200'>
                            {topic.subStatements &&
                                topic.subStatements.map(section => (
                                    <div
                                        key={section.id}
                                        className='bg-mystic-50 p-4 rounded-lg'>
                                        <div className='flex justify-between items-start'>
                                            <div>
                                                <h3 className='font-bold text-dark-700'>
                                                    {section.topic}
                                                </h3>
                                                <p className='text-sm text-dark-600 mt-1 line-clamp-2'>
                                                    {section.content}
                                                </p>
                                                <p className='text-xs text-dark-500 mt-2'>
                                                    References:{' '}
                                                    {section.bibleReferences}
                                                </p>
                                            </div>
                                            <div className='flex items-center space-x-2 shrink-0 ml-4'>
                                                <Button
                                                    variant='outline'
                                                    size='sm'
                                                    onClick={() =>
                                                        setFormState({
                                                            mode: 'editSection',
                                                            topicId: topic.id,
                                                            section,
                                                        })
                                                    }>
                                                    Edit
                                                </Button>
                                                <Button
                                                    variant='destructive'
                                                    size='sm'
                                                    onClick={() =>
                                                        handleDeleteSection(
                                                            topic.id,
                                                            section.id
                                                        )
                                                    }>
                                                    Delete
                                                </Button>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            <Button
                                variant='ghost'
                                size='sm'
                                onClick={() =>
                                    setFormState({
                                        mode: 'addSection',
                                        topicId: topic.id,
                                    })
                                }
                                className='text-cerulean-600 hover:text-cerulean-800 mt-4'>
                                + Add Sub Statement
                            </Button>
                        </div>
                    </div>
                ))}
            </div>

            {formState && (
                <Modal isOpen={!!formState} onClose={closeForm}>
                    <StatementForm
                        formState={formState}
                        onSaveTopic={handleSaveTopic}
                        onSaveSection={handleSaveSection}
                        onClose={closeForm}
                    />
                </Modal>
            )}
        </div>
    );
};


==================================================================
FILE: ./src/features/statement/components/StatementOfFaithForm.tsx
==================================================================

'use client';

import { useForm, SubmitHandler } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { useRouter } from 'next/navigation';

import { useCreateOrUpdateStatement } from '../queries';
import {
    statementFormDataSchema,
    StatementFormData,
    Statement,
} from '../schemas';

import { Button } from '@/src/components/ui/button';
import { StatementNodeForm } from './StatementNodeForm';

interface StatementOfFaithFormProps {
    statement?: Statement;
}

const prepareDefaultValues = (statement?: Statement): StatementFormData => {
    if (!statement) {
        return {
            topic: '',
            content: '',
            bibleReferences: '',
            displayOrder: 0,
            subStatements: [],
        };
    }

    const addSubStatementsArray = (st: Statement): StatementFormData => ({
        ...st,
        bibleReferences: st.bibleReferences || '',
        subStatements: st.subStatements
            ? st.subStatements.map(addSubStatementsArray)
            : [],
    });

    return addSubStatementsArray(statement);
};

export function StatementOfFaithForm({ statement }: StatementOfFaithFormProps) {
    const router = useRouter();
    const mutation = useCreateOrUpdateStatement();
    const isEditing = !!statement;

    const {
        control,
        handleSubmit,
        register,
        formState: { isSubmitting },
    } = useForm({
        resolver: zodResolver(statementFormDataSchema as any),
        defaultValues: prepareDefaultValues(statement),
    });

    const onSubmit: SubmitHandler<StatementFormData> = async data => {
        await mutation.mutateAsync(data, {
            onSuccess: () => {
                router.push('/dashboard/statement-of-faith');
            },
            onError: error => {
                console.error('Failed to save statement:', error);
            },
        });
    };

    return (
        <form onSubmit={handleSubmit(onSubmit)} className='space-y-6'>
            <StatementNodeForm
                control={control}
                register={register}
                path=''
                onRemove={() => {}}
                isRoot={true}
            />
            <div className='flex justify-end space-x-4'>
                <Button
                    type='button'
                    variant='outline'
                    onClick={() => router.push('/dashboard/statement-of-faith')}
                    disabled={isSubmitting}>
                    Cancel
                </Button>
                <Button type='submit' disabled={isSubmitting}>
                    {isSubmitting
                        ? isEditing
                            ? 'Updating...'
                            : 'Creating...'
                        : isEditing
                        ? 'Update Statement'
                        : 'Create Statement'}
                </Button>
            </div>
        </form>
    );
}


==================================================================
FILE: ./src/features/statement/components/Content.tsx
==================================================================

import React from 'react';
import { Statement } from '../types';
import { ScripturePill } from './ScripturePill';

interface ContentProps {
    statement: Statement;
}

export const Content: React.FC<ContentProps> = ({ statement }) => {
    const hasTopicContent =
        statement.content ||
        (statement.bibleReferences && statement.bibleReferences.length > 0);
    const hasSections =
        statement.subStatements && statement.subStatements.length > 0;

    return (
        <article className='space-y-8 max-w-none'>
            <header>
                <h1 className='text-2xl md:text-3xl font-bold tracking-tight text-dark-900'>
                    {statement.topic}
                </h1>
            </header>

            {/* Render Topic's own content if it exists */}
            {hasTopicContent && (
                <section className='space-y-4'>
                    {statement.content && (
                        <p className='text-sm md:text-base leading-relaxed text-dark-600'>
                            {statement.content}
                        </p>
                    )}
                    {statement.bibleReferences &&
                        statement.bibleReferences.length > 0 && (
                            <div className='flex flex-wrap gap-2'>
                                {statement.bibleReferences
                                    .split(';')
                                    .map((ref, index) => (
                                        <ScripturePill
                                            key={index}
                                            reference={ref.trim()}
                                        />
                                    ))}
                            </div>
                        )}
                </section>
            )}

            {/* Render a separator if there is topic content AND sections */}
            {hasTopicContent && hasSections && (
                <hr className='border-mystic-200' />
            )}

            {/* Render Sections if they exist */}
            {hasSections ? (
                <div className='space-y-6'>
                    {statement.subStatements!.map(section => (
                        <section
                            key={section.id}
                            className='scroll-mt-24'
                            id={section.id}>
                            <h2 className='text-lg md:text-xl font-semibold mb-3 text-dark-800'>
                                {section.topic}
                            </h2>
                            <p className='text-sm md:text-base leading-relaxed text-dark-600 mb-4'>
                                {section.content}
                            </p>
                            {section.bibleReferences &&
                                section.bibleReferences.length > 0 && (
                                    <div className='flex flex-wrap gap-2'>
                                        {section.bibleReferences
                                            .split(';')
                                            .map((ref, index) => (
                                                <ScripturePill
                                                    key={index}
                                                    reference={ref.trim()}
                                                />
                                            ))}
                                    </div>
                                )}
                        </section>
                    ))}
                </div>
            ) : (
                // Only show this message if there's no topic content either
                !hasTopicContent && (
                    <p className='text-dark-500'>
                        Content for this topic is not yet available.
                    </p>
                )
            )}
        </article>
    );
};


==================================================================
FILE: ./src/features/statement/components/StatementNodeForm.tsx
==================================================================

'use client';

import {
    useFieldArray,
    Control,
    UseFormRegister,
    useWatch,
} from 'react-hook-form';
import { Button } from '@/src/components/ui/button';
import { Input } from '@/src/components/ui/input';
import { Textarea } from '@/src/components/ui/textarea';
import { PlusCircle, Trash2 } from 'lucide-react';

interface StatementNodeFormProps {
    control: Control<any>;
    register: any;
    path: string;
    onRemove: () => void;
    isRoot?: boolean;
}

export function StatementNodeForm({
    control,
    register,
    path,
    onRemove,
    isRoot = false,
}: StatementNodeFormProps) {
    const { fields, append, remove } = useFieldArray({
        control,
        name: `${path}.subStatements` as any,
    });

    // Watch form values for preview
    const watchedValues = useWatch({
        control,
    });

    const addSubStatement = () => {
        // Calculate the next displayOrder based on existing fields
        const maxDisplayOrder =
            fields.length > 0
                ? Math.max(...fields.map((_, index) => index))
                : 0;
        append({
            topic: '',
            content: '',
            bibleReferences: '',
            displayOrder: maxDisplayOrder + 1,
            subStatements: [],
        });
    };

    return (
        <div
            className={`space-y-4 rounded-lg border p-4 ${
                isRoot ? 'border-gray-300' : 'border-gray-200 bg-gray-50/50'
            }`}>
            <div className='flex items-center justify-between'>
                <h3 className='font-medium'>
                    {isRoot ? 'Main Statement' : 'Sub-Statement'}
                </h3>
                {!isRoot && (
                    <Button
                        type='button'
                        variant='ghost'
                        size='icon'
                        onClick={onRemove}
                        className='text-red-500 hover:text-red-700 h-8 w-8'>
                        <Trash2 className='h-4 w-4' />
                    </Button>
                )}
            </div>

            <div className='w-full'>
                <label className='block text-sm font-medium mb-1'>Topic</label>
                <Input
                    {...register(`${path}.topic`)}
                    placeholder='e.g., The Scriptures'
                    className='w-full'
                />
            </div>

            <div className='w-full'>
                <label className='block text-sm font-medium mb-1'>
                    Content
                </label>
                <Textarea
                    {...register(`${path}.content`)}
                    placeholder='Enter the statement content...'
                    className='w-full min-h-[120px] resize-y'
                    rows={4}
                />
            </div>

            <div className='w-full'>
                <label className='block text-sm font-medium mb-1'>
                    Bible References
                </label>
                <Textarea
                    {...register(`${path}.bibleReferences`)}
                    placeholder='e.g., 2 Tim 3:16-17; John 1:1; Gen 1:1'
                    className='w-full min-h-[80px] resize-y'
                    rows={2}
                />
                <p className='text-xs text-gray-500 mt-1'>
                    Separate multiple references with semicolons (;)
                </p>
            </div>

            <div>
                <label className='block text-sm font-medium mb-1'>
                    Display Order
                </label>
                <Input
                    type='number'
                    {...register(`${path}.displayOrder`, {
                        valueAsNumber: true,
                    })}
                    placeholder='0'
                    className='w-full'
                />
            </div>

            {/* Preview Section */}
            {isRoot && (
                <div className='mt-6 p-4 bg-gray-50 rounded-lg border'>
                    <h4 className='text-sm font-semibold mb-3 text-gray-700'>
                        Preview
                    </h4>
                    <div className='space-y-2'>
                        {watchedValues?.topic && (
                            <h3 className='font-bold text-lg text-gray-900'>
                                {watchedValues.topic}
                            </h3>
                        )}
                        {watchedValues?.content && (
                            <p className='text-gray-800 leading-relaxed'>
                                {watchedValues.content}
                            </p>
                        )}
                        {watchedValues?.bibleReferences && (
                            <div className='mt-3'>
                                <p className='text-sm text-gray-600 italic'>
                                    {watchedValues.bibleReferences
                                        .split(';')
                                        .map((ref: string) => ref.trim())
                                        .filter((ref: string) => ref)
                                        .join('; ')}
                                </p>
                            </div>
                        )}
                    </div>
                </div>
            )}

            <div className='pl-4 border-l-2 border-dashed'>
                {isRoot && (
                    <h4 className='text-sm font-semibold mb-2'>
                        Sub-Statements
                    </h4>
                )}
                {fields.map((field, index) => (
                    <div key={field.id} className='mb-4'>
                        <StatementNodeForm
                            control={control}
                            register={register}
                            path={`${path}.subStatements.${index}`}
                            onRemove={() => remove(index)}
                        />
                    </div>
                ))}
                {isRoot && (
                    <Button
                        type='button'
                        variant='outline'
                        size='sm'
                        onClick={addSubStatement}>
                        <PlusCircle className='mr-2 h-4 w-4' />
                        Add Sub-Statement
                    </Button>
                )}
            </div>
        </div>
    );
}


==================================================================
FILE: ./src/features/statement/components/StatementOfFaithTable.tsx
==================================================================

'use client';

import {
    useReactTable,
    getCoreRowModel,
    flexRender,
    type ColumnDef,
    type Row,
} from '@tanstack/react-table';
import { useMemo } from 'react';
import { useRouter } from 'next/navigation';
import { useStatements, useUpdateStatementOrder } from '../queries';
import { Statement } from '@/src/generated/prisma';
import { Button } from '@/src/components/ui/button';
import { Input } from '@/src/components/ui/input';
import { GripVertical } from 'lucide-react';
import {
    DndContext,
    KeyboardSensor,
    PointerSensor,
    useSensor,
    useSensors,
    type DragEndEvent,
} from '@dnd-kit/core';
import {
    SortableContext,
    arrayMove,
    sortableKeyboardCoordinates,
    useSortable,
    verticalListSortingStrategy,
} from '@dnd-kit/sortable';
import { CSS } from '@dnd-kit/utilities';

// REFACTORED: DraggableRow is simplified. It no longer needs the complex `isUpdating` prop.
// Its only job is to provide the dnd-kit context to the table row.
const DraggableRow = ({ row }: { row: Row<Statement> }) => {
    const {
        attributes,
        listeners,
        setNodeRef,
        transform,
        transition,
        isDragging,
    } = useSortable({ id: row.original.id });

    const style: React.CSSProperties = {
        transform: CSS.Transform.toString(transform),
        transition: transition || 'none', // Prevent transition flicker on drop
        opacity: isDragging ? 0.8 : 1,
        zIndex: isDragging ? 1 : 0,
        position: 'relative',
    };

    return (
        <tr
            ref={setNodeRef}
            style={style}
            data-state={row.getIsSelected() && 'selected'}
            className='border-b bg-white'>
            {/* Drag Handle Cell */}
            <td className='px-4 py-2 align-middle w-[40px]'>
                <button
                    {...attributes}
                    {...listeners}
                    className='cursor-grab active:cursor-grabbing text-gray-500'>
                    <GripVertical size={18} />
                </button>
            </td>
            {/* Data Cells */}
            {row.getVisibleCells().map(cell => (
                <td key={cell.id} className='px-4 py-2 align-middle'>
                    {flexRender(cell.column.columnDef.cell, cell.getContext())}
                </td>
            ))}
        </tr>
    );
};

// Main Table Component
export function StatementOfFaithTable() {
    const router = useRouter();
    // CHANGE: Renamed `initialData` to `statements` for clarity. This is our single source of truth.
    const { data: statements = [], isLoading, error } = useStatements();
    const updateOrderMutation = useUpdateStatementOrder();

    // REMOVED: The local `useState` for `data` is gone. We now rely entirely on React Query's cache.
    // REMOVED: The `useState` for `updatingRowId` is gone. It's no longer needed.

    // CHANGE: `dataIds` is now derived directly from the query data.
    const dataIds = useMemo(() => statements.map(({ id }) => id), [statements]);

    const columns = useMemo<ColumnDef<Statement>[]>(
        () => [
            {
                accessorKey: 'topic',
                header: 'Topic',
                cell: ({ row }) => row.getValue('topic'),
            },
            {
                id: 'actions',
                header: 'Actions',
                cell: ({ row }) => (
                    <div className='flex space-x-2'>
                        <Button
                            variant='outline'
                            size='sm'
                            onClick={() =>
                                router.push(
                                    `/dashboard/statement-of-faith/${row.original.id}/edit`
                                )
                            }>
                            Edit
                        </Button>
                        <Button
                            variant='ghost'
                            size='sm'
                            onClick={() =>
                                router.push(
                                    `/dashboard/statement-of-faith/${row.original.id}`
                                )
                            }>
                            View
                        </Button>
                    </div>
                ),
            },
        ],
        [router]
    );

    const table = useReactTable({
        // CHANGE: The table's data is now directly from the `useStatements` hook.
        data: statements,
        columns,
        getCoreRowModel: getCoreRowModel(),
        getRowId: row => row.id,
    });

    const sensors = useSensors(
        useSensor(PointerSensor),
        useSensor(KeyboardSensor, {
            coordinateGetter: sortableKeyboardCoordinates,
        })
    );

    function handleDragEnd(event: DragEndEvent) {
        const { active, over } = event;
        if (over && active.id !== over.id) {
            // NOTE: We no longer call `setData` here.
            const oldIndex = dataIds.indexOf(active.id as string);
            const newIndex = dataIds.indexOf(over.id as string);

            // Calculate the new order based on the current state from the query.
            const reorderedData = arrayMove(statements, oldIndex, newIndex);

            const updatePayload = reorderedData.map((item, index) => ({
                id: item.id,
                displayOrder: index,
            }));

            // We only call the mutation. The `onMutate` in our hook will handle the UI update.
            updateOrderMutation.mutate(updatePayload);
        }
    }

    if (isLoading) return <div>Loading statements...</div>;
    if (error) return <div>Error loading statements: {error.message}</div>;

    return (
        <DndContext sensors={sensors} onDragEnd={handleDragEnd}>
            <div className='space-y-4 w-full'>
                <div className='flex items-center justify-between w-full'>
                    <Input
                        placeholder='Filter statements...'
                        className='flex-1 max-w-md'
                    />
                    <Button
                        onClick={() =>
                            router.push('/dashboard/statement-of-faith/new')
                        }>
                        Add Statement
                    </Button>
                </div>
                <div className='rounded-md border w-full'>
                    <table className='w-full'>
                        <thead className='bg-gray-50'>
                            {table.getHeaderGroups().map(headerGroup => (
                                <tr key={headerGroup.id}>
                                    {/* Header for Drag Handle */}
                                    <th
                                        style={{ width: '40px' }}
                                        className='border-b px-4 py-2 text-left'></th>
                                    {headerGroup.headers.map(header => (
                                        <th
                                            key={header.id}
                                            style={{ width: header.getSize() }}
                                            className='border-b px-4 py-2 text-left text-sm font-medium text-gray-600'>
                                            {flexRender(
                                                header.column.columnDef.header,
                                                header.getContext()
                                            )}
                                        </th>
                                    ))}
                                </tr>
                            ))}
                        </thead>
                        <tbody>
                            <SortableContext
                                items={dataIds}
                                strategy={verticalListSortingStrategy}>
                                {table.getRowModel().rows.map(row => (
                                    <DraggableRow key={row.id} row={row} />
                                ))}
                            </SortableContext>
                        </tbody>
                    </table>
                </div>
            </div>
        </DndContext>
    );
}


==================================================================
FILE: ./src/features/statement/components/StatementForm.tsx
==================================================================

import React, { useState } from 'react';
import { Statement } from '../types';

type FormState =
    | { mode: 'addTopic' }
    | { mode: 'editTopic'; topic: Statement }
    | { mode: 'addSection'; topicId: string }
    | { mode: 'editSection'; topicId: string; section: Statement };

interface StatementFormProps {
    formState: FormState;
    onSaveTopic: (topicData: {
        id?: string;
        topic: string;
        content: string;
        references: string;
    }) => void;
    onSaveSection: (
        topicId: string,
        sectionData: Omit<
            Statement,
            | 'id'
            | 'bibleReferences'
            | 'displayOrder'
            | 'createdAt'
            | 'updatedAt'
            | 'subStatements'
        > & { id?: string; references: string }
    ) => void;
    onClose: () => void;
}

export const StatementForm: React.FC<StatementFormProps> = ({
    formState,
    onSaveTopic,
    onSaveSection,
    onClose,
}) => {
    const isTopic =
        formState.mode === 'addTopic' || formState.mode === 'editTopic';
    const isEditing = formState.mode.startsWith('edit');

    const getInitialState = () => {
        if (formState.mode === 'editTopic') {
            return {
                topic: formState.topic.topic,
                content: formState.topic.content,
                references: formState.topic.bibleReferences || '',
            };
        }
        if (formState.mode === 'editSection') {
            return {
                topic: formState.section.topic,
                content: formState.section.content,
                references: formState.section.bibleReferences || '',
            };
        }
        return { topic: '', content: '', references: '' };
    };

    const [formData, setFormData] = useState(getInitialState());

    const handleChange = (
        e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>
    ) => {
        const { name, value } = e.target;
        setFormData(prev => ({ ...prev, [name]: value }));
    };

    const handleSubmit = (e: React.FormEvent) => {
        e.preventDefault();
        if (formState.mode === 'addTopic') {
            onSaveTopic({ ...formData });
        } else if (formState.mode === 'editTopic') {
            onSaveTopic({ id: formState.topic.id, ...formData });
        } else if (formState.mode === 'addSection') {
            onSaveSection(formState.topicId, formData);
        } else if (formState.mode === 'editSection') {
            onSaveSection(formState.topicId, {
                id: formState.section.id,
                ...formData,
            });
        }
        onClose();
    };

    const formTitle = `${isEditing ? 'Edit' : 'Add'} ${
        isTopic ? 'Root Statement' : 'Sub Statement'
    }`;

    return (
        <form onSubmit={handleSubmit}>
            <div className='p-6'>
                <h2
                    id='modal-title'
                    className='text-xl font-bold text-dark-900'>
                    {formTitle}
                </h2>
                <div className='space-y-4 mt-4'>
                    <div>
                        <label
                            htmlFor='topic'
                            className='block text-sm font-medium text-dark-700'>
                            Topic
                        </label>
                        <input
                            type='text'
                            name='topic'
                            id='topic'
                            value={formData.topic}
                            onChange={handleChange}
                            className='mt-1 block w-full px-3 py-2 bg-white border border-mystic-300 rounded-md shadow-sm focus:outline-none focus:ring-cerulean-500 focus:border-cerulean-500'
                            placeholder={
                                isTopic
                                    ? 'e.g. Of Salvation'
                                    : 'e.g. The Authority of God'
                            }
                            required
                        />
                    </div>
                    <div>
                        <label
                            htmlFor='content'
                            className='block text-sm font-medium text-dark-700'>
                            Content
                        </label>
                        <textarea
                            name='content'
                            id='content'
                            rows={4}
                            value={formData.content}
                            onChange={handleChange}
                            className='mt-1 block w-full px-3 py-2 bg-white border border-mystic-300 rounded-md shadow-sm focus:outline-none focus:ring-cerulean-500 focus:border-cerulean-500'
                            required
                        />
                    </div>
                    <div>
                        <label
                            htmlFor='references'
                            className='block text-sm font-medium text-dark-700'>
                            Bible References
                        </label>
                        <input
                            type='text'
                            name='references'
                            id='references'
                            value={formData.references}
                            onChange={handleChange}
                            className='mt-1 block w-full px-3 py-2 bg-white border border-mystic-300 rounded-md shadow-sm focus:outline-none focus:ring-cerulean-500 focus:border-cerulean-500'
                            placeholder='e.g. John 3:16; Romans 8:28'
                        />
                        <p className='mt-1 text-xs text-dark-500'>
                            Enter references separated by semi-colons.
                        </p>
                    </div>
                </div>
            </div>
            <div className='bg-mystic-50 px-6 py-3 flex justify-end space-x-3 rounded-b-xl'>
                <button
                    type='button'
                    onClick={onClose}
                    className='px-4 py-2 bg-white text-dark-700 font-semibold rounded-lg border border-mystic-300 hover:bg-mystic-100 transition-colors'>
                    Cancel
                </button>
                <button
                    type='submit'
                    className='px-4 py-2 bg-cerulean-500 text-white font-semibold rounded-lg hover:bg-cerulean-600 transition-colors shadow-sm'>
                    Save
                </button>
            </div>
        </form>
    );
};


==================================================================
FILE: ./src/features/statement/components/StatementOfFaithList.tsx
==================================================================

'use client';

import { useState } from 'react';
import { useStatements } from '../queries';
import { Statement } from '../types';

function BibleReferenceBadge({ reference }: { reference: string }) {
    return (
        <span className='inline-block bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full border border-blue-200 hover:bg-blue-200 cursor-pointer transition-colors mr-1 mb-1'>
            {reference}
        </span>
    );
}

function StatementNavigation({
    statements,
    selectedId,
    onSelect,
}: {
    statements: Statement[];
    selectedId: string;
    onSelect: (id: string) => void;
}) {
    const flattenStatements = (statements: Statement[]): Statement[] => {
        const result: Statement[] = [];
        statements.forEach(statement => {
            result.push(statement);
            if (statement.subStatements) {
                result.push(...flattenStatements(statement.subStatements));
            }
        });
        return result;
    };

    const allStatements = flattenStatements(statements);

    return (
        <div className='bg-white rounded-lg shadow-sm border p-4 h-fit'>
            <h3 className='font-semibold text-gray-900 mb-3'>
                Statement of Faith
            </h3>
            <nav className='space-y-1 max-h-96 overflow-y-auto'>
                {allStatements.map(statement => (
                    <button
                        key={statement.id}
                        onClick={() => onSelect(statement.id)}
                        className={`w-full text-left px-3 py-2 text-sm rounded-md transition-colors ${
                            selectedId === statement.id
                                ? 'bg-blue-50 text-blue-700 border-l-4 border-blue-500'
                                : 'text-gray-700 hover:bg-gray-50 hover:text-gray-900'
                        }`}>
                        {statement.topic}
                    </button>
                ))}
            </nav>
        </div>
    );
}

function StatementContent({ statement }: { statement: Statement }) {
    const extractBibleReferences = (content: string): string[] => {
        const matches = content.match(/([1-3]\s*[A-Za-z]+)\s*(\d+):?(\d*)/g);
        return matches || [];
    };

    const renderContentWithReferences = (content: string) => {
        const references = extractBibleReferences(content);
        let processedContent = content;

        // Replace common Bible reference patterns with badge placeholders
        references.forEach(ref => {
            const badge = `<bible-ref>${ref}</bible-ref>`;
            processedContent = processedContent.replace(ref, badge);
        });

        const parts = processedContent.split('<bible-ref>');

        return parts.map((part, index) => {
            if (index === 0) return part;
            const ref = references[index - 1];
            return (
                <span key={index}>
                    <BibleReferenceBadge reference={ref} />
                    {part}
                </span>
            );
        });
    };

    return (
        <div className='bg-white rounded-lg shadow-sm border p-6'>
            <h2 className='text-2xl font-bold text-gray-900 mb-4'>
                {statement.topic}
            </h2>
            <div className='prose prose-gray max-w-none'>
                <div className='text-gray-700 leading-relaxed mb-4'>
                    {renderContentWithReferences(statement.content)}
                </div>

                {statement.bibleReferences && (
                    <div className='mt-4'>
                        <h4 className='text-sm font-semibold text-gray-600 mb-2'>
                            Additional References:
                        </h4>
                        <div className='flex flex-wrap gap-1'>
                            {statement.bibleReferences
                                .split(',')
                                .map((ref, index) => (
                                    <BibleReferenceBadge
                                        key={index}
                                        reference={ref.trim()}
                                    />
                                ))}
                        </div>
                    </div>
                )}
            </div>
        </div>
    );
}

function StatementItem({ statement }: { statement: Statement }) {
    return (
        <div className='mb-4'>
            <StatementContent statement={statement} />
            {statement.subStatements && statement.subStatements.length > 0 && (
                <div className='ml-6 mt-4 space-y-4'>
                    {statement.subStatements.map(sub => (
                        <StatementItem key={sub.id} statement={sub} />
                    ))}
                </div>
            )}
        </div>
    );
}

export function StatementOfFaithList() {
    const { data: statements, isLoading, error } = useStatements();
    const [selectedId, setSelectedId] = useState<string>('');

    if (isLoading)
        return (
            <div className='flex items-center justify-center min-h-64'>
                <div className='text-gray-500'>Loading...</div>
            </div>
        );

    if (error)
        return (
            <div className='flex items-center justify-center min-h-64'>
                <div className='text-red-500'>Error: {error.message}</div>
            </div>
        );

    const statementsArray = (statements as any) || [];

    // Set default selected statement
    if (!selectedId && statementsArray.length > 0) {
        const firstStatement = statementsArray[0];
        if (firstStatement && !firstStatement.subStatements?.length) {
            setSelectedId(firstStatement.id);
        }
    }

    const flattenStatements = (statements: Statement[]): Statement[] => {
        const result: Statement[] = [];
        statements.forEach(statement => {
            result.push(statement);
            if (statement.subStatements) {
                result.push(...flattenStatements(statement.subStatements));
            }
        });
        return result;
    };

    const allStatements = flattenStatements(statementsArray);
    const selectedStatement =
        allStatements.find(s => s.id === selectedId) || allStatements[0];

    return (
        <div className='grid grid-cols-1 lg:grid-cols-3 gap-6'>
            {/* Navigation Sidebar */}
            <div className='lg:col-span-1'>
                <StatementNavigation
                    statements={statementsArray}
                    selectedId={selectedId}
                    onSelect={setSelectedId}
                />
            </div>

            {/* Content Area */}
            <div className='lg:col-span-2'>
                {selectedStatement ? (
                    <StatementContent statement={selectedStatement} />
                ) : (
                    <div className='bg-white rounded-lg shadow-sm border p-6'>
                        <div className='text-gray-500 text-center'>
                            Select a statement from the navigation to view its
                            content.
                        </div>
                    </div>
                )}
            </div>
        </div>
    );
}


==================================================================
FILE: ./src/features/statement/components/Sidebar.tsx
==================================================================

import React from 'react';
import { Statement } from '../types';

interface SidebarProps {
    statements: Statement[];
    selectedTopicId: string;
    onSelectTopic: (topicId: string) => void;
    onClose: () => void;
}

export const Sidebar: React.FC<SidebarProps> = ({
    statements,
    selectedTopicId,
    onSelectTopic,
    onClose,
}) => {
    // REMOVED: The flattenStatements function is no longer needed as we only want to show top-level items.

    return (
        <div className='h-full flex flex-col'>
            {/* Mobile-only header with close button */}
            <div className='md:hidden p-4 border-b border-mystic-300 flex justify-between items-center shrink-0'>
                <h2 className='text-lg font-bold text-dark-900'>Topics</h2>
                <button
                    onClick={onClose}
                    className='p-2 -mr-2 text-dark-500 hover:text-dark-800 hover:bg-mystic-100 rounded-full transition-colors'
                    aria-label='Close navigation menu'>
                    <svg
                        className='w-6 h-6'
                        fill='none'
                        stroke='currentColor'
                        viewBox='0 0 24 24'
                        xmlns='http://www.w3.org/2000/svg'>
                        <path
                            strokeLinecap='round'
                            strokeLinejoin='round'
                            strokeWidth={2}
                            d='M6 18L18 6M6 6l12 12'
                        />
                    </svg>
                </button>
            </div>

            {/* The nav component now iterates directly over the top-level statements */}
            <nav className='overflow-y-auto p-4 md:p-0 md:sticky md:top-12'>
                <h2 className='hidden md:block text-sm font-semibold uppercase text-dark-500 tracking-wider mb-4'>
                    Statement of Faith
                </h2>
                <ul className=''>
                    {/* CHANGED: We now map over the `statements` prop directly, not the flattened list. */}
                    {statements.map(statement => (
                        <li key={statement.id}>
                            <button
                                onClick={() => onSelectTopic(statement.id)}
                                className={`w-full text-left text-sm px-3 py-1 rounded-md transition-colors duration-200 text-dark-700 ${
                                    selectedTopicId === statement.id
                                        ? 'bg-cerulean-100 text-cerulean-800 font-semibold'
                                        : 'hover:bg-mystic-100 hover:text-dark-900'
                                }`}>
                                {statement.topic}
                            </button>
                        </li>
                    ))}
                </ul>
            </nav>
        </div>
    );
};


==================================================================
FILE: ./src/features/statement/components/Modal.tsx
==================================================================

import React, { useEffect } from 'react';

interface ModalProps {
    isOpen: boolean;
    onClose: () => void;
    children: React.ReactNode;
}

export const Modal: React.FC<ModalProps> = ({ isOpen, onClose, children }) => {
    useEffect(() => {
        const handleEsc = (event: KeyboardEvent) => {
            if (event.key === 'Escape') {
                onClose();
            }
        };
        window.addEventListener('keydown', handleEsc);
        return () => {
            window.removeEventListener('keydown', handleEsc);
        };
    }, [onClose]);

    if (!isOpen) return null;

    return (
        <div
            className='fixed inset-0 bg-black/50 z-50 flex justify-center items-center p-4'
            aria-labelledby='modal-title'
            role='dialog'
            aria-modal='true'>
            <div
                className='fixed inset-0'
                onClick={onClose}
                aria-hidden='true'></div>
            <div className='bg-white rounded-xl shadow-2xl w-full max-w-lg z-10 transform transition-all'>
                {children}
            </div>
        </div>
    );
};


==================================================================
FILE: ./src/features/statement/actions.ts
==================================================================

'use server';

import { revalidateTag } from 'next/cache';
import { Prisma } from '@/src/generated/prisma';
import { prisma } from '@/src/lib/prisma';
import { z } from 'zod';
import {
    statementFormDataSchema,
    StatementFormData,
    Statement,
} from './schemas';
import type { Statement as PrismaStatement } from '@/src/generated/prisma';

// Helper Types for Prisma's return value which includes sub-statement relations
type StatementWithSubStatements = PrismaStatement & {
    subStatements: StatementLevel2[];
};

type StatementLevel2 = PrismaStatement & {
    subStatements: StatementLevel3[];
};

type StatementLevel3 = PrismaStatement & {
    subStatements: StatementLevel4[];
};

type StatementLevel4 = PrismaStatement & {
    subStatements: PrismaStatement[];
};

/**
 * A recursive helper function that safely casts the data returned from Prisma
 * into our strict, recursive `Statement` application type. This ensures that
 * every node in the tree has a `subStatements` array, satisfying TypeScript.
 */
function toAppStatement(
    prismaStatement: StatementWithSubStatements
): Statement {
    return {
        ...prismaStatement,
        subStatements: prismaStatement.subStatements.map(toAppStatement),
    };
}

const updateOrderSchema = z.array(
    z.object({
        id: z.string().cuid(),
        displayOrder: z.number(),
    })
);

// A reusable, deeply nested include object for fetching the entire statement tree.
const recursiveStatementInclude: Prisma.StatementInclude = {
    subStatements: {
        orderBy: { displayOrder: 'asc' },
        include: {
            subStatements: {
                orderBy: { displayOrder: 'asc' },
                include: {
                    subStatements: {
                        orderBy: { displayOrder: 'asc' },
                        include: {
                            subStatements: {
                                orderBy: { displayOrder: 'asc' },
                            },
                        },
                    },
                },
            },
        },
    },
};

export async function updateStatementOrder(
    items: z.infer<typeof updateOrderSchema>
) {
    const validation = updateOrderSchema.safeParse(items);
    if (!validation.success) {
        return {
            success: false,
            error: 'Invalid input for reordering.',
        };
    }

    try {
        await prisma.$transaction(
            validation.data.map(item =>
                prisma.statement.update({
                    where: { id: item.id },
                    data: { displayOrder: item.displayOrder },
                })
            )
        );

        revalidateTag('statements');
        return { success: true };
    } catch (error) {
        console.error('Failed to update statement order:', error instanceof Error ? error.message : 'Unknown error');
        return {
            success: false,
            error: 'Database operation failed during reorder.',
        };
    }
}

export async function getStatements(): Promise<
    { success: true; data: Statement[] } | { success: false; error: string }
> {
    try {
        const statements = await prisma.statement.findMany({
            where: { parentId: null },
            include: recursiveStatementInclude,
            orderBy: { displayOrder: 'asc' },
        });
        return {
            success: true,
            data: (statements as unknown as StatementWithSubStatements[]).map(
                toAppStatement
            ),
        };
    } catch (error) {
        console.error('Failed to fetch statements:', error instanceof Error ? error.message : 'Unknown error');
        return { success: false, error: 'Failed to fetch statements' };
    }
}

export async function getStatement(
    id: string
): Promise<
    | { success: true; data: Statement }
    | { success: false; error: string; data: null }
> {
    try {
        const statement = await prisma.statement.findUnique({
            where: { id },
            include: recursiveStatementInclude,
        });

        if (!statement) {
            return { success: false, error: 'Statement not found', data: null };
        }
        return {
            success: true,
            data: toAppStatement(
                statement as unknown as StatementWithSubStatements
            ),
        };
    } catch (error) {
        console.error(`Failed to fetch statement ${id}:`, error instanceof Error ? error.message : 'Unknown error');
        return {
            success: false,
            error: 'Failed to fetch statement',
            data: null,
        };
    }
}

/**
 * A robust, transactional action to create or update a statement and its entire
 * nested tree of sub-statements.
 */
export async function createOrUpdateStatement(input: StatementFormData) {
    const validation = statementFormDataSchema.safeParse(input);
    if (!validation.success) {
        return {
            success: false,
            error: `Invalid input data: ${validation.error.message}`,
        };
    }

    const data = validation.data;

    try {
        const result = await prisma.$transaction(async tx => {
            const processNode = async (
                node: StatementFormData,
                parentId: string | null
            ): Promise<Statement> => {
                const { subStatements, ...statementData } = node;

                const dataForDb = {
                    topic: statementData.topic,
                    content: statementData.content,
                    bibleReferences: statementData.bibleReferences || null,
                    displayOrder: statementData.displayOrder,
                    parentId,
                };

                let processedStatement: StatementWithSubStatements;

                if (node.id) {
                    processedStatement = (await tx.statement.update({
                        where: { id: node.id },
                        data: dataForDb,
                        include: { subStatements: true },
                    })) as StatementWithSubStatements;
                } else {
                    processedStatement = (await tx.statement.create({
                        data: dataForDb,
                        include: { subStatements: true },
                    })) as StatementWithSubStatements;
                }

                const existingSubIds = processedStatement.subStatements.map(
                    s => s.id
                );
                const incomingSubIds = subStatements
                    .map(sub => sub.id)
                    .filter((id): id is string => !!id);

                const idsToDelete = existingSubIds.filter(
                    id => !incomingSubIds.includes(id)
                );
                if (idsToDelete.length > 0) {
                    await tx.statement.deleteMany({
                        where: { id: { in: idsToDelete } },
                    });
                }

                const processedChildren: Statement[] = [];
                for (const [index, subStatement] of subStatements.entries()) {
                    const child = await processNode(
                        { ...subStatement, displayOrder: index },
                        processedStatement.id
                    );
                    processedChildren.push(child);
                }

                const { subStatements: _, ...restOfProcessedStatement } =
                    processedStatement;

                return {
                    ...restOfProcessedStatement,
                    subStatements: processedChildren,
                };
            };

            return await processNode(data, null);
        }, {
            timeout: 20000, // 20 seconds timeout for complex nested operations
        });

        revalidateTag('statements');
        return { success: true, data: result };
    } catch (error) {
        console.error('Failed to create or update statement:', error instanceof Error ? error.message : 'Unknown error');
        return { success: false, error: 'Database operation failed.' };
    }
}

export async function deleteStatement(id: string) {
    try {
        await prisma.statement.delete({
            where: { id },
        });

        revalidateTag('statements');
        return { success: true };
    } catch (error) {
        console.error(`Failed to delete statement ${id}:`, error instanceof Error ? error.message : 'Unknown error');
        return { success: false, error: 'Failed to delete statement' };
    }
}


==================================================================
FILE: ./src/features/users/queries.ts
==================================================================

'use client';
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';
import { queryKeys } from '../../lib/queryKeys';
import { getUsers, updateUser, deleteUser } from './actions';
import { registerUserAction } from '@/src/features/auth/actions';
import { CreateUserFormValues } from './model/user.schema';
import { toast } from 'sonner';

export function useUsers() {
    return useQuery({
        queryKey: queryKeys.users.lists(),
        queryFn: async () => {
            const result = await getUsers();
            if (!result.success) throw new Error(result.error);
            return result.data;
        },
    });
}

// 10x IMPROVEMENT: This hook now correctly handles server action responses.
export function useRegisterUser() {
    const queryClient = useQueryClient();

    return useMutation({
        mutationFn: async (data: CreateUserFormValues) => {
            const result = await registerUserAction(data);

            // If the server action indicates failure, we THROW an error.
            // This is what tells React Query the mutation has failed.
            if (!result.success) {
                throw new Error(result.error || 'An unknown error occurred.');
            }

            return result.data; // Return the successful data
        },
        onSuccess: () => {
            toast.success(
                'Admin user created successfully. You can now log in.'
            );
            // Invalidate the users list to refetch if needed elsewhere
            queryClient.invalidateQueries({
                queryKey: queryKeys.users.lists(),
            });
        },
        onError: (error: Error) => {
            // Now, this will correctly fire and we can show a toast.
            toast.error(`Registration Failed: ${error.message}`);
            console.error('Registration failed:', error.message);
        },
    });
}

export function useUpdateUser() {
    const queryClient = useQueryClient();

    return useMutation({
        mutationFn: ({
            id,
            data,
        }: {
            id: string;
            data: { name?: string; email?: string; role?: string };
        }) => updateUser(id, data),
        onSuccess: (data, variables) => {
            queryClient.invalidateQueries({
                queryKey: queryKeys.users.lists(),
            });
            queryClient.invalidateQueries({
                queryKey: queryKeys.users.detail(variables.id),
            });
        },
    });
}

export function useDeleteUser() {
    const queryClient = useQueryClient();

    return useMutation({
        mutationFn: deleteUser,
        onSuccess: () => {
            queryClient.invalidateQueries({ queryKey: queryKeys.users.all });
        },
    });
}


==================================================================
FILE: ./src/features/users/types.ts
==================================================================

export interface User {
    id: string;
    name: string | null;
    email: string;
    role: string;
    createdAt: Date;
}

export interface CreateUserInput {
    name: string;
    email: string;
    password: string;
}

export interface UpdateUserInput {
    name?: string;
    email?: string;
}


==================================================================
FILE: ./src/features/users/components/CreateUserForm.tsx
==================================================================

'use client';

import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { useRegisterUser } from '../queries';
import { createUserSchema, CreateUserFormValues } from '../model/user.schema';
import { Button } from '@/src/components/ui/button';
import { Input } from '@/src/components/ui/input';

export function CreateUserForm() {
    const {
        register,
        handleSubmit,
        reset,
        formState: { errors, isSubmitting },
    } = useForm<CreateUserFormValues>({
        resolver: zodResolver(createUserSchema),
    });

    const registerUserMutation = useRegisterUser();

    const onSubmit = (data: CreateUserFormValues) => {
        registerUserMutation.mutate(data, {
            onSuccess: () => {
                reset();
                // Optionally show a success toast here
            },
            // onError is handled globally in the useMutation hook
        });
    };

    const isPending = isSubmitting || registerUserMutation.isPending;

    return (
        <form
            onSubmit={handleSubmit(onSubmit)}
            className='space-y-4 max-w-md p-4 border rounded-lg'>
            <h3 className='text-lg font-semibold'>Create a New User</h3>
            <div>
                <label htmlFor='name'>Name</label>
                <Input
                    id='name'
                    {...register('name')}
                    placeholder='John Doe'
                    aria-invalid={!!errors.name}
                />
                {errors.name && (
                    <p className='text-sm text-red-600 mt-1'>
                        {errors.name.message}
                    </p>
                )}
            </div>
            <div>
                <label htmlFor='email'>Email</label>
                <Input
                    id='email'
                    type='email'
                    {...register('email')}
                    placeholder='user@example.com'
                    aria-invalid={!!errors.email}
                />
                {errors.email && (
                    <p className='text-sm text-red-600 mt-1'>
                        {errors.email.message}
                    </p>
                )}
            </div>
            <div>
                <label htmlFor='password'>Password</label>
                <Input
                    id='password'
                    type='password'
                    {...register('password')}
                    aria-invalid={!!errors.password}
                />
                {errors.password && (
                    <p className='text-sm text-red-600 mt-1'>
                        {errors.password.message}
                    </p>
                )}
            </div>
            <div>
                <label htmlFor='confirmPassword'>Confirm Password</label>
                <Input
                    id='confirmPassword'
                    type='password'
                    {...register('confirmPassword')}
                    aria-invalid={!!errors.confirmPassword}
                />
                {errors.confirmPassword && (
                    <p className='text-sm text-red-600 mt-1'>
                        {errors.confirmPassword.message}
                    </p>
                )}
            </div>

            {registerUserMutation.isError && (
                <p className='text-sm text-red-600 mt-1'>
                    {registerUserMutation.error.message}
                </p>
            )}

            <Button type='submit' disabled={isPending}>
                {isPending ? 'Creating User...' : 'Create User'}
            </Button>
        </form>
    );
}


==================================================================
FILE: ./src/features/users/components/UsersTable.tsx
==================================================================

'use client';

import {
    useReactTable,
    getCoreRowModel,
    getSortedRowModel,
    getFilteredRowModel,
    getPaginationRowModel,
    flexRender,
    type ColumnDef,
    type SortingState,
    type ColumnFiltersState,
} from '@tanstack/react-table';
import { useState } from 'react';
import { useRouter } from 'next/navigation';
import { useUsers, useDeleteUser, useUpdateUser } from '../queries';
import { User } from '../types';
import { Button } from '@/src/components/ui/button';
import { Input } from '@/src/components/ui/input';

export function UsersTable() {
    const router = useRouter();
    const { data: users, isLoading, error } = useUsers();
    const deleteUser = useDeleteUser();
    const updateUser = useUpdateUser();
    const [sorting, setSorting] = useState<SortingState>([]);
    const [columnFilters, setColumnFilters] = useState<ColumnFiltersState>([]);

    const columns: ColumnDef<User>[] = [
        {
            accessorKey: 'name',
            header: 'Name',
            cell: ({ row }) => row.getValue('name') || 'N/A',
        },
        {
            accessorKey: 'email',
            header: 'Email',
            cell: ({ row }) => row.getValue('email'),
        },
        {
            accessorKey: 'role',
            header: 'Role',
            cell: ({ row }) => row.getValue('role'),
        },

        // {
        //     id: 'actions',
        //     header: 'Actions',
        //     cell: ({ row }) => (
        //         <div className='flex space-x-2'>
        //             <Button
        //                 variant='outline'
        //                 size='sm'
        //                 onClick={() =>
        //                     updateUser.mutate({
        //                         id: row.original.id,
        //                         data: {
        //                             role:
        //                                 row.original.role === 'ADMIN'
        //                                     ? 'USER'
        //                                     : 'ADMIN',
        //                         },
        //                     })
        //                 }
        //                 disabled={updateUser.isPending}>
        //                 {row.original.role === 'ADMIN' ? 'Demote' : 'Promote'}
        //             </Button>
        //             <Button
        //                 variant='outline'
        //                 size='sm'
        //                 onClick={() =>
        //                     router.push(
        //                         `/dashboard/users/${row.original.id}/edit`
        //                     )
        //                 }>
        //                 Edit
        //             </Button>
        //             <Button
        //                 variant='destructive'
        //                 size='sm'
        //                 onClick={() => deleteUser.mutate(row.original.id)}
        //                 disabled={deleteUser.isPending}>
        //                 Delete
        //             </Button>
        //         </div>
        //     ),
        // },
    ];

    const table = useReactTable({
        data: users || [],
        columns,
        getCoreRowModel: getCoreRowModel(),
        getSortedRowModel: getSortedRowModel(),
        getFilteredRowModel: getFilteredRowModel(),
        getPaginationRowModel: getPaginationRowModel(),
        onSortingChange: setSorting,
        onColumnFiltersChange: setColumnFilters,
        state: {
            sorting,
            columnFilters,
        },
    });

    if (isLoading) return <div>Loading...</div>;
    if (error) return <div>Error: {error.message}</div>;

    return (
        <div className='space-y-4'>
            <div className='flex items-center justify-between'>
                <Input
                    placeholder='Filter users by email...'
                    value={
                        (table
                            .getColumn('email')
                            ?.getFilterValue() as string) ?? ''
                    }
                    onChange={event =>
                        table
                            .getColumn('email')
                            ?.setFilterValue(event.target.value)
                    }
                    className='max-w-sm'
                />
            </div>
            <div className='rounded-md border'>
                <table className='w-full'>
                    <thead>
                        {table.getHeaderGroups().map(headerGroup => (
                            <tr key={headerGroup.id}>
                                {headerGroup.headers.map(header => (
                                    <th
                                        key={header.id}
                                        className='border-b px-4 py-2 text-left'>
                                        {header.isPlaceholder
                                            ? null
                                            : flexRender(
                                                  header.column.columnDef
                                                      .header,
                                                  header.getContext()
                                              )}
                                    </th>
                                ))}
                            </tr>
                        ))}
                    </thead>
                    <tbody>
                        {table.getRowModel().rows?.length ? (
                            table.getRowModel().rows.map(row => (
                                <tr
                                    key={row.id}
                                    data-state={
                                        row.getIsSelected() && 'selected'
                                    }
                                    className='border-b'>
                                    {row.getVisibleCells().map(cell => (
                                        <td key={cell.id} className='px-4 py-2'>
                                            {flexRender(
                                                cell.column.columnDef.cell,
                                                cell.getContext()
                                            )}
                                        </td>
                                    ))}
                                </tr>
                            ))
                        ) : (
                            <tr>
                                <td
                                    colSpan={columns.length}
                                    className='h-24 text-center'>
                                    No users found.
                                </td>
                            </tr>
                        )}
                    </tbody>
                </table>
            </div>
            <div className='flex items-center justify-end space-x-2 py-4'>
                <Button
                    variant='outline'
                    size='sm'
                    onClick={() => table.previousPage()}
                    disabled={!table.getCanPreviousPage()}>
                    Previous
                </Button>
                <Button
                    variant='outline'
                    size='sm'
                    onClick={() => table.nextPage()}
                    disabled={!table.getCanNextPage()}>
                    Next
                </Button>
            </div>
        </div>
    );
}


==================================================================
FILE: ./src/features/users/components/UserList.tsx
==================================================================

'use client';

import { useUsers, useDeleteUser } from '../queries';

export function UserList() {
    const { data: users, isLoading, error } = useUsers();
    const deleteUser = useDeleteUser();

    if (isLoading) return <div>Loading...</div>;
    if (error) return <div>Error: {error.message}</div>;

    return (
        <div>
            <h2>Users</h2>
            <ul>
                {users?.map(user => (
                    <li key={user.id}>
                        {user.name} - {user.email}
                        <button
                            onClick={() => deleteUser.mutate(user.id)}
                            disabled={deleteUser.isPending}>
                            Delete
                        </button>
                    </li>
                ))}
            </ul>
        </div>
    );
}


==================================================================
FILE: ./src/features/users/actions.ts
==================================================================

'use server';

import { revalidateTag } from 'next/cache';
import { PrismaClient } from '../../generated/prisma';
import { prisma } from '@/src/lib/prisma';

export async function getUsers() {
    try {
        const users = await prisma.user.findMany({
            select: {
                id: true,
                name: true,
                email: true,
                role: true,
                createdAt: true,
            },
        });
        return { success: true, data: users };
    } catch (error) {
        console.error(
            'Failed to fetch users:',
            error instanceof Error ? error.message : 'Unknown error'
        );
        return { success: false, error: 'Failed to fetch users' };
    }
}

// REMOVED: The insecure createUser function has been deleted.
// User creation is now handled exclusively by `src/features/auth/actions.ts`
// which leverages `better-auth` for secure password hashing.

export async function updateUser(
    id: string,
    data: { name?: string; email?: string; role?: string }
) {
    // Note: Add Zod validation here for production-grade robustness
    try {
        const user = await prisma.user.update({
            where: { id },
            data,
            select: {
                id: true,
                name: true,
                email: true,
                role: true,
                createdAt: true,
            },
        });

        revalidateTag('users');
        return { success: true, data: user };
    } catch (error) {
        console.error(
            'Failed to update user:',
            error instanceof Error ? error.message : 'Unknown error'
        );
        return { success: false, error: 'Failed to update user' };
    }
}

export async function deleteUser(id: string) {
    try {
        await prisma.user.delete({
            where: { id },
        });

        revalidateTag('users');
        return { success: true };
    } catch (error) {
        console.error(
            'Failed to delete user:',
            error instanceof Error ? error.message : 'Unknown error'
        );
        return { success: false, error: 'Failed to delete user' };
    }
}


==================================================================
FILE: ./src/features/users/model/user.schema.ts
==================================================================

import { z } from 'zod';

export const createUserSchema = z
    .object({
        name: z.string().min(2, 'Name must be at least 2 characters long'),
        email: z.string().email('Please enter a valid email address'),
        password: z
            .string()
            .min(8, 'Password must be at least 8 characters long'),
        confirmPassword: z.string(),
    })
    .refine(data => data.password === data.confirmPassword, {
        message: "Passwords don't match",
        path: ['confirmPassword'], // path of error
    });

export type CreateUserFormValues = z.infer<typeof createUserSchema>;


==================================================================
FILE: ./src/styles/custom-shape-divider.css
==================================================================

.custom-shape-divider-top-1692512740 {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    overflow: hidden;
    line-height: 0;
}

.custom-shape-divider-top-1692512740 svg {
    position: relative;
    display: block;
    width: calc(130% + 1.3px);
    height: 45px;
    transform: rotateY(180deg);
}

.custom-shape-divider-top-1692512740 .shape-fill {
    fill: #ffffff;
}

.custom-shape-divider-bottom-1692513574 {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    overflow: hidden;
    line-height: 0;
    transform: rotate(180deg);
}

.custom-shape-divider-bottom-1692513574 svg {
    position: relative;
    display: block;
    width: calc(168% + 1.3px);
    height: 68px;
}

.custom-shape-divider-bottom-1692513574 .shape-fill {
    fill: #383d41;
}


==================================================================
FILE: ./src/styles/globals.css
==================================================================

@import 'tailwindcss';
@import 'tw-animate-css';

@custom-variant dark (&:is(.dark *));

:root {
    --background: oklch(1 0 0);
    --foreground: oklch(0.145 0 0);
    --radius: 0.625rem;
    --card: oklch(1 0 0);
    --card-foreground: oklch(0.145 0 0);
    --popover: oklch(1 0 0);
    --popover-foreground: oklch(0.145 0 0);
    --primary: oklch(0.205 0 0);
    --primary-foreground: oklch(0.985 0 0);
    --secondary: oklch(0.97 0 0);
    --secondary-foreground: oklch(0.205 0 0);
    --muted: oklch(0.97 0 0);
    --muted-foreground: oklch(0.556 0 0);
    --accent: oklch(0.97 0 0);
    --accent-foreground: oklch(0.205 0 0);
    --destructive: oklch(0.577 0.245 27.325);
    --border: oklch(0.922 0 0);
    --input: oklch(0.922 0 0);
    --ring: oklch(0.708 0 0);
    --chart-1: oklch(0.646 0.222 41.116);
    --chart-2: oklch(0.6 0.118 184.704);
    --chart-3: oklch(0.398 0.07 227.392);
    --chart-4: oklch(0.828 0.189 84.429);
    --chart-5: oklch(0.769 0.188 70.08);
    --sidebar: hsl(0 0% 98%);
    --sidebar-foreground: hsl(240 5.3% 26.1%);
    --sidebar-primary: hsl(240 5.9% 10%);
    --sidebar-primary-foreground: hsl(0 0% 98%);
    --sidebar-accent: hsl(240 4.8% 95.9%);
    --sidebar-accent-foreground: hsl(240 5.9% 10%);
    --sidebar-border: hsl(220 13% 91%);
    --sidebar-ring: hsl(217.2 91.2% 59.8%);
}

@theme inline {
    --color-background: var(--background);
    --color-foreground: var(--foreground);
    --font-sans: var(--font-geist-sans);
    --font-mono: var(--font-geist-mono);

    /* Custom font size 5xl */
    --font-size-5xl: 2.875rem;
    --leading-5xl: 2.25rem;
    --tracking-5xl: -0.02em;
    --font-weight-5xl: 500;

    /* Custom text color 5xl */
    /*--color-5xl: #2b2c2c*/

    /* Custom background images */
    --background-image-nav: url('/images/compass.png');
    --background-image-verse: url('/images/verse.png');

    /* Custom colors */
    --color-dark-900: #3f4749;
    --color-dark-800: #4a5456;
    --color-dark-700: #555d60;
    --color-dark-600: #666e71;
    --color-dark-500: #777f82;
    --color-dark-400: #888f93;
    --color-dark-300: #999fa4;
    --color-dark-200: #aab7af;
    --color-dark-100: #bbbead;

    --color-mystic-50: #f5f8fa;
    --color-mystic-100: #e1e9ed;
    --color-mystic-200: #d3dfe4;
    --color-mystic-300: #acc5cd;
    --color-mystic-400: #7ea5b2;
    --color-mystic-500: #5e8b99;
    --color-mystic-600: #4a717f;
    --color-mystic-700: #3d5b67;
    --color-mystic-800: #354d57;
    --color-mystic-900: #30424a;
    --color-mystic-950: #202b31;

    --color-cerulean-50: #f0faff;
    --color-cerulean-100: #dff3ff;
    --color-cerulean-200: #b8eaff;
    --color-cerulean-300: #79daff;
    --color-cerulean-400: #32c8fe;
    --color-cerulean-500: #07a5df;
    --color-cerulean-600: #008fcd;
    --color-cerulean-700: #0071a6;
    --color-cerulean-800: #036089;
    --color-cerulean-900: #094f71;
    --color-cerulean-950: #06324b;

    --color-mako-50: #f4f6f7;
    --color-mako-100: #e4e8e9;
    --color-mako-200: #cbd2d6;
    --color-mako-300: #a7b2b9;
    --color-mako-400: #7b8a95;
    --color-mako-500: #606f7a;
    --color-mako-600: #535e67;
    --color-mako-700: #475057;
    --color-mako-800: #40464c;
    --color-mako-900: #383d41;

    --color-cornflower-50: #f3f8fc;
    --color-cornflower-100: #e5f0f9;
    --color-cornflower-200: #c6e1f1;
    --color-cornflower-300: #8fc7e5;
    --color-cornflower-400: #59add7;
    --color-cornflower-500: #3493c3;
    --color-cornflower-600: #2476a5;
    --color-cornflower-700: #1e5e86;
    --color-cornflower-800: #1d506f;
    --color-cornflower-900: #1d435d;
    --color-cornflower-950: #132c3e;

    --color-sirocco-50: #f7f8f7;
    --color-sirocco-100: #f1f2f1;
    --color-sirocco-200: #e4e6e6;
    --color-sirocco-300: #d0d1d0;
    --color-sirocco-400: #b1b5b5;
    --color-sirocco-500: #989c9c;
    --color-sirocco-600: #777b7b;
    --color-sirocco-700: #696d6d;
    --color-sirocco-800: #585c5c;
    --color-sirocco-900: #4c4f4f;
    --color-sirocco-950: #2b2c2c;
    --color-sidebar-ring: var(--sidebar-ring);
    --color-sidebar-border: var(--sidebar-border);
    --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
    --color-sidebar-accent: var(--sidebar-accent);
    --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
    --color-sidebar-primary: var(--sidebar-primary);
    --color-sidebar-foreground: var(--sidebar-foreground);
    --color-sidebar: var(--sidebar);
    --color-chart-5: var(--chart-5);
    --color-chart-4: var(--chart-4);
    --color-chart-3: var(--chart-3);
    --color-chart-2: var(--chart-2);
    --color-chart-1: var(--chart-1);
    --color-ring: var(--ring);
    --color-input: var(--input);
    --color-border: var(--border);
    --color-destructive: var(--destructive);
    --color-accent-foreground: var(--accent-foreground);
    --color-accent: var(--accent);
    --color-muted-foreground: var(--muted-foreground);
    --color-muted: var(--muted);
    --color-secondary-foreground: var(--secondary-foreground);
    --color-secondary: var(--secondary);
    --color-primary-foreground: var(--primary-foreground);
    --color-primary: var(--primary);
    --color-popover-foreground: var(--popover-foreground);
    --color-popover: var(--popover);
    --color-card-foreground: var(--card-foreground);
    --color-card: var(--card);
    --radius-sm: calc(var(--radius) - 4px);
    --radius-md: calc(var(--radius) - 2px);
    --radius-lg: var(--radius);
    --radius-xl: calc(var(--radius) + 4px);
}

body {
    background: var(--background);
    color: var(--foreground);
    font-family: Arial, Helvetica, sans-serif;
}

.dark {
    --background: oklch(0.145 0 0);
    --foreground: oklch(0.985 0 0);
    --card: oklch(0.205 0 0);
    --card-foreground: oklch(0.985 0 0);
    --popover: oklch(0.205 0 0);
    --popover-foreground: oklch(0.985 0 0);
    --primary: oklch(0.922 0 0);
    --primary-foreground: oklch(0.205 0 0);
    --secondary: oklch(0.269 0 0);
    --secondary-foreground: oklch(0.985 0 0);
    --muted: oklch(0.269 0 0);
    --muted-foreground: oklch(0.708 0 0);
    --accent: oklch(0.269 0 0);
    --accent-foreground: oklch(0.985 0 0);
    --destructive: oklch(0.704 0.191 22.216);
    --border: oklch(1 0 0 / 10%);
    --input: oklch(1 0 0 / 15%);
    --ring: oklch(0.556 0 0);
    --chart-1: oklch(0.488 0.243 264.376);
    --chart-2: oklch(0.696 0.17 162.48);
    --chart-3: oklch(0.769 0.188 70.08);
    --chart-4: oklch(0.627 0.265 303.9);
    --chart-5: oklch(0.645 0.246 16.439);
    --sidebar: hsl(240 5.9% 10%);
    --sidebar-foreground: hsl(240 4.8% 95.9%);
    --sidebar-primary: hsl(224.3 76.3% 48%);
    --sidebar-primary-foreground: hsl(0 0% 100%);
    --sidebar-accent: hsl(240 3.7% 15.9%);
    --sidebar-accent-foreground: hsl(240 4.8% 95.9%);
    --sidebar-border: hsl(240 3.7% 15.9%);
    --sidebar-ring: hsl(217.2 91.2% 59.8%);
}

@layer base {
    * {
        @apply border-border outline-ring/50;
    }
    body {
        @apply bg-background text-foreground;
    }
}


==================================================================
FILE: ./src/components/ui/sheet.tsx
==================================================================

'use client';

import * as React from 'react';
import * as SheetPrimitive from '@radix-ui/react-dialog';
import { XIcon } from 'lucide-react';

import { cn } from '@/src/lib/utils';

function Sheet({ ...props }: React.ComponentProps<typeof SheetPrimitive.Root>) {
    return <SheetPrimitive.Root data-slot='sheet' {...props} />;
}

function SheetTrigger({
    ...props
}: React.ComponentProps<typeof SheetPrimitive.Trigger>) {
    return <SheetPrimitive.Trigger data-slot='sheet-trigger' {...props} />;
}

function SheetClose({
    ...props
}: React.ComponentProps<typeof SheetPrimitive.Close>) {
    return <SheetPrimitive.Close data-slot='sheet-close' {...props} />;
}

function SheetPortal({
    ...props
}: React.ComponentProps<typeof SheetPrimitive.Portal>) {
    return <SheetPrimitive.Portal data-slot='sheet-portal' {...props} />;
}

function SheetOverlay({
    className,
    ...props
}: React.ComponentProps<typeof SheetPrimitive.Overlay>) {
    return (
        <SheetPrimitive.Overlay
            data-slot='sheet-overlay'
            className={cn(
                'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',
                className
            )}
            {...props}
        />
    );
}

function SheetContent({
    className,
    children,
    side = 'right',
    ...props
}: React.ComponentProps<typeof SheetPrimitive.Content> & {
    side?: 'top' | 'right' | 'bottom' | 'left';
}) {
    return (
        <SheetPortal>
            <SheetOverlay />
            <SheetPrimitive.Content
                data-slot='sheet-content'
                className={cn(
                    'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500',
                    side === 'right' &&
                        'data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm',
                    side === 'left' &&
                        'data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm',
                    side === 'top' &&
                        'data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b',
                    side === 'bottom' &&
                        'data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t',
                    className
                )}
                {...props}>
                {children}
                <SheetPrimitive.Close className='ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none'>
                    <XIcon className='size-4' />
                    <span className='sr-only'>Close</span>
                </SheetPrimitive.Close>
            </SheetPrimitive.Content>
        </SheetPortal>
    );
}

function SheetHeader({ className, ...props }: React.ComponentProps<'div'>) {
    return (
        <div
            data-slot='sheet-header'
            className={cn('flex flex-col gap-1.5 p-4', className)}
            {...props}
        />
    );
}

function SheetFooter({ className, ...props }: React.ComponentProps<'div'>) {
    return (
        <div
            data-slot='sheet-footer'
            className={cn('mt-auto flex flex-col gap-2 p-4', className)}
            {...props}
        />
    );
}

function SheetTitle({
    className,
    ...props
}: React.ComponentProps<typeof SheetPrimitive.Title>) {
    return (
        <SheetPrimitive.Title
            data-slot='sheet-title'
            className={cn('text-foreground font-semibold', className)}
            {...props}
        />
    );
}

function SheetDescription({
    className,
    ...props
}: React.ComponentProps<typeof SheetPrimitive.Description>) {
    return (
        <SheetPrimitive.Description
            data-slot='sheet-description'
            className={cn('text-muted-foreground text-sm', className)}
            {...props}
        />
    );
}

export {
    Sheet,
    SheetTrigger,
    SheetClose,
    SheetContent,
    SheetHeader,
    SheetFooter,
    SheetTitle,
    SheetDescription,
};


==================================================================
FILE: ./src/components/ui/tooltip.tsx
==================================================================

import * as React from 'react';
import * as TooltipPrimitive from '@radix-ui/react-tooltip';

import { cn } from '@/src/lib/utils';

function TooltipProvider({
    delayDuration = 0,
    ...props
}: React.ComponentProps<typeof TooltipPrimitive.Provider>) {
    return (
        <TooltipPrimitive.Provider
            data-slot='tooltip-provider'
            delayDuration={delayDuration}
            {...props}
        />
    );
}

function Tooltip({
    ...props
}: React.ComponentProps<typeof TooltipPrimitive.Root>) {
    return (
        <TooltipProvider>
            <TooltipPrimitive.Root data-slot='tooltip' {...props} />
        </TooltipProvider>
    );
}

function TooltipTrigger({
    ...props
}: React.ComponentProps<typeof TooltipPrimitive.Trigger>) {
    return <TooltipPrimitive.Trigger data-slot='tooltip-trigger' {...props} />;
}

function TooltipContent({
    className,
    sideOffset = 0,
    children,
    ...props
}: React.ComponentProps<typeof TooltipPrimitive.Content>) {
    return (
        <TooltipPrimitive.Portal>
            <TooltipPrimitive.Content
                data-slot='tooltip-content'
                sideOffset={sideOffset}
                className={cn(
                    'bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance',
                    className
                )}
                {...props}>
                {children}
                <TooltipPrimitive.Arrow className='bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]' />
            </TooltipPrimitive.Content>
        </TooltipPrimitive.Portal>
    );
}

export { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider };


==================================================================
FILE: ./src/components/ui/breadcrumb.tsx
==================================================================

import * as React from 'react';
import { Slot } from '@radix-ui/react-slot';
import { ChevronRight, MoreHorizontal } from 'lucide-react';

import { cn } from '@/src/lib/utils';

function Breadcrumb({ ...props }: React.ComponentProps<'nav'>) {
    return <nav aria-label='breadcrumb' data-slot='breadcrumb' {...props} />;
}

function BreadcrumbList({ className, ...props }: React.ComponentProps<'ol'>) {
    return (
        <ol
            data-slot='breadcrumb-list'
            className={cn(
                'text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5',
                className
            )}
            {...props}
        />
    );
}

function BreadcrumbItem({ className, ...props }: React.ComponentProps<'li'>) {
    return (
        <li
            data-slot='breadcrumb-item'
            className={cn('inline-flex items-center gap-1.5', className)}
            {...props}
        />
    );
}

function BreadcrumbLink({
    asChild,
    className,
    ...props
}: React.ComponentProps<'a'> & {
    asChild?: boolean;
}) {
    const Comp = asChild ? Slot : 'a';

    return (
        <Comp
            data-slot='breadcrumb-link'
            className={cn('hover:text-foreground transition-colors', className)}
            {...props}
        />
    );
}

function BreadcrumbPage({ className, ...props }: React.ComponentProps<'span'>) {
    return (
        <span
            data-slot='breadcrumb-page'
            role='link'
            aria-disabled='true'
            aria-current='page'
            className={cn('text-foreground font-normal', className)}
            {...props}
        />
    );
}

function BreadcrumbSeparator({
    children,
    className,
    ...props
}: React.ComponentProps<'li'>) {
    return (
        <li
            data-slot='breadcrumb-separator'
            role='presentation'
            aria-hidden='true'
            className={cn('[&>svg]:size-3.5', className)}
            {...props}>
            {children ?? <ChevronRight />}
        </li>
    );
}

function BreadcrumbEllipsis({
    className,
    ...props
}: React.ComponentProps<'span'>) {
    return (
        <span
            data-slot='breadcrumb-ellipsis'
            role='presentation'
            aria-hidden='true'
            className={cn('flex size-9 items-center justify-center', className)}
            {...props}>
            <MoreHorizontal className='size-4' />
            <span className='sr-only'>More</span>
        </span>
    );
}

export {
    Breadcrumb,
    BreadcrumbList,
    BreadcrumbItem,
    BreadcrumbLink,
    BreadcrumbPage,
    BreadcrumbSeparator,
    BreadcrumbEllipsis,
};


==================================================================
FILE: ./src/components/ui/avatar.tsx
==================================================================

'use client';

import * as React from 'react';
import * as AvatarPrimitive from '@radix-ui/react-avatar';

import { cn } from '@/src/lib/utils';

function Avatar({
    className,
    ...props
}: React.ComponentProps<typeof AvatarPrimitive.Root>) {
    return (
        <AvatarPrimitive.Root
            data-slot='avatar'
            className={cn(
                'relative flex size-8 shrink-0 overflow-hidden rounded-full',
                className
            )}
            {...props}
        />
    );
}

function AvatarImage({
    className,
    ...props
}: React.ComponentProps<typeof AvatarPrimitive.Image>) {
    return (
        <AvatarPrimitive.Image
            data-slot='avatar-image'
            className={cn('aspect-square size-full', className)}
            {...props}
        />
    );
}

function AvatarFallback({
    className,
    ...props
}: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {
    return (
        <AvatarPrimitive.Fallback
            data-slot='avatar-fallback'
            className={cn(
                'bg-muted flex size-full items-center justify-center rounded-full',
                className
            )}
            {...props}
        />
    );
}

export { Avatar, AvatarImage, AvatarFallback };


==================================================================
FILE: ./src/components/ui/sidebar.tsx
==================================================================

'use client';
import * as React from 'react';
import { Slot } from '@radix-ui/react-slot';
import { cva, VariantProps } from 'class-variance-authority';
import { PanelLeftIcon } from 'lucide-react';

import { useIsMobile } from '@/src/hooks/use-mobile';
import { cn } from '@/src/lib/utils';
import { Button } from '@/src/components/ui/button';
import { Input } from '@/src/components/ui/input';
import { Separator } from '@/src/components/ui/separator';
import {
    Sheet,
    SheetContent,
    SheetDescription,
    SheetHeader,
    SheetTitle,
} from '@/src/components/ui/sheet';
import { Skeleton } from '@/src/components/ui/skeleton';
import {
    Tooltip,
    TooltipContent,
    TooltipProvider,
    TooltipTrigger,
} from '@/src/components/ui/tooltip';

const SIDEBAR_COOKIE_NAME = 'sidebar_state';
const SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7;
const SIDEBAR_WIDTH = '16rem';
const SIDEBAR_WIDTH_MOBILE = '18rem';
const SIDEBAR_WIDTH_ICON = '3rem';
const SIDEBAR_KEYBOARD_SHORTCUT = 'b';

type SidebarContextProps = {
    state: 'expanded' | 'collapsed';
    open: boolean;
    setOpen: (open: boolean) => void;
    openMobile: boolean;
    setOpenMobile: (open: boolean) => void;
    isMobile: boolean;
    toggleSidebar: () => void;
};

const SidebarContext = React.createContext<SidebarContextProps | null>(null);

function useSidebar() {
    const context = React.useContext(SidebarContext);
    if (!context) {
        throw new Error('useSidebar must be used within a SidebarProvider.');
    }

    return context;
}

function SidebarProvider({
    defaultOpen = true,
    open: openProp,
    onOpenChange: setOpenProp,
    className,
    style,
    children,
    ...props
}: React.ComponentProps<'div'> & {
    defaultOpen?: boolean;
    open?: boolean;
    onOpenChange?: (open: boolean) => void;
}) {
    const isMobile = useIsMobile();
    const [openMobile, setOpenMobile] = React.useState(false);

    // This is the internal state of the sidebar.
    // We use openProp and setOpenProp for control from outside the component.
    const [_open, _setOpen] = React.useState(defaultOpen);
    const open = openProp ?? _open;
    const setOpen = React.useCallback(
        (value: boolean | ((value: boolean) => boolean)) => {
            const openState = typeof value === 'function' ? value(open) : value;
            if (setOpenProp) {
                setOpenProp(openState);
            } else {
                _setOpen(openState);
            }

            // This sets the cookie to keep the sidebar state.
            document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`;
        },
        [setOpenProp, open]
    );

    // Helper to toggle the sidebar.
    const toggleSidebar = React.useCallback(() => {
        return isMobile ? setOpenMobile(open => !open) : setOpen(open => !open);
    }, [isMobile, setOpen, setOpenMobile]);

    // Adds a keyboard shortcut to toggle the sidebar.
    React.useEffect(() => {
        const handleKeyDown = (event: KeyboardEvent) => {
            if (
                event.key === SIDEBAR_KEYBOARD_SHORTCUT &&
                (event.metaKey || event.ctrlKey)
            ) {
                event.preventDefault();
                toggleSidebar();
            }
        };

        window.addEventListener('keydown', handleKeyDown);
        return () => window.removeEventListener('keydown', handleKeyDown);
    }, [toggleSidebar]);

    // We add a state so that we can do data-state="expanded" or "collapsed".
    // This makes it easier to style the sidebar with Tailwind classes.
    const state = open ? 'expanded' : 'collapsed';

    const contextValue = React.useMemo<SidebarContextProps>(
        () => ({
            state,
            open,
            setOpen,
            isMobile,
            openMobile,
            setOpenMobile,
            toggleSidebar,
        }),
        [
            state,
            open,
            setOpen,
            isMobile,
            openMobile,
            setOpenMobile,
            toggleSidebar,
        ]
    );

    return (
        <SidebarContext.Provider value={contextValue}>
            <TooltipProvider delayDuration={0}>
                <div
                    data-slot='sidebar-wrapper'
                    style={
                        {
                            '--sidebar-width': SIDEBAR_WIDTH,
                            '--sidebar-width-icon': SIDEBAR_WIDTH_ICON,
                            ...style,
                        } as React.CSSProperties
                    }
                    className={cn(
                        'group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full',
                        className
                    )}
                    {...props}>
                    {children}
                </div>
            </TooltipProvider>
        </SidebarContext.Provider>
    );
}

function Sidebar({
    side = 'left',
    variant = 'sidebar',
    collapsible = 'offcanvas',
    className,
    children,
    ...props
}: React.ComponentProps<'div'> & {
    side?: 'left' | 'right';
    variant?: 'sidebar' | 'floating' | 'inset';
    collapsible?: 'offcanvas' | 'icon' | 'none';
}) {
    const { isMobile, state, openMobile, setOpenMobile } = useSidebar();

    if (collapsible === 'none') {
        return (
            <div
                data-slot='sidebar'
                className={cn(
                    'bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col',
                    className
                )}
                {...props}>
                {children}
            </div>
        );
    }

    if (isMobile) {
        return (
            <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>
                <SheetContent
                    data-sidebar='sidebar'
                    data-slot='sidebar'
                    data-mobile='true'
                    className='bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden'
                    style={
                        {
                            '--sidebar-width': SIDEBAR_WIDTH_MOBILE,
                        } as React.CSSProperties
                    }
                    side={side}>
                    <SheetHeader className='sr-only'>
                        <SheetTitle>Sidebar</SheetTitle>
                        <SheetDescription>
                            Displays the mobile sidebar.
                        </SheetDescription>
                    </SheetHeader>
                    <div className='flex h-full w-full flex-col'>
                        {children}
                    </div>
                </SheetContent>
            </Sheet>
        );
    }

    return (
        <div
            className='group peer text-sidebar-foreground hidden md:block'
            data-state={state}
            data-collapsible={state === 'collapsed' ? collapsible : ''}
            data-variant={variant}
            data-side={side}
            data-slot='sidebar'>
            {/* This is what handles the sidebar gap on desktop */}
            <div
                data-slot='sidebar-gap'
                className={cn(
                    'relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear',
                    'group-data-[collapsible=offcanvas]:w-0',
                    'group-data-[side=right]:rotate-180',
                    variant === 'floating' || variant === 'inset'
                        ? 'group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]'
                        : 'group-data-[collapsible=icon]:w-(--sidebar-width-icon)'
                )}
            />
            <div
                data-slot='sidebar-container'
                className={cn(
                    'fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex',
                    side === 'left'
                        ? 'left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]'
                        : 'right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]',
                    // Adjust the padding for floating and inset variants.
                    variant === 'floating' || variant === 'inset'
                        ? 'p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]'
                        : 'group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l',
                    className
                )}
                {...props}>
                <div
                    data-sidebar='sidebar'
                    data-slot='sidebar-inner'
                    className='bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm'>
                    {children}
                </div>
            </div>
        </div>
    );
}

function SidebarTrigger({
    className,
    onClick,
    ...props
}: React.ComponentProps<typeof Button>) {
    const { toggleSidebar } = useSidebar();

    return (
        <Button
            data-sidebar='trigger'
            data-slot='sidebar-trigger'
            variant='ghost'
            size='icon'
            className={cn('size-7', className)}
            onClick={event => {
                onClick?.(event);
                toggleSidebar();
            }}
            {...props}>
            <PanelLeftIcon />
            <span className='sr-only'>Toggle Sidebar</span>
        </Button>
    );
}

function SidebarRail({ className, ...props }: React.ComponentProps<'button'>) {
    const { toggleSidebar } = useSidebar();

    return (
        <button
            data-sidebar='rail'
            data-slot='sidebar-rail'
            aria-label='Toggle Sidebar'
            tabIndex={-1}
            onClick={toggleSidebar}
            title='Toggle Sidebar'
            className={cn(
                'hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex',
                'in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize',
                '[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize',
                'hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full',
                '[[data-side=left][data-collapsible=offcanvas]_&]:-right-2',
                '[[data-side=right][data-collapsible=offcanvas]_&]:-left-2',
                className
            )}
            {...props}
        />
    );
}

function SidebarInset({ className, ...props }: React.ComponentProps<'main'>) {
    return (
        <main
            data-slot='sidebar-inset'
            className={cn(
                'bg-background relative flex w-full flex-1 flex-col',
                'md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2',
                className
            )}
            {...props}
        />
    );
}

function SidebarInput({
    className,
    ...props
}: React.ComponentProps<typeof Input>) {
    return (
        <Input
            data-slot='sidebar-input'
            data-sidebar='input'
            className={cn('bg-background h-8 w-full shadow-none', className)}
            {...props}
        />
    );
}

function SidebarHeader({ className, ...props }: React.ComponentProps<'div'>) {
    return (
        <div
            data-slot='sidebar-header'
            data-sidebar='header'
            className={cn('flex flex-col gap-2 p-2', className)}
            {...props}
        />
    );
}

function SidebarFooter({ className, ...props }: React.ComponentProps<'div'>) {
    return (
        <div
            data-slot='sidebar-footer'
            data-sidebar='footer'
            className={cn('flex flex-col gap-2 p-2', className)}
            {...props}
        />
    );
}

function SidebarSeparator({
    className,
    ...props
}: React.ComponentProps<typeof Separator>) {
    return (
        <Separator
            data-slot='sidebar-separator'
            data-sidebar='separator'
            className={cn('bg-sidebar-border mx-2 w-auto', className)}
            {...props}
        />
    );
}

function SidebarContent({ className, ...props }: React.ComponentProps<'div'>) {
    return (
        <div
            data-slot='sidebar-content'
            data-sidebar='content'
            className={cn(
                'flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden',
                className
            )}
            {...props}
        />
    );
}

function SidebarGroup({ className, ...props }: React.ComponentProps<'div'>) {
    return (
        <div
            data-slot='sidebar-group'
            data-sidebar='group'
            className={cn(
                'relative flex w-full min-w-0 flex-col p-2',
                className
            )}
            {...props}
        />
    );
}

function SidebarGroupLabel({
    className,
    asChild = false,
    ...props
}: React.ComponentProps<'div'> & { asChild?: boolean }) {
    const Comp = asChild ? Slot : 'div';

    return (
        <Comp
            data-slot='sidebar-group-label'
            data-sidebar='group-label'
            className={cn(
                'text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0',
                'group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0',
                className
            )}
            {...props}
        />
    );
}

function SidebarGroupAction({
    className,
    asChild = false,
    ...props
}: React.ComponentProps<'button'> & { asChild?: boolean }) {
    const Comp = asChild ? Slot : 'button';

    return (
        <Comp
            data-slot='sidebar-group-action'
            data-sidebar='group-action'
            className={cn(
                'text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0',
                // Increases the hit area of the button on mobile.
                'after:absolute after:-inset-2 md:after:hidden',
                'group-data-[collapsible=icon]:hidden',
                className
            )}
            {...props}
        />
    );
}

function SidebarGroupContent({
    className,
    ...props
}: React.ComponentProps<'div'>) {
    return (
        <div
            data-slot='sidebar-group-content'
            data-sidebar='group-content'
            className={cn('w-full text-sm', className)}
            {...props}
        />
    );
}

function SidebarMenu({ className, ...props }: React.ComponentProps<'ul'>) {
    return (
        <ul
            data-slot='sidebar-menu'
            data-sidebar='menu'
            className={cn('flex w-full min-w-0 flex-col gap-1', className)}
            {...props}
        />
    );
}

function SidebarMenuItem({ className, ...props }: React.ComponentProps<'li'>) {
    return (
        <li
            data-slot='sidebar-menu-item'
            data-sidebar='menu-item'
            className={cn('group/menu-item relative', className)}
            {...props}
        />
    );
}

const sidebarMenuButtonVariants = cva(
    'peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0',
    {
        variants: {
            variant: {
                default:
                    'hover:bg-sidebar-accent hover:text-sidebar-accent-foreground',
                outline:
                    'bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]',
            },
            size: {
                default: 'h-8 text-sm',
                sm: 'h-7 text-xs',
                lg: 'h-12 text-sm group-data-[collapsible=icon]:p-0!',
            },
        },
        defaultVariants: {
            variant: 'default',
            size: 'default',
        },
    }
);

function SidebarMenuButton({
    asChild = false,
    isActive = false,
    variant = 'default',
    size = 'default',
    tooltip,
    className,
    ...props
}: React.ComponentProps<'button'> & {
    asChild?: boolean;
    isActive?: boolean;
    tooltip?: string | React.ComponentProps<typeof TooltipContent>;
} & VariantProps<typeof sidebarMenuButtonVariants>) {
    const Comp = asChild ? Slot : 'button';
    const { isMobile, state } = useSidebar();

    const button = (
        <Comp
            data-slot='sidebar-menu-button'
            data-sidebar='menu-button'
            data-size={size}
            data-active={isActive}
            className={cn(
                sidebarMenuButtonVariants({ variant, size }),
                className
            )}
            {...props}
        />
    );

    if (!tooltip) {
        return button;
    }

    if (typeof tooltip === 'string') {
        tooltip = {
            children: tooltip,
        };
    }

    return (
        <Tooltip>
            <TooltipTrigger asChild>{button}</TooltipTrigger>
            <TooltipContent
                side='right'
                align='center'
                hidden={state !== 'collapsed' || isMobile}
                {...tooltip}
            />
        </Tooltip>
    );
}

function SidebarMenuAction({
    className,
    asChild = false,
    showOnHover = false,
    ...props
}: React.ComponentProps<'button'> & {
    asChild?: boolean;
    showOnHover?: boolean;
}) {
    const Comp = asChild ? Slot : 'button';

    return (
        <Comp
            data-slot='sidebar-menu-action'
            data-sidebar='menu-action'
            className={cn(
                'text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0',
                // Increases the hit area of the button on mobile.
                'after:absolute after:-inset-2 md:after:hidden',
                'peer-data-[size=sm]/menu-button:top-1',
                'peer-data-[size=default]/menu-button:top-1.5',
                'peer-data-[size=lg]/menu-button:top-2.5',
                'group-data-[collapsible=icon]:hidden',
                showOnHover &&
                    'peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0',
                className
            )}
            {...props}
        />
    );
}

function SidebarMenuBadge({
    className,
    ...props
}: React.ComponentProps<'div'>) {
    return (
        <div
            data-slot='sidebar-menu-badge'
            data-sidebar='menu-badge'
            className={cn(
                'text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none',
                'peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground',
                'peer-data-[size=sm]/menu-button:top-1',
                'peer-data-[size=default]/menu-button:top-1.5',
                'peer-data-[size=lg]/menu-button:top-2.5',
                'group-data-[collapsible=icon]:hidden',
                className
            )}
            {...props}
        />
    );
}

function SidebarMenuSkeleton({
    className,
    showIcon = false,
    ...props
}: React.ComponentProps<'div'> & {
    showIcon?: boolean;
}) {
    // Random width between 50 to 90%.
    const width = React.useMemo(() => {
        return `${Math.floor(Math.random() * 40) + 50}%`;
    }, []);

    return (
        <div
            data-slot='sidebar-menu-skeleton'
            data-sidebar='menu-skeleton'
            className={cn(
                'flex h-8 items-center gap-2 rounded-md px-2',
                className
            )}
            {...props}>
            {showIcon && (
                <Skeleton
                    className='size-4 rounded-md'
                    data-sidebar='menu-skeleton-icon'
                />
            )}
            <Skeleton
                className='h-4 max-w-(--skeleton-width) flex-1'
                data-sidebar='menu-skeleton-text'
                style={
                    {
                        '--skeleton-width': width,
                    } as React.CSSProperties
                }
            />
        </div>
    );
}

function SidebarMenuSub({ className, ...props }: React.ComponentProps<'ul'>) {
    return (
        <ul
            data-slot='sidebar-menu-sub'
            data-sidebar='menu-sub'
            className={cn(
                'border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5',
                'group-data-[collapsible=icon]:hidden',
                className
            )}
            {...props}
        />
    );
}

function SidebarMenuSubItem({
    className,
    ...props
}: React.ComponentProps<'li'>) {
    return (
        <li
            data-slot='sidebar-menu-sub-item'
            data-sidebar='menu-sub-item'
            className={cn('group/menu-sub-item relative', className)}
            {...props}
        />
    );
}

function SidebarMenuSubButton({
    asChild = false,
    size = 'md',
    isActive = false,
    className,
    ...props
}: React.ComponentProps<'a'> & {
    asChild?: boolean;
    size?: 'sm' | 'md';
    isActive?: boolean;
}) {
    const Comp = asChild ? Slot : 'a';

    return (
        <Comp
            data-slot='sidebar-menu-sub-button'
            data-sidebar='menu-sub-button'
            data-size={size}
            data-active={isActive}
            className={cn(
                'text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline-hidden focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0',
                'data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground',
                size === 'sm' && 'text-xs',
                size === 'md' && 'text-sm',
                'group-data-[collapsible=icon]:hidden',
                className
            )}
            {...props}
        />
    );
}

export {
    Sidebar,
    SidebarContent,
    SidebarFooter,
    SidebarGroup,
    SidebarGroupAction,
    SidebarGroupContent,
    SidebarGroupLabel,
    SidebarHeader,
    SidebarInput,
    SidebarInset,
    SidebarMenu,
    SidebarMenuAction,
    SidebarMenuBadge,
    SidebarMenuButton,
    SidebarMenuItem,
    SidebarMenuSkeleton,
    SidebarMenuSub,
    SidebarMenuSubButton,
    SidebarMenuSubItem,
    SidebarProvider,
    SidebarRail,
    SidebarSeparator,
    SidebarTrigger,
    useSidebar,
};


==================================================================
FILE: ./src/components/ui/separator.tsx
==================================================================

import * as React from 'react';
import * as SeparatorPrimitive from '@radix-ui/react-separator';

import { cn } from '@/src/lib/utils';

function Separator({
    className,
    orientation = 'horizontal',
    decorative = true,
    ...props
}: React.ComponentProps<typeof SeparatorPrimitive.Root>) {
    return (
        <SeparatorPrimitive.Root
            data-slot='separator'
            decorative={decorative}
            orientation={orientation}
            className={cn(
                'bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px',
                className
            )}
            {...props}
        />
    );
}

export { Separator };


==================================================================
FILE: ./src/components/ui/button.tsx
==================================================================

import * as React from 'react';
import { Slot } from '@radix-ui/react-slot';
import { cva, type VariantProps } from 'class-variance-authority';

import { cn } from '@/src/lib/utils';

const buttonVariants = cva(
    "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
    {
        variants: {
            variant: {
                default:
                    'bg-primary text-primary-foreground hover:bg-primary/90',
                destructive:
                    'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',
                outline:
                    'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',
                secondary:
                    'bg-secondary text-secondary-foreground hover:bg-secondary/80',
                ghost: 'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',
                link: 'text-primary underline-offset-4 hover:underline',
            },
            size: {
                default: 'h-9 px-4 py-2 has-[>svg]:px-3',
                sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',
                lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',
                icon: 'size-9',
            },
        },
        defaultVariants: {
            variant: 'default',
            size: 'default',
        },
    }
);

function Button({
    className,
    variant,
    size,
    asChild = false,
    ...props
}: React.ComponentProps<'button'> &
    VariantProps<typeof buttonVariants> & {
        asChild?: boolean;
    }) {
    const Comp = asChild ? Slot : 'button';

    return (
        <Comp
            data-slot='button'
            className={cn(buttonVariants({ variant, size, className }))}
            {...props}
        />
    );
}

export { Button, buttonVariants };


==================================================================
FILE: ./src/components/ui/collapsible.tsx
==================================================================

"use client"

import * as CollapsiblePrimitive from "@radix-ui/react-collapsible"

function Collapsible({
  ...props
}: React.ComponentProps<typeof CollapsiblePrimitive.Root>) {
  return <CollapsiblePrimitive.Root data-slot="collapsible" {...props} />
}

function CollapsibleTrigger({
  ...props
}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleTrigger>) {
  return (
    <CollapsiblePrimitive.CollapsibleTrigger
      data-slot="collapsible-trigger"
      {...props}
    />
  )
}

function CollapsibleContent({
  ...props
}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleContent>) {
  return (
    <CollapsiblePrimitive.CollapsibleContent
      data-slot="collapsible-content"
      {...props}
    />
  )
}

export { Collapsible, CollapsibleTrigger, CollapsibleContent }


==================================================================
FILE: ./src/components/ui/dropdown-menu.tsx
==================================================================

import * as React from 'react';
import * as DropdownMenuPrimitive from '@radix-ui/react-dropdown-menu';
import { CheckIcon, ChevronRightIcon, CircleIcon } from 'lucide-react';

import { cn } from '@/src/lib/utils';

function DropdownMenu({
    ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Root>) {
    return <DropdownMenuPrimitive.Root data-slot='dropdown-menu' {...props} />;
}

function DropdownMenuPortal({
    ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Portal>) {
    return (
        <DropdownMenuPrimitive.Portal
            data-slot='dropdown-menu-portal'
            {...props}
        />
    );
}

function DropdownMenuTrigger({
    ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Trigger>) {
    return (
        <DropdownMenuPrimitive.Trigger
            data-slot='dropdown-menu-trigger'
            {...props}
        />
    );
}

function DropdownMenuContent({
    className,
    sideOffset = 4,
    ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Content>) {
    return (
        <DropdownMenuPrimitive.Portal>
            <DropdownMenuPrimitive.Content
                data-slot='dropdown-menu-content'
                sideOffset={sideOffset}
                className={cn(
                    'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md',
                    className
                )}
                {...props}
            />
        </DropdownMenuPrimitive.Portal>
    );
}

function DropdownMenuGroup({
    ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Group>) {
    return (
        <DropdownMenuPrimitive.Group
            data-slot='dropdown-menu-group'
            {...props}
        />
    );
}

function DropdownMenuItem({
    className,
    inset,
    variant = 'default',
    ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Item> & {
    inset?: boolean;
    variant?: 'default' | 'destructive';
}) {
    return (
        <DropdownMenuPrimitive.Item
            data-slot='dropdown-menu-item'
            data-inset={inset}
            data-variant={variant}
            className={cn(
                "focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
                className
            )}
            {...props}
        />
    );
}

function DropdownMenuCheckboxItem({
    className,
    children,
    checked,
    ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.CheckboxItem>) {
    return (
        <DropdownMenuPrimitive.CheckboxItem
            data-slot='dropdown-menu-checkbox-item'
            className={cn(
                "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
                className
            )}
            checked={checked}
            {...props}>
            <span className='pointer-events-none absolute left-2 flex size-3.5 items-center justify-center'>
                <DropdownMenuPrimitive.ItemIndicator>
                    <CheckIcon className='size-4' />
                </DropdownMenuPrimitive.ItemIndicator>
            </span>
            {children}
        </DropdownMenuPrimitive.CheckboxItem>
    );
}

function DropdownMenuRadioGroup({
    ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioGroup>) {
    return (
        <DropdownMenuPrimitive.RadioGroup
            data-slot='dropdown-menu-radio-group'
            {...props}
        />
    );
}

function DropdownMenuRadioItem({
    className,
    children,
    ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioItem>) {
    return (
        <DropdownMenuPrimitive.RadioItem
            data-slot='dropdown-menu-radio-item'
            className={cn(
                "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
                className
            )}
            {...props}>
            <span className='pointer-events-none absolute left-2 flex size-3.5 items-center justify-center'>
                <DropdownMenuPrimitive.ItemIndicator>
                    <CircleIcon className='size-2 fill-current' />
                </DropdownMenuPrimitive.ItemIndicator>
            </span>
            {children}
        </DropdownMenuPrimitive.RadioItem>
    );
}

function DropdownMenuLabel({
    className,
    inset,
    ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Label> & {
    inset?: boolean;
}) {
    return (
        <DropdownMenuPrimitive.Label
            data-slot='dropdown-menu-label'
            data-inset={inset}
            className={cn(
                'px-2 py-1.5 text-sm font-medium data-[inset]:pl-8',
                className
            )}
            {...props}
        />
    );
}

function DropdownMenuSeparator({
    className,
    ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Separator>) {
    return (
        <DropdownMenuPrimitive.Separator
            data-slot='dropdown-menu-separator'
            className={cn('bg-border -mx-1 my-1 h-px', className)}
            {...props}
        />
    );
}

function DropdownMenuShortcut({
    className,
    ...props
}: React.ComponentProps<'span'>) {
    return (
        <span
            data-slot='dropdown-menu-shortcut'
            className={cn(
                'text-muted-foreground ml-auto text-xs tracking-widest',
                className
            )}
            {...props}
        />
    );
}

function DropdownMenuSub({
    ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Sub>) {
    return (
        <DropdownMenuPrimitive.Sub data-slot='dropdown-menu-sub' {...props} />
    );
}

function DropdownMenuSubTrigger({
    className,
    inset,
    children,
    ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.SubTrigger> & {
    inset?: boolean;
}) {
    return (
        <DropdownMenuPrimitive.SubTrigger
            data-slot='dropdown-menu-sub-trigger'
            data-inset={inset}
            className={cn(
                'focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8',
                className
            )}
            {...props}>
            {children}
            <ChevronRightIcon className='ml-auto size-4' />
        </DropdownMenuPrimitive.SubTrigger>
    );
}

function DropdownMenuSubContent({
    className,
    ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.SubContent>) {
    return (
        <DropdownMenuPrimitive.SubContent
            data-slot='dropdown-menu-sub-content'
            className={cn(
                'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg',
                className
            )}
            {...props}
        />
    );
}

export {
    DropdownMenu,
    DropdownMenuPortal,
    DropdownMenuTrigger,
    DropdownMenuContent,
    DropdownMenuGroup,
    DropdownMenuLabel,
    DropdownMenuItem,
    DropdownMenuCheckboxItem,
    DropdownMenuRadioGroup,
    DropdownMenuRadioItem,
    DropdownMenuSeparator,
    DropdownMenuShortcut,
    DropdownMenuSub,
    DropdownMenuSubTrigger,
    DropdownMenuSubContent,
};


==================================================================
FILE: ./src/components/ui/textarea.tsx
==================================================================

import * as React from 'react';
import { cn } from '@/src/lib/utils';

const Textarea = React.forwardRef<
    HTMLTextAreaElement,
    React.TextareaHTMLAttributes<HTMLTextAreaElement>
>(({ className, ...props }, ref) => {
    return (
        <textarea
            className={cn(
                'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50',
                className
            )}
            ref={ref}
            {...props}
        />
    );
});
Textarea.displayName = 'Textarea';

export { Textarea };


==================================================================
FILE: ./src/components/ui/input.tsx
==================================================================

import * as React from 'react';

import { cn } from '@/src/lib/utils';

function Input({ className, type, ...props }: React.ComponentProps<'input'>) {
    return (
        <input
            type={type}
            data-slot='input'
            className={cn(
                'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',
                'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',
                'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',
                className
            )}
            {...props}
        />
    );
}

export { Input };


==================================================================
FILE: ./src/components/ui/skeleton.tsx
==================================================================

import { cn } from '@/src/lib/utils';

function Skeleton({ className, ...props }: React.ComponentProps<'div'>) {
    return (
        <div
            data-slot='skeleton'
            className={cn('bg-accent animate-pulse rounded-md', className)}
            {...props}
        />
    );
}

export { Skeleton };


==================================================================
FILE: ./src/components/home/index.tsx
==================================================================

import VideoPlayer from '@/src/components/home/video-player';
import ServiceTimes from '@/src/components/home/ServiceTimes';
import { FAQ } from '@/src/components/home/FAQ';

import { getServices } from '@/src/features/service-times/actions';
import { getFAQs } from '@/src/features/faq/actions';
import { queryKeys } from '@/src/lib/queryKeys';
import { getQueryClient } from '@/src/lib/queryClient';
import { dehydrate, HydrationBoundary } from '@tanstack/react-query';
import PastorsWelcome from '@/src/components/home/PastorsWelcome';

export default async function HomePage() {
    const queryClient = getQueryClient();

    await queryClient.prefetchQuery({
        queryKey: queryKeys.serviceTimes.lists(),
        queryFn: async () => {
            const result = await getServices();
            if (!result.success) throw new Error(result.error);
            return result.data;
        },
    });

    await queryClient.prefetchQuery({
        queryKey: queryKeys.faqs.lists(),
        queryFn: async () => {
            const result = await getFAQs();
            if (!result.success) throw new Error(result.error);
            return result.data;
        },
    });

    return (
        <HydrationBoundary state={dehydrate(queryClient)}>
            <div className=' justify-center bg-sirocco-200 '>
                <VideoPlayer />
                <ServiceTimes />
            </div>
            <PastorsWelcome />
            <FAQ />
        </HydrationBoundary>
    );
}


==================================================================
FILE: ./src/components/home/PastorsWelcome.tsx
==================================================================

import HeadingHome from '@/src/components/heading.home';

export default function PastorsWelcome() {
    return (
        <>
            <section className='relative py-20 overflow-hidden bg-white isolate sm:py-24 px-4'>
                <div className='max-w-5xl mx-auto space-y-8'>
                    <HeadingHome title='Pastor of See Life Baptist Church' />

                    <div className='text-center'>
                        {`â€œWelcome! Thatâ€™s the first thing you will notice
                            about See Life Baptist Church. We are a loving
                            welcoming body of believers in the Lord Jesus
                            Christ! John 13:36 By this shall all men know that
                            ye are my disciples, if ye have love one to another.
                            In a rapidly changing world, many individuals are
                            seeking the constants. At See Life Baptist Church we
                            have charted our course and remain steadfast in our
                            direction. We provide assurance that our direction,
                            and adherence to Bible standards and doctrines will
                            remain unchanged once you become part of our
                            community. We are here to glorify God and make Him
                            known to our community.`}
                    </div>

                    <div className='grid grid-cols-10 pt-10'>
                        <div className='flex items-center col-span-10 gap-4 mx-auto sm:col-span-8 sm:col-start-3 lg:col-span-4 lg:col-start-4'>
                            <img
                                className='object-cover w-20 h-20 rounded-full '
                                src={'/avatar.png'}
                                alt=''
                            />
                            <div className=''>
                                <img src='/images/sig.png' className='h-10' />

                                <div className='text-xs text-mako-600 font-extralight'>
                                    Pastor of See Life Baptist Church
                                </div>
                            </div>
                        </div>
                    </div>
                    {/* </figure> */}
                </div>
            </section>
        </>
    );
}


==================================================================
FILE: ./src/components/home/ServiceTimes.tsx
==================================================================

'use client';

import { useServices } from '@/src/features/service-times/queries';
import { Calendar } from 'lucide-react';

export default function ServiceTimes() {
    const { data: services, isLoading, error } = useServices();

    if (isLoading) return <div>Loading...</div>;
    if (error) return <div>Error loading services</div>;

    return (
        <div className='px-4 max-w-5xl mx-auto'>
            <div className='flex justify-center gap-4 py-20'>
                <div className='flex items-center gap-4'>
                    <Calendar />
                    <span>|</span>
                </div>
                <div>
                    <p className='text-2xl italic font-light'>Services</p>
                </div>
            </div>
            <ul role='list' className='divide-y-[0.4px] divide-gray-600 pb-10'>
                {services?.map(service => (
                    <li
                        key={service.id}
                        className='flex justify-between py-5 gap-x-6'>
                        <div className='flex min-w-0 gap-x-4'>
                            <div className='flex-auto min-w-0'>
                                <p className=' font-semibold leading-6 text-gray-900'>
                                    {service.name}
                                </p>
                                <p className='mt-1 text-sm leading-5 text-gray-500 truncate'>
                                    {service.description}
                                </p>
                            </div>
                        </div>
                        <div className='block shrink-0 sm:flex sm:flex-col sm:items-end'>
                            <p className='mt-1 text-sm leading-5 text-gray-500'>
                                {service.time}
                            </p>
                        </div>
                    </li>
                ))}
            </ul>
        </div>
    );
}


==================================================================
FILE: ./src/components/home/video-player.tsx
==================================================================

export default function VideoPlayer() {
    return (
        <video
            className='max-w-screen-xl w-full h-auto shadow-md xl:rounded-xl mx-auto'
            autoPlay
            muted
            loop
            playsInline>
            <source src='/hero.mp4' type='video/mp4' />
            Your browser does not support the video tag.
        </video>
    );
}


==================================================================
FILE: ./src/components/home/Visit.tsx
==================================================================

import Container from '@/src/components/container';

const data = {
    items: [
        {
            icon: (
                <svg
                    xmlns='http://www.w3.org/2000/svg'
                    viewBox='0 0 20 20'
                    fill='currentColor'
                    className='w-6 h-6 text-cerulean-600'>
                    <path d='M14.916 2.404a.75.75 0 01-.32 1.012l-.596.31V17a1 1 0 01-1 1h-2.26a.75.75 0 01-.75-.75v-3.5a.75.75 0 00-.75-.75H6.75a.75.75 0 00-.75.75v3.5a.75.75 0 01-.75.75h-3.5a.75.75 0 010-1.5H2V9.957a.75.75 0 01-.596-1.372L2 8.275V5.75a.75.75 0 011.5 0v1.745l10.404-5.41a.75.75 0 011.012.32zM15.861 8.57a.75.75 0 01.736-.025l1.999 1.04A.75.75 0 0118 10.957V16.5h.25a.75.75 0 110 1.5h-2a.75.75 0 01-.75-.75V9.21a.75.75 0 01.361-.64z' />
                </svg>
            ),
            name: 'Address',
            info: '40 Braithwaite St, Yeppoon QLD 4703',
        },
        {
            icon: (
                <svg
                    xmlns='http://www.w3.org/2000/svg'
                    viewBox='0 0 20 20'
                    fill='currentColor'
                    className='w-6 h-6 text-cerulean-600'>
                    <path
                        fillRule='evenodd'
                        d='M5.404 14.596A6.5 6.5 0 1116.5 10a1.25 1.25 0 01-2.5 0 4 4 0 10-.571 2.06A2.75 2.75 0 0018 10a8 8 0 10-2.343 5.657.75.75 0 00-1.06-1.06 6.5 6.5 0 01-9.193 0zM10 7.5a2.5 2.5 0 100 5 2.5 2.5 0 000-5z'
                        clipRule='evenodd'
                    />
                </svg>
            ),
            name: 'Email',
            info: 'info@seelifebaptistchurch.org.au',
        },
        {
            icon: (
                <svg
                    xmlns='http://www.w3.org/2000/svg'
                    viewBox='0 0 20 20'
                    fill='currentColor'
                    className='w-6 h-6 text-cerulean-600'>
                    <path
                        fillRule='evenodd'
                        d='M2 3.5A1.5 1.5 0 013.5 2h1.148a1.5 1.5 0 011.465 1.175l.716 3.223a1.5 1.5 0 01-1.052 1.767l-.933.267c-.41.117-.643.555-.48.95a11.542 11.542 0 006.254 6.254c.395.163.833-.07.95-.48l.267-.933a1.5 1.5 0 011.767-1.052l3.223.716A1.5 1.5 0 0118 15.352V16.5a1.5 1.5 0 01-1.5 1.5H15c-1.149 0-2.263-.15-3.326-.43A13.022 13.022 0 012.43 8.326 13.019 13.019 0 012 5V3.5z'
                        clipRule='evenodd'
                    />
                </svg>
            ),
            name: 'Phone',
            info: '0456 226 725',
        },
    ],
};

export default function Visit() {
    return (
        <div className='bg-mako-200'>
            <Container>
                <div className='grid lg:grid-cols-2 gap-8 py-12'>
                    {/* Left Column - Contact Information */}
                    <div className='text-mako-700'>
                        <h2 className='text-3xl font-bold tracking-tight sm:text-4xl mb-8'>
                            Get In Touch.
                            <br />
                            Or Come and Visit.
                        </h2>

                        <div className='space-y-6'>
                            <div className='space-y-4 font-light'>
                                {data.items.map((item, index) => (
                                    <div
                                        key={index}
                                        className='flex items-start space-x-4 p-4 bg-white/50 rounded-lg'>
                                        <div className='flex-shrink-0 mt-1'>
                                            {item.icon}
                                        </div>
                                        <div>
                                            <div className='font-semibold text-mako-800 mb-1 text-xs'>
                                                {item.name}
                                            </div>
                                            <div className='text-mako-700'>
                                                {item.info}
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>

                            <div className='pt-4'>
                                <a
                                    href='/contact'
                                    className='inline-flex items-center rounded-md bg-white px-6 py-3 text-base font-semibold text-gray-900 shadow-sm hover:bg-gray-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white transition-colors'>
                                    We look forward to meeting you
                                </a>
                            </div>
                        </div>
                    </div>

                    {/* Right Column - Map */}
                    <div className='lg:pl-8'>
                        <iframe
                            src='https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3669.203013264147!2d150.73649087531695!3d-23.12625357910117!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x6bc2e7b40f824441%3A0x95bd553513c7162f!2sSee%20Life%20Baptist%20Church!5e0!3m2!1sen!2sau!4v1692535596546!5m2!1sen!2sau'
                            className='w-full h-96 lg:h-[500px] rounded-lg shadow-lg'
                            style={{ border: '0' }}
                            allowFullScreen={false}
                            loading='lazy'
                            referrerPolicy='no-referrer-when-downgrade'
                            title='See Life Baptist Church Location'></iframe>
                    </div>
                </div>
            </Container>
        </div>
    );
}


==================================================================
FILE: ./src/components/home/FAQ.tsx
==================================================================

'use client';

import { useFAQs } from '@/src/features/faq/queries';

export function FAQ() {
    const { data: faqs, isLoading, error } = useFAQs();

    if (isLoading) return <div>Loading FAQs...</div>;
    if (error) return <div>Error loading FAQs</div>;
    if (!faqs || faqs.length === 0) return null;

    return (
        <div className='py-8 bg-gray-50'>
            <div className='container mx-auto px-4'>
                <div className='text-center mb-6'>
                    <h2 className='text-2xl font-bold text-gray-900 mb-3'>
                        Frequently Asked Questions
                    </h2>
                    <p className='text-gray-600 max-w-xl mx-auto text-sm'>
                        Common questions about our church.
                    </p>
                </div>

                <div className='max-w-2xl mx-auto space-y-3'>
                    {faqs.map(faq => (
                        <details
                            key={faq.id}
                            className='bg-white rounded-lg border'>
                            <summary className='cursor-pointer p-4 font-medium text-gray-900 text-sm hover:bg-gray-50 hover:rounded-lg focus:outline-none '>
                                {faq.question}
                            </summary>
                            <div className='px-4 py-4 text-gray-700 text-sm'>
                                {faq.answer}
                            </div>
                        </details>
                    ))}
                </div>
            </div>
        </div>
    );
}


==================================================================
FILE: ./src/components/container-root.jsx
==================================================================

export default function Container({ children }) {
    return (
        <div className='w-full max-w-6xl px-10 py-8 mx-auto '>{children}</div>
    );
}


==================================================================
FILE: ./src/components/team-switcher.tsx
==================================================================

'use client';

import * as React from 'react';
import { ChevronsUpDown, Plus } from 'lucide-react';

import {
    DropdownMenu,
    DropdownMenuContent,
    DropdownMenuItem,
    DropdownMenuLabel,
    DropdownMenuSeparator,
    DropdownMenuShortcut,
    DropdownMenuTrigger,
} from '@/src/components/ui/dropdown-menu';
import {
    SidebarMenu,
    SidebarMenuButton,
    SidebarMenuItem,
    useSidebar,
} from '@/src/components/ui/sidebar';

export function TeamSwitcher({
    teams,
}: {
    teams: {
        name: string;
        logo: React.ElementType;
        plan: string;
    }[];
}) {
    const { isMobile } = useSidebar();
    const [activeTeam, setActiveTeam] = React.useState(teams[0]);

    if (!activeTeam) {
        return null;
    }

    return (
        <SidebarMenu>
            <SidebarMenuItem>
                <DropdownMenu>
                    <DropdownMenuTrigger asChild>
                        <SidebarMenuButton
                            size='lg'
                            className='data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground'>
                            <div className='bg-sidebar-primary text-sidebar-primary-foreground flex aspect-square size-8 items-center justify-center rounded-lg'>
                                <activeTeam.logo className='size-4' />
                            </div>
                            <div className='grid flex-1 text-left text-sm leading-tight'>
                                <span className='truncate font-medium'>
                                    {activeTeam.name}
                                </span>
                                <span className='truncate text-xs'>
                                    {activeTeam.plan}
                                </span>
                            </div>
                        </SidebarMenuButton>
                    </DropdownMenuTrigger>
                </DropdownMenu>
            </SidebarMenuItem>
        </SidebarMenu>
    );
}


==================================================================
FILE: ./src/components/nav-main.tsx
==================================================================

import { ChevronRight, type LucideIcon } from 'lucide-react';

import {
    Collapsible,
    CollapsibleContent,
    CollapsibleTrigger,
} from '@/src/components/ui/collapsible';
import {
    SidebarGroup,
    SidebarGroupLabel,
    SidebarMenu,
    SidebarMenuButton,
    SidebarMenuItem,
    SidebarMenuSub,
    SidebarMenuSubButton,
    SidebarMenuSubItem,
} from '@/src/components/ui/sidebar';

export function NavMain({
    items,
}: {
    items: {
        title: string;
        url: string;
        icon?: LucideIcon;
        isActive?: boolean;
        items?: {
            title: string;
            url: string;
        }[];
    }[];
}) {
    return (
        <SidebarGroup>
            <SidebarGroupLabel>Platform</SidebarGroupLabel>
            <SidebarMenu>
                {items.map(item =>
                    item.items && item.items.length > 0 ? (
                        <Collapsible
                            key={item.title}
                            asChild
                            defaultOpen={item.isActive}
                            className='group/collapsible'>
                            <SidebarMenuItem>
                                <CollapsibleTrigger asChild>
                                    <SidebarMenuButton tooltip={item.title}>
                                        {item.icon && <item.icon />}
                                        <span>{item.title}</span>
                                        <ChevronRight className='ml-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90' />
                                    </SidebarMenuButton>
                                </CollapsibleTrigger>
                                <CollapsibleContent>
                                    <SidebarMenuSub>
                                        {item.items?.map(subItem => (
                                            <SidebarMenuSubItem
                                                key={subItem.title}>
                                                <SidebarMenuSubButton asChild>
                                                    <a href={subItem.url}>
                                                        <span>
                                                            {subItem.title}
                                                        </span>
                                                    </a>
                                                </SidebarMenuSubButton>
                                            </SidebarMenuSubItem>
                                        ))}
                                    </SidebarMenuSub>
                                </CollapsibleContent>
                            </SidebarMenuItem>
                        </Collapsible>
                    ) : (
                        <SidebarMenuItem key={item.title}>
                            <SidebarMenuButton asChild tooltip={item.title}>
                                <a href={item.url}>
                                    {item.icon && <item.icon />}
                                    <span>{item.title}</span>
                                </a>
                            </SidebarMenuButton>
                        </SidebarMenuItem>
                    )
                )}
            </SidebarMenu>
        </SidebarGroup>
    );
}


==================================================================
FILE: ./src/components/container.tsx
==================================================================

export default function Container({ children }: { children: React.ReactNode }) {
    return (
        <div className='w-full max-w-6xl px-10 py-8 mx-auto '>{children}</div>
    );
}


==================================================================
FILE: ./src/components/PageHeader.tsx
==================================================================

export default function PageHeader({
    title,
    sub,
}: {
    title: string;
    sub: string;
}) {
    return (
        <div className='pt-10 bg-neutral-300 min-h-52 px-4 pb-10'>
            <div className='max-w-6xl pt-10 md:pt-16 mx-auto text-center'>
                <h1 className='text-3xl md:text-4xl lg:text-5xl text-neutral-600'>
                    {' '}
                    {title}
                </h1>
                {sub && (
                    <p className='mt-4 italic text-sm md:text-md lg:text-lg'>
                        {sub}
                    </p>
                )}
            </div>
        </div>
    );
}


==================================================================
FILE: ./src/components/nav-user.tsx
==================================================================

'use client';

import {
    BadgeCheck,
    Bell,
    ChevronsUpDown,
    CreditCard,
    LogOut,
    Sparkles,
} from 'lucide-react';
import { useRouter } from 'next/navigation';

import {
    Avatar,
    AvatarFallback,
    AvatarImage,
} from '@/src/components/ui/avatar';
import {
    DropdownMenu,
    DropdownMenuContent,
    DropdownMenuGroup,
    DropdownMenuItem,
    DropdownMenuLabel,
    DropdownMenuSeparator,
    DropdownMenuTrigger,
} from '@/src/components/ui/dropdown-menu';
import {
    SidebarMenu,
    SidebarMenuButton,
    SidebarMenuItem,
    useSidebar,
} from '@/src/components/ui/sidebar';
import { authClient } from '@/src/components/auth-provider';

export function NavUser({
    user,
}: {
    user: {
        name: string;
        email: string;
        avatar: string;
    };
}) {
    const { isMobile } = useSidebar();
    const router = useRouter();

    const handleSignOut = async () => {
        await authClient.signOut();
        router.push('/login');
    };

    return (
        <SidebarMenu>
            <SidebarMenuItem>
                <DropdownMenu>
                    <DropdownMenuTrigger asChild>
                        <SidebarMenuButton
                            size='lg'
                            className='data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground'>
                            <Avatar className='h-8 w-8 rounded-lg'>
                                <AvatarImage
                                    src={user.avatar}
                                    alt={user.name}
                                />
                                <AvatarFallback className='rounded-lg'>
                                    CN
                                </AvatarFallback>
                            </Avatar>
                            <div className='grid flex-1 text-left text-sm leading-tight'>
                                <span className='truncate font-medium'>
                                    {user.name}
                                </span>
                                <span className='truncate text-xs'>
                                    {user.email}
                                </span>
                            </div>
                            <ChevronsUpDown className='ml-auto size-4' />
                        </SidebarMenuButton>
                    </DropdownMenuTrigger>
                    <DropdownMenuContent
                        className='w-(--radix-dropdown-menu-trigger-width) min-w-56 rounded-lg'
                        side={isMobile ? 'bottom' : 'right'}
                        align='end'
                        sideOffset={4}>
                        <DropdownMenuLabel className='p-0 font-normal'>
                            <div className='flex items-center gap-2 px-1 py-1.5 text-left text-sm'>
                                <Avatar className='h-8 w-8 rounded-lg'>
                                    <AvatarImage
                                        src={user.avatar}
                                        alt={user.name}
                                    />
                                    <AvatarFallback className='rounded-lg'>
                                        CN
                                    </AvatarFallback>
                                </Avatar>
                                <div className='grid flex-1 text-left text-sm leading-tight'>
                                    <span className='truncate font-medium'>
                                        {user.name}
                                    </span>
                                    <span className='truncate text-xs'>
                                        {user.email}
                                    </span>
                                </div>
                            </div>
                        </DropdownMenuLabel>

                        <DropdownMenuSeparator />
                        <DropdownMenuItem onClick={handleSignOut}>
                            <LogOut />
                            Log out
                        </DropdownMenuItem>
                    </DropdownMenuContent>
                </DropdownMenu>
            </SidebarMenuItem>
        </SidebarMenu>
    );
}


==================================================================
FILE: ./src/components/app-sidebar.tsx
==================================================================

'use client';

import * as React from 'react';
import { BookOpen, Calendar, Settings2, Users, HelpCircle } from 'lucide-react';

import { NavMain } from '@/src/components/nav-main';
import { NavUser } from '@/src/components/nav-user';
import { TeamSwitcher } from '@/src/components/team-switcher';
import {
    Sidebar,
    SidebarContent,
    SidebarFooter,
    SidebarHeader,
    SidebarRail,
} from '@/src/components/ui/sidebar';

// Dashboard navigation data
const data = {
    user: {
        name: 'Admin',
        email: 'admin@seelifebaptist.com',
        avatar: '/avatar.png',
    },
    teams: [
        {
            name: 'See Life Baptist',
            logo: BookOpen,
            plan: 'Church',
        },
    ],
    navMain: [
        {
            title: 'Users',
            url: '/dashboard/users',
            icon: Users,
        },
        {
            title: 'Service Times',
            url: '/dashboard/service-times',
            icon: Calendar,
        },
        {
            title: 'Statement of Faith',
            url: '/dashboard/statement-of-faith',
            icon: BookOpen,
        },
        {
            title: 'FAQ',
            url: '/dashboard/faq',
            icon: HelpCircle,
        },
        // {
        //     title: 'Settings',
        //     url: '/dashboard/settings',
        //     icon: Settings2,
        // },
    ],
    projects: [],
};

export function AppSidebar({ ...props }: React.ComponentProps<typeof Sidebar>) {
    return (
        <Sidebar collapsible='icon' {...props}>
            <SidebarHeader>
                <TeamSwitcher teams={data.teams} />
            </SidebarHeader>
            <SidebarContent>
                <NavMain items={data.navMain} />
            </SidebarContent>
            <SidebarFooter>
                <NavUser user={data.user} />
            </SidebarFooter>
            <SidebarRail />
        </Sidebar>
    );
}


==================================================================
FILE: ./src/components/heading.home.tsx
==================================================================

export default function HeadingHome({ title }: { title: string }) {
    return (
        <div className='flex flex-col items-center justify-center gap-4  text-cerulean-500'>
            <h2 className='text-2xl font-bold'>{title}</h2>
        </div>
    );
}


==================================================================
FILE: ./src/components/layouts/footer.tsx
==================================================================

import Link from 'next/link';
import Image from 'next/image';
import { getServices } from '@/src/features/service-times/actions';
import navigation from '@/src/config/menuConstants';
import Container from '@/src/components/container';

export default async function Footer() {
    let services: { id: string; name: string; time: string }[] = [];
    try {
        const result = await getServices();
        if (result.success && result.data) {
            services = result.data;
        } else {
            console.error('Footer: Failed to fetch service times.');
        }
    } catch (error) {
        console.error('Footer: Error fetching service times:', error);
    }

    const allLinks = navigation.flatMap(item =>
        item.subItems ? item.subItems : [item]
    );

    return (
        <div className='bg-mako-900 text-mako-200'>
            <Container>
                <div className='py-6 sm:py-8'>
                    {/* Logo Section - Top, centered */}
                    <div className='flex justify-center mb-8'>
                        <div className='w-32 sm:w-40'>
                            <Image
                                src='/images/logoFooter.png'
                                alt='See Life Baptist Church Logo'
                                width={200}
                                height={100}
                                className='w-full h-auto'
                                priority={false}
                            />
                        </div>
                    </div>

                    {/* Single Column Layout - All centered */}
                    <div className='flex flex-col items-center gap-6 mb-8'>
                        {/* Navigation Items */}
                        <ul className='flex flex-col md:flex-row md:gap-8 gap-2 text-center'>
                            {allLinks.map((link, idx) => (
                                <li key={idx}>
                                    <Link
                                        href={link.href}
                                        className='text-sm font-light hover:text-white transition-colors'>
                                        {link.name}
                                    </Link>
                                </li>
                            ))}
                        </ul>

                        {/* Facebook Icon */}
                        <div className='text-center'>
                            <a
                                href='https://www.facebook.com/profile.php?id=61552330245258'
                                target='_blank'
                                rel='noopener noreferrer'
                                className='inline-flex items-center justify-center w-8 h-8 rounded-full bg-blue-600 hover:bg-blue-700 transition-colors'
                                aria-label='Visit our Facebook page'>
                                <svg
                                    className='w-5 h-5 fill-current'
                                    viewBox='0 0 24 24'
                                    xmlns='http://www.w3.org/2000/svg'>
                                    <path d='M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z' />
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
            </Container>

            {/* Bottom Footer - Tighter spacing */}
            <div className='min-h-4'>
                <div className='max-w-6xl px-4 mx-auto text-xs font-light text-center'>
                    <hr className='border-mako-400 opacity-40' />
                    <p className='py-2'>
                        Â© {new Date().getFullYear()} See Life Baptist Church.
                        All rights reserved.
                    </p>
                </div>
            </div>
        </div>
    );
}


==================================================================
FILE: ./src/components/layouts/header.tsx
==================================================================

'use client';
import React, { Fragment, useState } from 'react';
import {
    Dialog,
    DialogPanel,
    Disclosure,
    DisclosureButton,
    DisclosurePanel,
    Popover,
    PopoverButton,
    PopoverGroup,
    Transition,
} from '@headlessui/react';
import navigation from '@/src/config/menuConstants';
import Container from '@/src/components/container';
import {
    Bars3Icon,
    ChevronDownIcon,
    XMarkIcon,
} from '@heroicons/react/16/solid';

function classNames(...classes: string[]): string {
    return classes.filter(Boolean).join(' ');
}
export default function Header() {
    const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

    return (
        <div className='bg-white '>
            <Container>
                <nav
                    className='flex items-center justify-between'
                    aria-label='Global'>
                    {/* LOGO */}
                    <div className='flex lg:flex-1'>
                        <a href='/' className='-m-1.5 p-1.5 cursor-pointer'>
                            <img
                                className='w-auto h-14'
                                src='/images/logo.png'
                                alt='see life logo'
                            />
                        </a>
                    </div>

                    <div className='flex lg:hidden'>
                        <button
                            type='button'
                            className='-m-2.5 inline-flex items-center justify-center rounded-md p-2.5 text-gray-700'
                            onClick={() => setMobileMenuOpen(true)}>
                            <span className='sr-only'>Open main menu</span>
                            <Bars3Icon className='w-6 h-6' aria-hidden='true' />
                        </button>
                    </div>

                    <PopoverGroup className='hidden lg:flex lg:gap-x-12'>
                        {navigation.map(item => (
                            <Popover key={item.name} className='relative'>
                                {item.subItems ? (
                                    <PopoverButton className='flex items-center text-sm font-semibold leading-6 text-gray-900 gap-x-1'>
                                        {item.name}
                                        <ChevronDownIcon
                                            className='flex-none w-5 h-5 text-gray-400'
                                            aria-hidden='true'
                                        />
                                    </PopoverButton>
                                ) : (
                                    <a
                                        href={item.href || '#'}
                                        className='text-sm font-semibold leading-6 text-gray-900'>
                                        {item.name}
                                    </a>
                                )}

                                {item.subItems && (
                                    <Transition
                                        as={React.Fragment}
                                        enter='transition ease-out duration-200'
                                        enterFrom='opacity-0 translate-y-1'
                                        enterTo='opacity-100 translate-y-0'
                                        leave='transition ease-in duration-150'
                                        leaveFrom='opacity-100 translate-y-0'
                                        leaveTo='opacity-0 translate-y-1'>
                                        <Popover.Panel className='absolute z-10 mt-3 overflow-hidden bg-white shadow-lg -left-40 top-full w-60 rounded-3xl ring-1 ring-gray-900/5'>
                                            <div className='p-4'>
                                                {item.subItems.map(subItem => (
                                                    <a
                                                        key={subItem.name}
                                                        href={subItem.href}
                                                        className='relative flex items-center p-4 text-sm leading-6 rounded-lg group gap-x-6 hover:bg-gray-50'>
                                                        {subItem.name}{' '}
                                                    </a>
                                                ))}
                                            </div>
                                            {/* Other content for calls to action */}
                                        </Popover.Panel>
                                    </Transition>
                                )}
                            </Popover>
                        ))}

                        {/* Calls to action */}
                    </PopoverGroup>
                </nav>

                <Dialog
                    as='div'
                    className='lg:hidden'
                    open={mobileMenuOpen}
                    onClose={setMobileMenuOpen}>
                    <div className='fixed inset-0 z-10' />
                    <DialogPanel className='fixed inset-y-0 right-0 z-10 w-full px-6 py-6 overflow-y-auto bg-white sm:max-w-sm sm:ring-1 sm:ring-gray-900/10'>
                        <div className='flex items-center justify-between'>
                            <a href='#' className='-m-1.5 p-1.5'>
                                <img
                                    className='w-auto h-16'
                                    src='/images/logo.png'
                                    alt=''
                                />
                            </a>
                            <button
                                type='button'
                                className='-m-2.5 rounded-md p-2.5 text-gray-700'
                                onClick={() => setMobileMenuOpen(false)}>
                                <span className='sr-only'>Close menu</span>
                                <XMarkIcon
                                    className='w-6 h-6'
                                    aria-hidden='true'
                                />
                            </button>
                        </div>
                        <div className='flow-root mt-6'>
                            <div className='-my-6 divide-y divide-gray-500/10'>
                                <div className='py-6 space-y-2'>
                                    {navigation.map(item => (
                                        <React.Fragment key={item.name}>
                                            {item.subItems ? (
                                                <Disclosure>
                                                    {({ open }) => (
                                                        <>
                                                            <DisclosureButton className='flex w-full items-center justify-between rounded-lg py-2 pl-3 pr-3.5 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50'>
                                                                {item.name}
                                                                <ChevronDownIcon
                                                                    className={classNames(
                                                                        open
                                                                            ? 'rotate-180'
                                                                            : '',
                                                                        'h-5 w-5 flex-none'
                                                                    )}
                                                                    aria-hidden='true'
                                                                />
                                                            </DisclosureButton>
                                                            <DisclosurePanel className='mt-2 space-y-2'>
                                                                {item.subItems.map(
                                                                    subItem => (
                                                                        <a
                                                                            key={
                                                                                subItem.name
                                                                            }
                                                                            href={
                                                                                subItem.href
                                                                            }
                                                                            className='block py-2 pl-6 pr-3 text-sm font-semibold leading-7 text-gray-900 rounded-lg hover:bg-gray-50'>
                                                                            {
                                                                                subItem.name
                                                                            }
                                                                        </a>
                                                                    )
                                                                )}
                                                            </DisclosurePanel>
                                                        </>
                                                    )}
                                                </Disclosure>
                                            ) : (
                                                <a
                                                    href={item.href}
                                                    className='block px-3 py-2 -mx-3 text-base font-semibold leading-7 text-gray-900 rounded-lg hover:bg-gray-50'>
                                                    {item.name}
                                                </a>
                                            )}
                                        </React.Fragment>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </DialogPanel>
                </Dialog>
            </Container>
        </div>
    );
}


==================================================================
FILE: ./src/components/pageDivTop.tsx
==================================================================

export default function PageDivTop() {
    return (
        <div className='relative'>
            <div className='custom-shape-divider-top-1692512740'>
                <svg
                    data-name='Layer 1'
                    xmlns='http://www.w3.org/2000/svg'
                    viewBox='0 0 1200 120'
                    preserveAspectRatio='none'>
                    <path
                        d='M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z'
                        opacity='.25'
                        className='shape-fill'></path>
                    <path
                        d='M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z'
                        opacity='.5'
                        className='shape-fill'></path>
                    <path
                        d='M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z'
                        className='shape-fill'></path>
                </svg>
            </div>
        </div>
    );
}


==================================================================
FILE: ./src/components/auth-provider.tsx
==================================================================

'use client';

import { createAuthClient } from 'better-auth/react';

export const authClient = createAuthClient({
    baseURL: process.env.BETTER_AUTH_URL || 'http://localhost:3000',
});

export function AuthProvider({ children }: { children: React.ReactNode }) {
    return <>{children}</>;
}


==================================================================
FILE: ./src/components/query-provider.tsx
==================================================================

'use client';

import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { ReactQueryDevtools } from '@tanstack/react-query-devtools';
import { useState } from 'react';

export function QueryProvider({ children }: { children: React.ReactNode }) {
    const [queryClient] = useState(
        () =>
            new QueryClient({
                defaultOptions: {
                    queries: {
                        staleTime: 60 * 1000, // 1 minute
                    },
                },
            })
    );

    return (
        <QueryClientProvider client={queryClient}>
            {children}
            <ReactQueryDevtools initialIsOpen={false} />
        </QueryClientProvider>
    );
}


==================================================================
FILE: ./src/components/nav-projects.tsx
==================================================================

'use client';

import {
    Folder,
    Forward,
    MoreHorizontal,
    Trash2,
    type LucideIcon,
} from 'lucide-react';

import {
    DropdownMenu,
    DropdownMenuContent,
    DropdownMenuItem,
    DropdownMenuSeparator,
    DropdownMenuTrigger,
} from '@/src/components/ui/dropdown-menu';
import {
    SidebarGroup,
    SidebarGroupLabel,
    SidebarMenu,
    SidebarMenuAction,
    SidebarMenuButton,
    SidebarMenuItem,
    useSidebar,
} from '@/src/components/ui/sidebar';

export function NavProjects({
    projects,
}: {
    projects: {
        name: string;
        url: string;
        icon: LucideIcon;
    }[];
}) {
    const { isMobile } = useSidebar();

    return (
        <SidebarGroup className='group-data-[collapsible=icon]:hidden'>
            <SidebarGroupLabel>Projects</SidebarGroupLabel>
            <SidebarMenu>
                {projects.map(item => (
                    <SidebarMenuItem key={item.name}>
                        <SidebarMenuButton asChild>
                            <a href={item.url}>
                                <item.icon />
                                <span>{item.name}</span>
                            </a>
                        </SidebarMenuButton>
                        <DropdownMenu>
                            <DropdownMenuTrigger asChild>
                                <SidebarMenuAction showOnHover>
                                    <MoreHorizontal />
                                    <span className='sr-only'>More</span>
                                </SidebarMenuAction>
                            </DropdownMenuTrigger>
                            <DropdownMenuContent
                                className='w-48 rounded-lg'
                                side={isMobile ? 'bottom' : 'right'}
                                align={isMobile ? 'end' : 'start'}>
                                <DropdownMenuItem>
                                    <Folder className='text-muted-foreground' />
                                    <span>View Project</span>
                                </DropdownMenuItem>
                                <DropdownMenuItem>
                                    <Forward className='text-muted-foreground' />
                                    <span>Share Project</span>
                                </DropdownMenuItem>
                                <DropdownMenuSeparator />
                                <DropdownMenuItem>
                                    <Trash2 className='text-muted-foreground' />
                                    <span>Delete Project</span>
                                </DropdownMenuItem>
                            </DropdownMenuContent>
                        </DropdownMenu>
                    </SidebarMenuItem>
                ))}
                <SidebarMenuItem>
                    <SidebarMenuButton className='text-sidebar-foreground/70'>
                        <MoreHorizontal className='text-sidebar-foreground/70' />
                        <span>More</span>
                    </SidebarMenuButton>
                </SidebarMenuItem>
            </SidebarMenu>
        </SidebarGroup>
    );
}


==================================================================
FILE: ./src/hooks/use-mobile.ts
==================================================================

import * as React from "react"

const MOBILE_BREAKPOINT = 768

export function useIsMobile() {
  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)

  React.useEffect(() => {
    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)
    const onChange = () => {
      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)
    }
    mql.addEventListener("change", onChange)
    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)
    return () => mql.removeEventListener("change", onChange)
  }, [])

  return !!isMobile
}


==================================================================
FILE: ./src/lib/prisma.ts
==================================================================

// lib/prisma.ts
import { PrismaClient } from '../generated/prisma';

const globalForPrisma = global as unknown as { prisma: PrismaClient };

export const prisma = globalForPrisma.prisma || new PrismaClient();

if (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;


==================================================================
FILE: ./src/lib/utils.ts
==================================================================

import { clsx, type ClassValue } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}


==================================================================
FILE: ./src/lib/queryKeys.ts
==================================================================

export const queryKeys = {
    users: {
        all: ['users'] as const,
        lists: () => [...queryKeys.users.all, 'list'] as const,
        list: (filters: Record<string, unknown>) =>
            [...queryKeys.users.lists(), { filters }] as const,
        details: () => [...queryKeys.users.all, 'detail'] as const,
        detail: (id: string) => [...queryKeys.users.details(), id] as const,
    },
    statements: {
        all: ['statements'] as const,
        lists: () => [...queryKeys.statements.all, 'list'] as const,
        list: (filters: Record<string, unknown>) =>
            [...queryKeys.statements.lists(), { filters }] as const,
        details: () => [...queryKeys.statements.all, 'detail'] as const,
        detail: (id: string) =>
            [...queryKeys.statements.details(), id] as const,
    },
    serviceTimes: {
        all: ['service-times'] as const,
        lists: () => [...queryKeys.serviceTimes.all, 'list'] as const,
        list: (filters: Record<string, unknown>) =>
            [...queryKeys.serviceTimes.lists(), { filters }] as const,
        details: () => [...queryKeys.serviceTimes.all, 'detail'] as const,
        detail: (id: string) =>
            [...queryKeys.serviceTimes.details(), id] as const,
    },
    faqs: {
        all: ['faqs'] as const,
        lists: () => [...queryKeys.faqs.all, 'list'] as const,
        list: (filters: Record<string, unknown>) =>
            [...queryKeys.faqs.lists(), { filters }] as const,
        details: () => [...queryKeys.faqs.all, 'detail'] as const,
        detail: (id: string) => [...queryKeys.faqs.details(), id] as const,
    },
} as const;


==================================================================
FILE: ./src/lib/queryClient.ts
==================================================================

import {
    QueryClient,
    defaultShouldDehydrateQuery,
    isServer,
} from '@tanstack/react-query';

function makeQueryClient() {
    return new QueryClient({
        defaultOptions: {
            queries: {
                staleTime: 60 * 1000,
            },
            dehydrate: {
                // include pending queries in dehydration
                shouldDehydrateQuery: query =>
                    defaultShouldDehydrateQuery(query) ||
                    query.state.status === 'pending',
            },
            mutations: {
                onError: (error: Error) => {
                    /** You can use toast or notification here */
                    console.error(error.message);
                },
            },
        },
    });
}

let browserQueryClient: QueryClient | undefined = undefined;

export function getQueryClient() {
    if (isServer) {
        // Server: always make a new query client
        return makeQueryClient();
    } else {
        // Browser: make a new query client if we don't already have one
        // This is very important, so we don't re-make a new client if React
        // suspends during the initial render. This may not be needed if we
        // have a suspense boundary BELOW the creation of the query client
        if (!browserQueryClient) browserQueryClient = makeQueryClient();
        return browserQueryClient;
    }
}


==================================================================
FILE: ./src/lib/apiClient.ts
==================================================================

import { getUsers, updateUser, deleteUser } from '../features/users/actions';
import { registerUserAction as createUser } from '../features/auth/actions';
import {
    getStatements,
    getStatement,
    createOrUpdateStatement,
} from '../features/statement/actions';

export interface IApiClient {
    users: {
        getAll: () => Promise<{
            success: boolean;
            data?: any[];
            error?: string;
        }>;
        create: (
            data: any
        ) => Promise<{ success: boolean; data?: any; error?: string }>;
        update: (
            id: string,
            data: any
        ) => Promise<{ success: boolean; data?: any; error?: string }>;
        delete: (id: string) => Promise<{ success: boolean; error?: string }>;
    };
    statements: {
        getAll: () => Promise<{
            success: boolean;
            data?: any[];
            error?: string;
        }>;
        get: (id: string) => Promise<{
            success: boolean;
            data?: any;
            error?: string;
        }>;
        create: (
            data: any
        ) => Promise<{ success: boolean; data?: any; error?: string }>;
        update: (
            id: string,
            data: any
        ) => Promise<{ success: boolean; data?: any; error?: string }>;
    };
}

export class ApiClient implements IApiClient {
    users = {
        getAll: getUsers,
        create: createUser,
        update: updateUser,
        delete: deleteUser,
    };
    statements = {
        getAll: getStatements,
        get: getStatement,
        create: (data: any) => createOrUpdateStatement(data),
        update: (id: string, data: any) =>
            createOrUpdateStatement({ ...data, id }),
    };
}

// Default instance
export const apiClient = new ApiClient();


==================================================================
FILE: ./src/lib/auth.ts
==================================================================

import { betterAuth, type BetterAuthOptions } from 'better-auth';
import { prismaAdapter } from 'better-auth/adapters/prisma';
import { nextCookies } from 'better-auth/next-js';
import { prisma } from '@/src/lib/prisma';

const authConfig: BetterAuthOptions = {
    baseURL: process.env.BETTER_AUTH_URL || 'http://localhost:3000',
    // REMOVE the fieldMap from this object
    database: prismaAdapter(prisma, {
        provider: 'mysql',
    }),
    emailAndPassword: {
        enabled: true,
        requireEmailVerification: false,
    },
    user: {
        additionalFields: {
            name: {
                type: 'string',
                required: false,
            },
            role: {
                type: 'string',
                required: false,
                defaultValue: 'USER',
            },
        },
    },
    socialProviders: {},
    plugins: [nextCookies()],
};

export const auth = betterAuth(authConfig);


==================================================================
FILE: ./src/lib/auth-client.ts
==================================================================

import { createAuthClient } from 'better-auth/react';

export const authClient = createAuthClient({
    // you can pass client configuration here
});


==================================================================
FILE: ./src/lib/providers.tsx
==================================================================

'use client';

import { getQueryClient } from '@/src/lib/queryClient';
import { QueryClientProvider } from '@tanstack/react-query';
import { ReactQueryDevtools } from '@tanstack/react-query-devtools';

export default function Providers({ children }: { children: React.ReactNode }) {
    const queryClient = getQueryClient();
    return (
        <QueryClientProvider client={queryClient}>
            {children}
            <ReactQueryDevtools initialIsOpen={false} />
        </QueryClientProvider>
    );
}


==================================================================
FILE: ./src/data/services.json
==================================================================

[
    {
        "id": 1,
        "serviceName": "Main Sunday Morning Service",
        "description": "",
        "time": "10 am"
    },
    {
        "id": 2,
        "serviceName": "Wednesday",
        "description": "",
        "time": "6:30 pm"
    },
    {
        "id": 3,
        "serviceName": "Ladies Bible Study",
        "description": "",
        "time": "Alternate Thursdays 10am"
    },
    {
        "id": 4,
        "serviceName": "Mens Breakfast",
        "description": "",
        "time": "Various Times"
    },
    {
        "id": 5,
        "serviceName": "Adult Sunday School",
        "description": "",
        "time": "9 am"
    },
    {
        "id": 6,
        "serviceName": "Small Group Bible Studies",
        "description": "",
        "time": "Various Times"
    }
]


âœ… Export completed!
ðŸ“Š Final file size: 392K
ðŸ“ Total files processed: 128
â° Completed at: Thu Oct  9 12:48:48 AEDT 2025
